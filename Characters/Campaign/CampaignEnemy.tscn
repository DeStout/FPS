[gd_scene load_steps=9 format=3 uid="uid://la6he6vwubnb"]

[ext_resource type="PackedScene" uid="uid://1s5qidco641t" path="res://Characters/CharacterBase.tscn" id="1_rf7ub"]
[ext_resource type="Script" path="res://Characters/Campaign/CampaignEnemy.gd" id="2_pqw3d"]
[ext_resource type="PackedScene" uid="uid://cy12nf62sv60i" path="res://Debug/VectorCube.tscn" id="3_3vsup"]
[ext_resource type="Script" path="res://addons/StateMachine/StateMachine/state_machine.gd" id="3_7r2cl"]
[ext_resource type="Script" path="res://Characters/Campaign/GuardState.gd" id="3_h5c2t"]
[ext_resource type="PackedScene" uid="uid://bd2fp3xjnl5vp" path="res://Characters/Campaign/VisionCone.tscn" id="3_u6o4h"]
[ext_resource type="Script" path="res://Characters/Campaign/AlertState.gd" id="5_geefd"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_drlm1"]
albedo_color = Color(1, 0.725141, 0.52472, 1)
subsurf_scatter_strength = 1.0
subsurf_scatter_skin_mode = true

[node name="CampaignEnemy" instance=ExtResource("1_rf7ub")]
script = ExtResource("2_pqw3d")
starting_weapon = 0

[node name="NavAgent" type="NavigationAgent3D" parent="." index="0"]

[node name="StateMachine" type="Node" parent="." index="1" node_paths=PackedStringArray("initial_state")]
script = ExtResource("3_7r2cl")
initial_state = NodePath("GuardState")

[node name="GuardState" type="Node" parent="StateMachine" index="0" node_paths=PackedStringArray("enemy")]
script = ExtResource("3_h5c2t")
enemy = NodePath("../..")

[node name="AlertState" type="Node" parent="StateMachine" index="1" node_paths=PackedStringArray("enemy")]
script = ExtResource("5_geefd")
enemy = NodePath("../..")

[node name="TargetCast" type="RayCast3D" parent="." index="3"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)
visible = false
target_position = Vector3(0, 0, -1)
collision_mask = 3
debug_shape_custom_color = Color(0, 0.54902, 0.282353, 1)

[node name="LookHelper" type="Node3D" parent="." index="5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)
visible = false

[node name="VisionCone" parent="LookHelper" index="0" node_paths=PackedStringArray("parent") instance=ExtResource("3_u6o4h")]
unique_name_in_owner = true
transform = Transform3D(10, 0, 0, 0, -4.37114e-07, -10, 0, 10, -4.37114e-07, 0, 0, 0)
parent = NodePath("../..")

[node name="Weapons" parent="." index="6"]
transform = Transform3D(0.844474, -0.0738664, 0.530479, -0.253958, 0.816803, 0.518013, -0.471561, -0.572168, 0.67101, 0.168196, 1.46327, -0.380695)

[node name="VectorCube" parent="AimHelper" index="0" instance=ExtResource("3_3vsup")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
visible = false

[node name="ShootCast" parent="AimHelper" index="2"]
collision_mask = 13

[node name="Skeleton3D" parent="Puppet" index="2"]
bones/1/position = Vector3(-9.03679e-10, 0.896489, -0.0641973)
bones/2/rotation = Quaternion(-0.143669, 0.000915595, 0.00241117, 0.989622)
bones/4/rotation = Quaternion(0.0830273, 0.0131015, 0.0181127, 0.996297)
bones/5/rotation = Quaternion(-0.0226301, -0.000165146, -0.0010561, 0.999743)
bones/7/rotation = Quaternion(-0.188465, 0.258085, -0.489065, 0.811596)
bones/8/rotation = Quaternion(0.25731, 0.0352209, -0.0501026, 0.964386)
bones/9/rotation = Quaternion(-0.00800268, -0.334649, -0.0177626, 0.942141)
bones/11/rotation = Quaternion(-0.13739, -0.0284308, 0.158158, 0.977395)
bones/12/rotation = Quaternion(-0.0728706, -0.00440988, -0.0389535, 0.996571)
bones/14/rotation = Quaternion(0.0639713, -0.172064, -0.0800917, 0.979738)
bones/15/rotation = Quaternion(0.0688573, 0.146545, 0.0441172, 0.985818)
bones/17/rotation = Quaternion(-0.304896, -0.0308292, 0.276547, 0.910829)
bones/18/rotation = Quaternion(-0.0645516, 0.0977242, -0.0941116, 0.988649)
bones/20/rotation = Quaternion(0.199851, 0.117346, 0.509075, 0.828934)
bones/21/rotation = Quaternion(0.695819, -0.0257445, 0.135485, 0.704853)
bones/22/rotation = Quaternion(0.131678, 0.26542, -0.0642933, 0.952932)
bones/24/rotation = Quaternion(-0.131238, 0.0437087, -0.137456, 0.980802)
bones/25/rotation = Quaternion(-0.0607968, 0.0137627, 0.0225046, 0.997802)
bones/27/rotation = Quaternion(0.0956334, 0.160887, 0.10575, 0.97662)
bones/28/rotation = Quaternion(0.0957114, -0.129442, -0.0732301, 0.984236)
bones/30/rotation = Quaternion(-0.522448, -0.384646, 0.592778, 0.477189)
bones/31/rotation = Quaternion(-0.291467, -0.110498, 0.336933, 0.888433)
bones/33/rotation = Quaternion(-0.588958, 0.225628, -0.159805, 0.759396)
bones/34/rotation = Quaternion(-0.0725689, 0.00388305, 0.111182, 0.991139)
bones/35/rotation = Quaternion(0.263787, -0.134298, -0.617755, 0.728532)
bones/36/rotation = Quaternion(0.00495412, -0.00577786, -0.163837, 0.986458)
bones/38/rotation = Quaternion(-0.529304, -0.0647751, 0.32757, 0.779961)
bones/39/rotation = Quaternion(-0.121924, -0.00381899, -0.186798, 0.974796)
bones/40/rotation = Quaternion(0.220408, 0.129955, 0.508771, 0.822)
bones/41/rotation = Quaternion(0.00495411, 0.00577787, 0.163837, 0.986458)

[node name="Body" parent="Puppet/Skeleton3D" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_drlm1")

[node name="Head" parent="Puppet/Skeleton3D" index="1"]
transform = Transform3D(-0.999985, -0.00553857, 0.000590588, -0.00555925, 0.985858, -0.167488, 0.000345412, -0.167489, -0.985874, -0.000900742, 1.57589, -0.0399553)

[node name="HeadArea" parent="Puppet/Skeleton3D/Head" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Neck" parent="Puppet/Skeleton3D" index="2"]
transform = Transform3D(-0.999994, -0.00340202, 0.000462594, -0.00342277, 0.977279, -0.211927, 0.000268899, -0.211928, -0.977285, -0.00068238, 1.51317, -0.0263525)

[node name="NeckArea" parent="Puppet/Skeleton3D/Neck" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Chest" parent="Puppet/Skeleton3D" index="3"]
transform = Transform3D(-0.999987, 0.00503549, -0.00111974, 0.00472632, 0.981337, 0.192238, 0.00206686, 0.19223, -0.981348, -1.81027e-09, 1.13466, -0.0868667)

[node name="ChestArea" parent="Puppet/Skeleton3D/Chest" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Stomach" parent="Puppet/Skeleton3D" index="4"]
transform = Transform3D(-1, -3.78941e-09, -3.89234e-07, 3.31093e-08, 0.995501, -0.0947544, 3.87842e-07, -0.0947544, -0.995501, -9.03679e-10, 0.896489, -0.0641973)

[node name="StomachArea" parent="Puppet/Skeleton3D/Stomach" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_UpperArm" parent="Puppet/Skeleton3D" index="5"]
transform = Transform3D(0.984354, 0.17078, -0.043375, 0.152333, -0.701105, 0.696596, 0.0885544, -0.692305, -0.716151, 0.194491, 1.39654, -0.0335099)

[node name="R_UpperArmArea" parent="Puppet/Skeleton3D/R_UpperArm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Forearm" parent="Puppet/Skeleton3D" index="6"]
transform = Transform3D(0.963658, -0.266377, -0.0201542, 0.194372, 0.647413, 0.736937, -0.183255, -0.714073, 0.675661, 0.230128, 1.25024, -0.177974)

[node name="R_ForearmArea" parent="Puppet/Skeleton3D/R_Forearm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Hand" parent="Puppet/Skeleton3D" index="7"]
transform = Transform3D(0.844474, -0.0738664, 0.530479, -0.253958, 0.816803, 0.518013, -0.471561, -0.572168, 0.67101, 0.175442, 1.38315, -0.324569)

[node name="R_HandArea" parent="Puppet/Skeleton3D/R_Hand" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_UpperArm" parent="Puppet/Skeleton3D" index="8"]
transform = Transform3D(0.976532, -0.19588, 0.0895303, -0.158481, -0.935041, -0.317148, 0.145837, 0.295516, -0.944141, -0.19543, 1.39583, -0.0334546)

[node name="L_UpperArmArea" parent="Puppet/Skeleton3D/L_UpperArm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Forearm" parent="Puppet/Skeleton3D" index="9"]
transform = Transform3D(0.976195, -0.0127731, 0.216518, -0.0541588, -0.980998, 0.186309, 0.210024, -0.1936, -0.958337, -0.236305, 1.20071, 0.0282114)

[node name="L_ForearmArea" parent="Puppet/Skeleton3D/L_Forearm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Hand" parent="Puppet/Skeleton3D" index="10"]
transform = Transform3D(0.893882, 0.0244473, -0.447635, 0.103119, -0.98295, 0.152236, -0.436281, -0.182241, -0.881162, -0.238927, 0.999318, -0.0115333)

[node name="L_HandArea" parent="Puppet/Skeleton3D/L_Hand" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Thigh" parent="Puppet/Skeleton3D" index="11"]
transform = Transform3D(0.486753, 0.0592219, 0.87153, -0.287397, -0.931299, 0.223796, 0.824908, -0.359408, -0.436293, 0.0851499, 0.879, -0.0593682)

[node name="R_ThighArea" parent="Puppet/Skeleton3D/R_Thigh" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Shin" parent="Puppet/Skeleton3D" index="12"]
transform = Transform3D(0.477445, 0.0251269, 0.878302, 0.0828212, -0.996427, -0.0165153, 0.874749, 0.0806273, -0.477821, 0.110033, 0.487705, -0.210377)

[node name="R_ShinArea" parent="Puppet/Skeleton3D/R_Shin" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Foot" parent="Puppet/Skeleton3D" index="13"]
transform = Transform3D(0.245939, 0.0720782, 0.966602, -0.853541, -0.456466, 0.25121, 0.459327, -0.886817, -0.0507408, 0.11946, 0.113839, -0.180125)

[node name="R_FootArea" parent="Puppet/Skeleton3D/R_Foot" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Thigh" parent="Puppet/Skeleton3D" index="14"]
transform = Transform3D(0.496536, -0.0506753, -0.866536, -0.123493, -0.992264, -0.0127354, -0.859187, 0.113335, -0.498953, -0.0851499, 0.879, -0.0593682)

[node name="L_ThighArea" parent="Puppet/Skeleton3D/L_Thigh" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Shin" parent="Puppet/Skeleton3D" index="15"]
transform = Transform3D(0.493758, -0.0346974, -0.868907, -0.338262, -0.928173, -0.155154, -0.801113, 0.370527, -0.47003, -0.106442, 0.46209, -0.0117494)

[node name="L_ShinArea" parent="Puppet/Skeleton3D/L_Shin" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Foot" parent="Puppet/Skeleton3D" index="16"]
transform = Transform3D(0.245938, -0.072076, -0.966602, 0.853542, -0.456465, 0.251208, -0.459326, -0.886817, -0.0507423, -0.11946, 0.113833, 0.127275)

[node name="L_FootArea" parent="Puppet/Skeleton3D/L_Foot" index="0"]
collision_layer = 8
collision_mask = 1

[node name="TargetTimer" type="Timer" parent="." index="9"]
one_shot = true

[node name="ShootTimer" type="Timer" parent="." index="10"]
one_shot = true

[connection signal="timeout" from="TargetTimer" to="." method="target_lost"]

[editable path="Weapons/Pistol"]
[editable path="Weapons/Pistol/Mesh"]
[editable path="Weapons/SMG"]
[editable path="Weapons/SMG/Mesh"]
[editable path="Weapons/Rifle"]
[editable path="Weapons/Shotgun"]
[editable path="Weapons/Sniper"]
[editable path="Puppet"]
