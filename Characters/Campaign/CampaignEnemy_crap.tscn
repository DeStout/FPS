[gd_scene load_steps=20 format=3 uid="uid://j0ev5ubpqujb"]

[ext_resource type="Script" path="res://Characters/Campaign/CampaignEnemy.gd" id="1_fpu07"]
[ext_resource type="Script" path="res://addons/StateMachine/StateMachine/state_machine.gd" id="2_q4kcn"]
[ext_resource type="Script" path="res://Characters/Campaign/GuardState.gd" id="3_3inax"]
[ext_resource type="Script" path="res://Characters/Campaign/AlertState.gd" id="4_x3xq4"]
[ext_resource type="PackedScene" uid="uid://bd2fp3xjnl5vp" path="res://Characters/Campaign/VisionCone.tscn" id="5_gkesb"]
[ext_resource type="PackedScene" uid="uid://bf4x61feslkq2" path="res://Characters/MannyBase_crap.tscn" id="6_too56"]
[ext_resource type="PackedScene" uid="uid://ckqtvo1inhvtn" path="res://Props/Weapons/Slapper/Slapper.tscn" id="7_qvp12"]
[ext_resource type="PackedScene" uid="uid://bwie7ixf4v1vw" path="res://Props/Weapons/Pistol/Pistol.tscn" id="8_garcs"]
[ext_resource type="PackedScene" uid="uid://dh23vd3s1cpss" path="res://Props/Weapons/SMG/SMG.tscn" id="9_r5tpj"]
[ext_resource type="PackedScene" uid="uid://bhxw75oi8yofw" path="res://Props/Weapons/Rifle/Rifle.tscn" id="10_mdymb"]
[ext_resource type="PackedScene" uid="uid://barsvh0ntyosw" path="res://Props/Weapons/Shotgun/Shotgun.tscn" id="11_m32ag"]
[ext_resource type="PackedScene" uid="uid://dlgv171g6as4t" path="res://Props/Weapons/Sniper/Sniper.tscn" id="12_nmvwi"]
[ext_resource type="Script" path="res://Characters/Multiplayer/Voice.gd" id="13_mfhmu"]
[ext_resource type="AudioStream" uid="uid://dvwslqt03fwb6" path="res://Props/Weapons/Slapper/Slap.ogg" id="14_m8vig"]
[ext_resource type="Script" path="res://RandomAudio.gd" id="15_shnoq"]
[ext_resource type="AudioStream" uid="uid://b56r0e1ges6xc" path="res://Characters/Audio/footstep1.ogg" id="16_orqae"]
[ext_resource type="AudioStream" uid="uid://doju4xf4dtgt" path="res://Characters/Audio/footstep2.ogg" id="17_bivns"]
[ext_resource type="AudioStream" uid="uid://cxbr801up84rw" path="res://Characters/Audio/footstep4.ogg" id="18_kqu4m"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_5yxej"]
radius = 0.35
height = 1.8

[node name="CampaignEnemy" type="CharacterBody3D" groups=["players"]]
collision_layer = 2
collision_mask = 3
platform_floor_layers = 4278190080
script = ExtResource("1_fpu07")
starting_weapon = 1

[node name="NavAgent" type="NavigationAgent3D" parent="."]

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state")]
script = ExtResource("2_q4kcn")
initial_state = NodePath("GuardState")

[node name="GuardState" type="Node" parent="StateMachine" node_paths=PackedStringArray("enemy")]
script = ExtResource("3_3inax")
enemy = NodePath("../..")

[node name="AlertState" type="Node" parent="StateMachine" node_paths=PackedStringArray("enemy")]
script = ExtResource("4_x3xq4")
enemy = NodePath("../..")

[node name="Collision" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9, 0)
visible = false
shape = SubResource("CapsuleShape3D_5yxej")

[node name="TargetCast" type="RayCast3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)
visible = false
target_position = Vector3(0, 0, -1)
collision_mask = 3
debug_shape_custom_color = Color(0, 0.54902, 0.282353, 1)

[node name="LookHelper" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)

[node name="VisionCone" parent="LookHelper" node_paths=PackedStringArray("parent") instance=ExtResource("5_gkesb")]
unique_name_in_owner = true
transform = Transform3D(10, 0, 0, 0, -4.37114e-07, -10, 0, 10, -4.37114e-07, 0, 0, 0)
parent = NodePath("../..")

[node name="Mannequin" parent="." instance=ExtResource("6_too56")]

[node name="Skeleton3D" parent="Mannequin/Mannequin" index="0"]
bones/0/position = Vector3(-0.000598402, 95.9845, -4.12125e-05)
bones/1/rotation = Quaternion(-0.00900091, -0.001659, 0.00247735, 0.999955)
bones/2/rotation = Quaternion(-0.00376358, -0.000401427, 0.000499017, 0.999993)
bones/3/rotation = Quaternion(0.0978689, -0.00153877, 0.00209363, 0.995196)
bones/4/rotation = Quaternion(-0.0639941, 0.0130093, 0.0907584, 0.99373)
bones/5/rotation = Quaternion(-0.106951, -0.00147644, 0.085162, 0.990609)
bones/7/rotation = Quaternion(-0.676793, -0.350902, 0.343868, -0.548246)
bones/8/rotation = Quaternion(0.171098, -0.351592, 0.535734, 0.748396)
bones/9/rotation = Quaternion(0.416408, -0.834544, 0.178065, 0.313741)
bones/10/position = Vector3(-5.17694e-08, 27.6145, 5.96712e-06)
bones/10/rotation = Quaternion(-0.402778, 0.709947, 0.0204288, 0.577346)
bones/11/rotation = Quaternion(0.00410313, -0.341062, 0.351294, 0.871925)
bones/12/rotation = Quaternion(-0.19284, -0.0873972, -0.363022, 0.907408)
bones/13/position = Vector3(-8.94068e-07, 4.38212, -8.48533e-06)
bones/14/position = Vector3(-7.61094e-06, 3.45908, -4.70429e-07)
bones/14/rotation = Quaternion(0.00914621, 0.125638, 0.0720726, 0.989412)
bones/15/rotation = Quaternion(0.277011, -0.0111927, -0.0133586, 0.960709)
bones/16/position = Vector3(1.39391e-07, 3.89197, 5.45716e-07)
bones/16/rotation = Quaternion(0.394131, -0.0748222, -0.037847, 0.915221)
bones/17/rotation = Quaternion(0.198663, 0.019591, -0.0464424, 0.978771)
bones/18/position = Vector3(-1.18696e-07, 3.07799, 5.00427e-06)
bones/18/rotation = Quaternion(2.38775e-06, 0.00400158, 2.27053e-05, 0.999992)
bones/19/position = Vector3(-1.24767e-05, 12.7755, -7.40892e-06)
bones/19/rotation = Quaternion(0.341459, 0.0124959, -0.0122757, 0.939733)
bones/20/position = Vector3(9.44538e-08, 3.61396, 2.4206e-06)
bones/20/rotation = Quaternion(0.367931, -0.0979184, -0.0508924, 0.923281)
bones/21/rotation = Quaternion(0.185156, -0.0564563, 0.0157441, 0.98096)
bones/22/rotation = Quaternion(-1.15068e-06, 0.00457943, -0.000654139, 0.999989)
bones/23/rotation = Quaternion(0.417372, 0.0495367, 0.0739347, 0.904368)
bones/24/position = Vector3(-3.17291e-07, 3.60118, 5.68246e-06)
bones/24/rotation = Quaternion(0.231551, -0.0538948, 0.0131875, 0.971239)
bones/25/position = Vector3(6.45812e-07, 3.30732, 9.69117e-06)
bones/25/rotation = Quaternion(0.32533, -0.0421628, -0.0066479, 0.944637)
bones/26/rotation = Quaternion(8.89262e-06, 0.00739619, 0.00077043, 0.999972)
bones/27/rotation = Quaternion(0.397955, -0.0106665, 0.0287413, 0.916893)
bones/28/position = Vector3(-8.72002e-07, 4.13666, 3.90132e-06)
bones/28/rotation = Quaternion(0.260883, -0.0830006, -0.0205133, 0.961577)
bones/29/position = Vector3(8.05506e-07, 2.59483, -1.64779e-05)
bones/29/rotation = Quaternion(-0.000442963, -0.0400839, -0.0111965, 0.999134)
bones/30/rotation = Quaternion(-2.85927e-06, 0.0040995, -0.000575544, 0.999991)
bones/31/rotation = Quaternion(0.560147, -0.463669, 0.539577, 0.424385)
bones/32/rotation = Quaternion(-0.168901, 0.0506943, -0.664855, 0.725859)
bones/33/rotation = Quaternion(0.0544882, 0.614992, -0.288094, 0.731996)
bones/34/rotation = Quaternion(-0.155427, 0.120997, 0.261739, 0.944825)
bones/35/rotation = Quaternion(0.269304, -0.237599, -0.479708, 0.800564)
bones/36/rotation = Quaternion(-0.116273, -0.171608, 0.504082, 0.838411)
bones/38/rotation = Quaternion(0.00923234, -0.127131, -0.0723282, 0.989202)
bones/39/rotation = Quaternion(0.635811, -0.271697, -0.295094, 0.659428)
bones/40/position = Vector3(-3.51555e-08, 3.89198, -1.93439e-06)
bones/40/rotation = Quaternion(0.447724, 0.422157, -0.227064, 0.75483)
bones/41/rotation = Quaternion(0.210744, 0.133364, 0.0381054, 0.967651)
bones/42/position = Vector3(2.9675e-07, 3.078, 4.2006e-06)
bones/42/rotation = Quaternion(-7.25751e-05, -0.0067093, 0.00137476, 0.999977)
bones/43/rotation = Quaternion(0.694863, 0.0388473, 0.0236457, 0.717703)
bones/44/position = Vector3(-4.90561e-08, 3.61397, -4.78636e-06)
bones/44/rotation = Quaternion(0.482599, 0.0719053, -0.00111037, 0.872884)
bones/45/rotation = Quaternion(0.363124, 0.103125, -0.00467264, 0.926004)
bones/46/rotation = Quaternion(-5.08278e-05, -0.00669526, -0.00170839, 0.999976)
bones/47/rotation = Quaternion(0.694863, 0.0388503, 0.0236426, 0.717703)
bones/48/rotation = Quaternion(0.485936, 0.0891751, -0.00948428, 0.869382)
bones/49/position = Vector3(-1.64081e-07, 3.30731, 3.4482e-07)
bones/49/rotation = Quaternion(0.383727, 0.0216687, 0.0531668, 0.92166)
bones/51/rotation = Quaternion(0.694863, 0.0388492, 0.0236437, 0.717703)
bones/52/position = Vector3(-4.98287e-08, 4.13665, 1.13457e-06)
bones/52/rotation = Quaternion(0.406755, 0.0937909, -0.031474, 0.908165)
bones/53/rotation = Quaternion(0.420121, 0.0291981, 0.0640543, 0.904734)
bones/54/rotation = Quaternion(-8.30163e-05, -0.00849887, 0.00220636, 0.999961)
bones/55/rotation = Quaternion(2.03257e-05, -0.00635018, 0.999975, -0.00296964)
bones/56/rotation = Quaternion(-0.0181143, 0.000182681, -0.00592014, 0.999818)
bones/57/rotation = Quaternion(0.54055, 0.0143664, 0.0249511, 0.840819)
bones/58/rotation = Quaternion(0.227692, -0.0325216, -0.0153655, 0.973069)
bones/60/rotation = Quaternion(-1.82097e-05, -0.0063338, 0.999975, 0.00305746)
bones/61/rotation = Quaternion(-0.0181471, -0.000182844, 0.00592015, 0.999818)
bones/62/rotation = Quaternion(0.540564, -0.014366, -0.0249513, 0.84081)
bones/63/rotation = Quaternion(0.227709, 0.0321196, 0.0152579, 0.97308)

[node name="Hips" parent="Mannequin/Mannequin/Skeleton3D" index="2"]
transform = Transform3D(-1, 8.78096e-05, 3.02004e-06, 8.78096e-05, 1, 4.95416e-08, -3.02004e-06, 4.98068e-08, -1, -0.000598402, 95.9845, -4.12125e-05)

[node name="HipsArea" parent="Mannequin/Mannequin/Skeleton3D/Hips" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Stomach" parent="Mannequin/Mannequin/Skeleton3D" index="3"]
transform = Transform3D(-0.999982, 0.00501234, 0.00336705, 0.00507314, 0.99982, 0.0182998, -0.00327472, 0.0183165, -0.999827, -0.000590418, 105.908, 1.22729)

[node name="StomachArea" parent="Mannequin/Mannequin/Skeleton3D/Stomach" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Chest" parent="Mannequin/Mannequin/Skeleton3D" index="4"]
transform = Transform3D(-0.999973, 0.00598183, 0.00421128, 0.0063851, 0.994624, 0.103354, -0.00357039, 0.103378, -0.994636, 0.0582144, 117.638, 1.44218)

[node name="ChestArea" parent="Mannequin/Mannequin/Skeleton3D/Chest" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Neck" parent="Mannequin/Mannequin/Skeleton3D" index="5"]
transform = Transform3D(-0.99908, 0.0163398, -0.0396587, 0.0104715, 0.989537, 0.143902, 0.0415951, 0.143354, -0.988797, 0.311274, 146.076, 2.75566)

[node name="NeckArea" parent="Mannequin/Mannequin/Skeleton3D/Neck" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Head" parent="Mannequin/Mannequin/Skeleton3D" index="6"]
transform = Transform3D(-0.995723, 0.00149258, -0.0923743, 0.00208994, 0.999978, -0.00637029, 0.0923627, -0.00653607, -0.995704, 0.355303, 156.742, 1.1281)

[node name="HeadArea" parent="Mannequin/Mannequin/Skeleton3D/Head" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_UpperArm" parent="Mannequin/Mannequin/Skeleton3D" index="7"]
transform = Transform3D(-0.373929, -0.380487, 0.845816, 0.392509, -0.8912, -0.227377, 0.840306, 0.246968, 0.482589, -18.4111, 137.578, 0.963527)

[node name="UpperArmArea" parent="Mannequin/Mannequin/Skeleton3D/L_UpperArm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Forearm" parent="Mannequin/Mannequin/Skeleton3D" index="8"]
transform = Transform3D(0.594771, 0.178572, -0.78381, 0.751444, -0.469918, 0.463151, -0.285621, -0.864459, -0.41368, -28.8382, 113.155, 7.73163)

[node name="ForearmArea" parent="Mannequin/Mannequin/Skeleton3D/L_Forearm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Hand" parent="Mannequin/Mannequin/Skeleton3D" index="9"]
transform = Transform3D(-0.50699, 0.263592, 0.820658, -0.855162, -0.273092, -0.440589, 0.10798, -0.92517, 0.363868, -23.9071, 100.178, -16.14)

[node name="HandArea" parent="Mannequin/Mannequin/Skeleton3D/L_Hand" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_UpperArm" parent="Mannequin/Mannequin/Skeleton3D" index="10"]
transform = Transform3D(-0.769773, 0.228987, -0.595832, -0.192729, -0.973252, -0.125043, -0.608528, 0.0185795, 0.793315, 18.9473, 137.219, 2.83936)

[node name="UpperArmArea" parent="Mannequin/Mannequin/Skeleton3D/R_UpperArm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Forearm" parent="Mannequin/Mannequin/Skeleton3D" index="11"]
transform = Transform3D(0.711311, 0.000762999, -0.702877, 0.234412, -0.943006, 0.236201, -0.662637, -0.332775, -0.670949, 25.2226, 110.547, 3.34853)

[node name="ForearmArea" parent="Mannequin/Mannequin/Skeleton3D/R_Forearm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Hand" parent="Mannequin/Mannequin/Skeleton3D" index="12"]
transform = Transform3D(-0.169362, 0.372806, -0.912323, 0.117625, -0.911433, -0.394278, -0.97851, -0.174088, 0.110511, 25.2437, 84.5069, -5.8409)

[node name="HandArea" parent="Mannequin/Mannequin/Skeleton3D/R_Hand" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Weapons" type="Node3D" parent="Mannequin/Mannequin/Skeleton3D/R_Hand" index="1"]
unique_name_in_owner = true
transform = Transform3D(99.9928, 0, 0, 0, 99.9944, 0, 0, 0, 99.9984, -1.4976, -0.616191, -5.39867e-07)

[node name="Slapper" parent="Mannequin/Mannequin/Skeleton3D/R_Hand/Weapons" instance=ExtResource("7_qvp12")]
visible = false

[node name="Pistol" parent="Mannequin/Mannequin/Skeleton3D/R_Hand/Weapons" instance=ExtResource("8_garcs")]
transform = Transform3D(0.0365914, 0.991839, -0.122134, -0.017772, -0.121551, -0.992426, -0.999172, 0.0384849, 0.0131793, 0.0150402, 0.0725134, 0.024106)

[node name="SMG" parent="Mannequin/Mannequin/Skeleton3D/R_Hand/Weapons" instance=ExtResource("9_r5tpj")]
visible = false

[node name="Rifle" parent="Mannequin/Mannequin/Skeleton3D/R_Hand/Weapons" instance=ExtResource("10_mdymb")]
transform = Transform3D(-4.37114e-08, 0.955618, -0.294608, 0, -0.294607, -0.955619, -1, -4.17714e-08, 1.28777e-08, -0.00265333, 0.095409, 0.0279529)
visible = false

[node name="Shotgun" parent="Mannequin/Mannequin/Skeleton3D/R_Hand/Weapons" instance=ExtResource("11_m32ag")]
visible = false

[node name="Sniper" parent="Mannequin/Mannequin/Skeleton3D/R_Hand/Weapons" instance=ExtResource("12_nmvwi")]
visible = false

[node name="L_Thigh" parent="Mannequin/Mannequin/Skeleton3D" index="13"]
transform = Transform3D(0.997404, -0.0692608, -0.0197091, -0.056524, -0.922585, 0.381631, -0.0446154, -0.379526, -0.924105, -9.12505, 89.3281, 0.0553348)

[node name="ThighArea" parent="Mannequin/Mannequin/Skeleton3D/L_Thigh" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Shin" parent="Mannequin/Mannequin/Skeleton3D" index="14"]
transform = Transform3D(0.998529, -0.0536208, -0.00803157, -0.0539788, -0.997066, -0.0542637, -0.00509834, 0.0546175, -0.998494, -11.937, 51.8717, -15.3532)

[node name="ShinArea" parent="Mannequin/Mannequin/Skeleton3D/L_Shin" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Foot" parent="Mannequin/Mannequin/Skeleton3D" index="15"]
transform = Transform3D(0.977992, -0.207892, 0.0176904, -0.118555, -0.483942, 0.867032, -0.171688, -0.850047, -0.497939, -14.1944, 9.8962, -13.0539)

[node name="FootArea" parent="Mannequin/Mannequin/Skeleton3D/L_Foot" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Thigh" parent="Mannequin/Mannequin/Skeleton3D" index="16"]
transform = Transform3D(0.998168, 0.0602602, -0.0054697, 0.0590408, -0.989763, -0.129935, -0.0132436, 0.129374, -0.991507, 9.12385, 89.3281, 0.055338)

[node name="ThighArea" parent="Mannequin/Mannequin/Skeleton3D/R_Thigh" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Shin" parent="Mannequin/Mannequin/Skeleton3D" index="17"]
transform = Transform3D(0.998401, 0.0419605, 0.0378697, 0.0532641, -0.922649, -0.381944, 0.0189139, 0.38335, -0.923409, 11.5704, 49.1442, 5.30787)

[node name="ShinArea" parent="Mannequin/Mannequin/Skeleton3D/R_Shin" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Foot" parent="Mannequin/Mannequin/Skeleton3D" index="18"]
transform = Transform3D(0.972901, 0.231212, 0.00204985, 0.116253, -0.496796, 0.860046, 0.199871, -0.836501, -0.510213, 13.3369, 10.3016, 21.4465)

[node name="FootArea" parent="Mannequin/Mannequin/Skeleton3D/R_Foot" index="0"]
collision_layer = 8
collision_mask = 1

[node name="AimHelper" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)

[node name="Camera" type="Camera3D" parent="AimHelper"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 0.97237, 0.233445, 0, -0.233445, 0.97237, 0, 0.5, 0.75)
cull_mask = 1048551

[node name="ShootCast" type="RayCast3D" parent="AimHelper"]
unique_name_in_owner = true
visible = false
target_position = Vector3(0, 0, -999)
collision_mask = 13
hit_back_faces = false
collide_with_areas = true

[node name="DmgLbl" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.88315, 0)

[node name="Voice" type="Node3D" parent="."]
script = ExtResource("13_mfhmu")

[node name="TargetTimer" type="Timer" parent="."]
one_shot = true

[node name="ShootTimer" type="Timer" parent="."]
one_shot = true

[node name="Slapped" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("14_m8vig")
bus = &"SFX"

[node name="Footsteps" type="Node3D" parent="."]
script = ExtResource("15_shnoq")

[node name="Footsteps1" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("16_orqae")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[node name="Footsteps2" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("17_bivns")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[node name="Footsteps3" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("18_kqu4m")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[connection signal="timeout" from="ShootTimer" to="." method="target_lost"]

[editable path="Mannequin"]
[editable path="Mannequin/Mannequin/Skeleton3D/R_Hand/Weapons/Pistol"]
[editable path="Mannequin/Mannequin/Skeleton3D/R_Hand/Weapons/Pistol/Mesh"]
[editable path="Mannequin/Mannequin/Skeleton3D/R_Hand/Weapons/SMG"]
[editable path="Mannequin/Mannequin/Skeleton3D/R_Hand/Weapons/SMG/Mesh"]
[editable path="Mannequin/Mannequin/Skeleton3D/R_Hand/Weapons/Rifle"]
[editable path="Mannequin/Mannequin/Skeleton3D/R_Hand/Weapons/Shotgun"]
[editable path="Mannequin/Mannequin/Skeleton3D/R_Hand/Weapons/Sniper"]
