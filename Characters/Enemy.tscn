[gd_scene load_steps=6 format=3 uid="uid://cevbv8x2k7xwv"]

[ext_resource type="PackedScene" uid="uid://1s5qidco641t" path="res://Characters/CharacterBase.tscn" id="1_rf7ub"]
[ext_resource type="Script" path="res://Characters/Enemy.gd" id="2_ojr6m"]
[ext_resource type="PackedScene" uid="uid://cy12nf62sv60i" path="res://Debug/VectorCube.tscn" id="3_3vsup"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_0bpq3"]
albedo_color = Color(0.372549, 0.376471, 0.784314, 1)

[sub_resource type="BoxMesh" id="BoxMesh_m0eni"]
material = SubResource("StandardMaterial3D_0bpq3")
size = Vector3(0.3, 0.3, 0.3)

[node name="Enemy" instance=ExtResource("1_rf7ub")]
script = ExtResource("2_ojr6m")

[node name="NameLabel" type="Label3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.9756, 0)
billboard = 1
text = "Enemy"

[node name="NavAgent" type="NavigationAgent3D" parent="." index="1"]
target_desired_distance = 3.0
debug_enabled = true

[node name="NavTarget" type="Marker3D" parent="." index="2"]
top_level = true
visible = false

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavTarget" index="0"]
mesh = SubResource("BoxMesh_m0eni")

[node name="PlayerCast" type="RayCast3D" parent="." index="4"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)
collision_mask = 3

[node name="VectorCube" parent="AimHelper" index="1" instance=ExtResource("3_3vsup")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
visible = false

[node name="FPCamera" type="Camera3D" parent="AimHelper" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.210124)
cull_mask = 1048567

[node name="Weapons" parent="." index="6"]
transform = Transform3D(-0.220079, -0.163786, -0.961634, -0.962581, 0.19626, 0.186869, 0.158124, 0.966776, -0.20085, 0.175021, 1.37961, -0.271281)

[node name="Skeleton" parent="PuppetBase" index="2"]
bones/1/position = Vector3(1.61993e-09, 0.895015, -0.0641973)
bones/2/rotation = Quaternion(0.010883, 7.44517e-05, 0.000837748, 0.999941)
bones/4/rotation = Quaternion(0.00952615, 7.45816e-05, 0.000730642, 0.999954)
bones/5/rotation = Quaternion(0.0127192, 8.84248e-05, 0.00097852, 0.999919)
bones/7/rotation = Quaternion(0.00973892, 0.881925, 0.270177, 0.386159)
bones/8/rotation = Quaternion(-0.0178025, -0.723412, -0.0173098, 0.68997)
bones/9/rotation = Quaternion(-0.394222, 0.728832, 0.144617, 0.540814)
bones/10/rotation = Quaternion(2.38419e-07, -2.98023e-08, -1.19209e-07, 1)
bones/11/rotation = Quaternion(0.0323005, -0.0150102, -0.0734288, 0.996664)
bones/12/rotation = Quaternion(-5.96047e-08, -2.38419e-07, 2.38419e-07, 1)
bones/14/rotation = Quaternion(0.00319301, 0.00568821, -0.00296402, 0.999974)
bones/15/rotation = Quaternion(-5.96046e-08, 5.96046e-08, 1.78814e-07, 1)
bones/16/rotation = Quaternion(-0.214187, 0.673887, 0.214187, 0.673887)
bones/17/rotation = Quaternion(0.336828, 0.0677648, 0.042584, 0.938159)
bones/18/rotation = Quaternion(-0.0177395, 0.184228, 0.00458947, 0.982713)
bones/20/rotation = Quaternion(-0.136553, 0.949323, 0.251933, 0.129108)
bones/21/rotation = Quaternion(0.244303, 0.394559, -0.237483, 0.853371)
bones/22/rotation = Quaternion(-0.261658, -0.83263, -0.124564, 0.471959)
bones/23/rotation = Quaternion(5.96046e-08, -5.96046e-08, 1.78814e-07, 1)
bones/24/rotation = Quaternion(0.0103593, 0.0228241, 0.06415, 0.997625)
bones/25/rotation = Quaternion(-0.0013089, -0.019876, 0.0051088, 0.999789)
bones/27/rotation = Quaternion(-0.00576911, -0.0135188, -0.0387109, 0.999142)
bones/28/rotation = Quaternion(0.00543884, -0.0381471, 0.00859214, 0.99922)
bones/29/rotation = Quaternion(-0.214187, -0.673887, -0.214187, 0.673887)
bones/30/rotation = Quaternion(-0.34712, 0.489504, -0.55124, 0.579679)
bones/31/rotation = Quaternion(-0.0929818, 0.136922, -0.113451, 0.979661)
bones/33/rotation = Quaternion(-0.139238, 0.0880209, 0.98617, -0.0182703)
bones/34/rotation = Quaternion(-0.00757449, 0.99974, 0.0214778, 0.00133545)
bones/35/rotation = Quaternion(0.0813056, 0.773807, -0.617879, 0.113305)
bones/38/rotation = Quaternion(0.133312, -0.14795, 0.979802, -0.0180865)
bones/39/rotation = Quaternion(0.0363572, 0.993986, 0.103094, -0.00641002)
bones/40/rotation = Quaternion(-0.088314, 0.671296, -0.729729, -0.0951727)
bones/41/rotation = Quaternion(-4.21469e-08, 1, 5.96047e-08, -1.26441e-07)

[node name="Head" parent="PuppetBase/Skeleton" index="1"]
transform = Transform3D(0.999987, -0.00507447, 0.000643289, 0.00510593, 0.997793, -0.0662082, -0.000305898, 0.0662106, 0.997806, -0.000827325, 1.57448, -0.0409201)

[node name="HeadArea" parent="PuppetBase/Skeleton/Head" index="0"]
collision_layer = 8

[node name="Neck" parent="PuppetBase/Skeleton" index="2"]
transform = Transform3D(0.999999, -0.00167378, 0.000167129, 0.00167702, 0.999762, -0.0217646, -0.00013066, 0.0217648, 0.999763, 0.00170204, 1.45586, -0.0243042)

[node name="NeckArea" parent="PuppetBase/Skeleton/Neck" index="0"]
collision_layer = 8

[node name="Chest" parent="PuppetBase/Skeleton" index="3"]
transform = Transform3D(0.999999, -0.00167378, 0.000167129, 0.00167702, 0.999762, -0.0217646, -0.00013066, 0.0217648, 0.999763, 7.13331e-10, 1.13318, -0.0868668)

[node name="ChestArea" parent="PuppetBase/Skeleton/Chest" index="0"]
collision_layer = 8

[node name="Stomach" parent="PuppetBase/Skeleton" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.61993e-09, 0.895015, -0.0641973)

[node name="StomachArea" parent="PuppetBase/Skeleton/Stomach" index="0"]
collision_layer = 8

[node name="R_UpperArm" parent="PuppetBase/Skeleton" index="5"]
transform = Transform3D(0.194893, -0.836452, -0.512215, -0.333762, 0.434506, -0.836545, 0.922291, 0.333994, -0.194494, 0.194529, 1.39514, -0.0340124)

[node name="R_UpperArmArea" parent="PuppetBase/Skeleton/R_UpperArm" index="0"]
collision_layer = 8

[node name="R_Forearm" parent="PuppetBase/Skeleton" index="6"]
transform = Transform3D(0.694373, -0.643276, 0.322556, 0.37586, -0.0580331, -0.924857, 0.613657, 0.763432, 0.201485, 0.229591, 1.24732, -0.177063)

[node name="R_ForearmArea" parent="PuppetBase/Skeleton/R_Forearm" index="0"]
collision_layer = 8

[node name="R_Hand" parent="PuppetBase/Skeleton" index="7"]
transform = Transform3D(-0.220079, -0.163786, -0.961634, -0.962581, 0.19626, 0.186869, 0.158124, 0.966776, -0.20085, 0.175021, 1.37961, -0.324259)

[node name="R_HandArea" parent="PuppetBase/Skeleton/R_Hand" index="0"]
collision_layer = 8

[node name="L_UpperArm" parent="PuppetBase/Skeleton" index="8"]
transform = Transform3D(0.226854, 0.852976, 0.470074, -0.660054, 0.489557, -0.569792, -0.716147, -0.181015, 0.674068, -0.195393, 1.39449, -0.0339615)

[node name="L_UpperArmArea" parent="PuppetBase/Skeleton/L_UpperArm" index="0"]
collision_layer = 8

[node name="L_Forearm" parent="PuppetBase/Skeleton" index="9"]
transform = Transform3D(0.460425, 0.863411, -0.206231, -0.537052, 0.455913, 0.709731, 0.706813, -0.216021, 0.67361, -0.235995, 1.19921, 0.0273682)

[node name="L_ForearmArea" parent="PuppetBase/Skeleton/L_Forearm" index="0"]
collision_layer = 8

[node name="L_Hand" parent="PuppetBase/Skeleton" index="10"]
transform = Transform3D(-0.22299, 0.266793, 0.937602, -0.775125, 0.534738, -0.336507, -0.591149, -0.801796, 0.0875564, -0.23822, 0.997943, -0.0130491)

[node name="L_HandArea" parent="PuppetBase/Skeleton/L_Hand" index="0"]
collision_layer = 8

[node name="R_Thigh" parent="PuppetBase/Skeleton" index="11"]
transform = Transform3D(-0.963801, -0.00400486, 0.266591, -0.0748897, -0.955567, -0.285102, 0.255888, -0.294747, 0.920677, 0.0851499, 0.877526, -0.0593682)

[node name="R_ThighArea" parent="PuppetBase/Skeleton/R_Thigh" index="0"]
collision_layer = 8

[node name="R_Shin" parent="PuppetBase/Skeleton" index="12"]
transform = Transform3D(0.966285, -0.0203304, -0.256668, 0.0011126, -0.996539, 0.0831234, -0.25747, -0.0806065, -0.962918, 0.110284, 0.487449, -0.213457)

[node name="R_ShinArea" parent="PuppetBase/Skeleton/R_Shin" index="0"]
collision_layer = 8

[node name="R_Foot" parent="PuppetBase/Skeleton" index="13"]
transform = Transform3D(-1, -1.49012e-07, -3.33413e-07, -3.31551e-07, 4.54485e-07, 1, -1.63913e-07, 1, -4.84288e-07, 0.11946, 0.113839, -0.180125)

[node name="R_FootArea" parent="PuppetBase/Skeleton/R_Foot" index="0"]
collision_layer = 8

[node name="L_Thigh" parent="PuppetBase/Skeleton" index="14"]
transform = Transform3D(-0.960558, 0.0115234, -0.277841, -0.0605469, -0.983837, 0.168519, -0.271409, 0.178695, 0.94573, -0.0851499, 0.877526, -0.0593682)

[node name="L_ThighArea" parent="PuppetBase/Skeleton/L_Thigh" index="0"]
collision_layer = 8

[node name="L_Shin" parent="PuppetBase/Skeleton" index="15"]
transform = Transform3D(0.961103, 0.0141881, 0.275827, 0.0748787, -0.974662, -0.210776, 0.265847, 0.223231, -0.937813, -0.106759, 0.4601, -0.0166643)

[node name="L_ShinArea" parent="PuppetBase/Skeleton/L_Shin" index="0"]
collision_layer = 8

[node name="L_Foot" parent="PuppetBase/Skeleton" index="16"]
transform = Transform3D(-1, 8.9407e-08, -1.30385e-07, -1.15484e-07, -2.98023e-07, 1, 2.08616e-07, 1, 3.27826e-07, -0.11946, 0.113834, 0.127275)

[node name="L_FootArea" parent="PuppetBase/Skeleton/L_Foot" index="0"]
collision_layer = 8

[node name="PlayerTimer" type="Timer" parent="." index="9"]
wait_time = 3.0
one_shot = true

[node name="StuckTimer" type="Timer" parent="." index="10"]
wait_time = 3.0
one_shot = true

[node name="ShootTimer" type="Timer" parent="." index="11"]
one_shot = true

[connection signal="timeout" from="PlayerTimer" to="." method="_player_lost"]
[connection signal="timeout" from="StuckTimer" to="." method="_stuck"]

[editable path="PuppetBase"]
