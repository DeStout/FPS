[gd_scene load_steps=6 format=3 uid="uid://cevbv8x2k7xwv"]

[ext_resource type="PackedScene" uid="uid://1s5qidco641t" path="res://Characters/CharacterBase.tscn" id="1_rf7ub"]
[ext_resource type="Script" path="res://Characters/Enemy.gd" id="2_ojr6m"]
[ext_resource type="PackedScene" uid="uid://cy12nf62sv60i" path="res://Debug/VectorCube.tscn" id="3_3vsup"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_0bpq3"]
albedo_color = Color(0.372549, 0.376471, 0.784314, 1)

[sub_resource type="BoxMesh" id="BoxMesh_m0eni"]
material = SubResource("StandardMaterial3D_0bpq3")
size = Vector3(0.3, 0.3, 0.3)

[node name="Enemy" instance=ExtResource("1_rf7ub")]
script = ExtResource("2_ojr6m")

[node name="NameLabel" type="Label3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.9756, 0)
billboard = 1
text = "Enemy"

[node name="NavAgent" type="NavigationAgent3D" parent="." index="1"]
target_desired_distance = 3.0
debug_enabled = true

[node name="NavTarget" type="Marker3D" parent="." index="2"]
top_level = true
visible = false

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavTarget" index="0"]
mesh = SubResource("BoxMesh_m0eni")

[node name="PlayerCast" type="RayCast3D" parent="." index="4"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)
collision_mask = 3

[node name="VectorCube" parent="AimHelper" index="1" instance=ExtResource("3_3vsup")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
visible = false

[node name="FPCamera" type="Camera3D" parent="AimHelper" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.210124)
cull_mask = 1048567

[node name="Weapons" parent="." index="6"]
transform = Transform3D(-0.216477, -0.172708, -0.96089, -0.967375, 0.170636, 0.187268, 0.13162, 0.97008, -0.204013, 0.173483, 1.36661, -0.270165)

[node name="Skeleton" parent="PuppetBase" index="2"]
bones/1/position = Vector3(1.61994e-09, 0.889626, -0.0641973)
bones/2/rotation = Quaternion(0.00720001, 4.74071e-05, 0.000554543, 0.999974)
bones/4/rotation = Quaternion(0.00632858, 4.25177e-05, 0.000487061, 0.99998)
bones/5/rotation = Quaternion(0.00839499, 5.46141e-05, 0.000646355, 0.999965)
bones/7/rotation = Quaternion(0.0125617, 0.883844, 0.272742, 0.379835)
bones/8/rotation = Quaternion(-0.0165216, -0.72228, -0.0160797, 0.691216)
bones/9/rotation = Quaternion(-0.398591, 0.726123, 0.136338, 0.5434)
bones/10/rotation = Quaternion(2.38419e-07, -2.98023e-08, -1.19209e-07, 1)
bones/11/rotation = Quaternion(0.0314937, -0.0170484, -0.0726453, 0.996715)
bones/12/rotation = Quaternion(-5.96047e-08, -2.38419e-07, 2.38419e-07, 1)
bones/14/rotation = Quaternion(0.00214088, 0.00382241, -0.00199472, 0.999988)
bones/15/rotation = Quaternion(-5.96046e-08, 5.96046e-08, 1.78814e-07, 1)
bones/16/rotation = Quaternion(-0.214187, 0.673887, 0.214187, 0.673887)
bones/17/rotation = Quaternion(0.332264, 0.0594762, 0.0441139, 0.940275)
bones/18/rotation = Quaternion(-0.0177395, 0.184228, 0.00458947, 0.982713)
bones/20/rotation = Quaternion(-0.133762, 0.949558, 0.258954, 0.115712)
bones/21/rotation = Quaternion(0.247979, 0.388412, -0.241057, 0.854128)
bones/22/rotation = Quaternion(-0.23798, -0.838183, -0.133997, 0.47208)
bones/23/rotation = Quaternion(5.96046e-08, -5.96046e-08, 1.78814e-07, 1)
bones/24/rotation = Quaternion(0.0116092, 0.0231696, 0.07207, 0.997063)
bones/25/rotation = Quaternion(-0.000904292, -0.0131134, 0.00340143, 0.999908)
bones/27/rotation = Quaternion(-0.00658522, -0.0137074, -0.0431665, 0.998952)
bones/28/rotation = Quaternion(0.00344862, -0.0251688, 0.00577075, 0.999661)
bones/29/rotation = Quaternion(-0.214187, -0.673887, -0.214187, 0.673887)
bones/30/rotation = Quaternion(-0.344817, 0.496746, -0.55936, 0.566976)
bones/31/rotation = Quaternion(-0.0929818, 0.136922, -0.113451, 0.979661)
bones/33/rotation = Quaternion(-0.140244, 0.0704766, 0.987498, -0.0145918)
bones/34/rotation = Quaternion(-0.0208212, 0.998032, 0.0590402, 0.00367095)
bones/35/rotation = Quaternion(0.0771821, 0.787164, -0.601034, 0.114779)
bones/38/rotation = Quaternion(0.133398, -0.160928, 0.977684, -0.0210036)
bones/39/rotation = Quaternion(0.0454073, 0.990604, 0.128757, -0.00800545)
bones/40/rotation = Quaternion(-0.0857161, 0.681366, -0.720459, -0.0966058)
bones/41/rotation = Quaternion(-4.21469e-08, 1, 5.96047e-08, -1.26441e-07)

[node name="Head" parent="PuppetBase/Skeleton" index="1"]
transform = Transform3D(0.999994, -0.00336851, 0.000362994, 0.00338118, 0.999033, -0.043833, -0.000214991, 0.0438339, 0.999039, -0.000548222, 1.56933, -0.044572)

[node name="HeadArea" parent="PuppetBase/Skeleton/Head" index="0"]
collision_layer = 8

[node name="Neck" parent="PuppetBase/Skeleton" index="2"]
transform = Transform3D(0.999999, -0.00110837, 0.000102797, 0.00110974, 0.999896, -0.0143996, -8.68263e-05, 0.0143997, 0.999896, 0.00188163, 1.45093, -0.0266827)

[node name="NeckArea" parent="PuppetBase/Skeleton/Neck" index="0"]
collision_layer = 8

[node name="Chest" parent="PuppetBase/Skeleton" index="3"]
transform = Transform3D(0.999999, -0.00110837, 0.000102797, 0.00110974, 0.999896, -0.0143996, -8.68263e-05, 0.0143997, 0.999896, 7.13332e-10, 1.12779, -0.0868668)

[node name="ChestArea" parent="PuppetBase/Skeleton/Chest" index="0"]
collision_layer = 8

[node name="Stomach" parent="PuppetBase/Skeleton" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.61994e-09, 0.889626, -0.0641973)

[node name="StomachArea" parent="PuppetBase/Skeleton/Stomach" index="0"]
collision_layer = 8

[node name="R_UpperArm" parent="PuppetBase/Skeleton" index="5"]
transform = Transform3D(0.194519, -0.830579, -0.521825, -0.30228, 0.455338, -0.837433, 0.933161, 0.320634, -0.162496, 0.194675, 1.39002, -0.0359325)

[node name="R_UpperArmArea" parent="PuppetBase/Skeleton/R_UpperArm" index="0"]
collision_layer = 8

[node name="R_Forearm" parent="PuppetBase/Skeleton" index="6"]
transform = Transform3D(0.703863, -0.637665, 0.312987, 0.380029, -0.0342154, -0.924341, 0.600129, 0.769554, 0.218248, 0.227651, 1.23675, -0.173645)

[node name="R_ForearmArea" parent="PuppetBase/Skeleton/R_Forearm" index="0"]
collision_layer = 8

[node name="R_Hand" parent="PuppetBase/Skeleton" index="7"]
transform = Transform3D(-0.216477, -0.172708, -0.96089, -0.967375, 0.170636, 0.187268, 0.13162, 0.97008, -0.204013, 0.173483, 1.36661, -0.323144)

[node name="R_HandArea" parent="PuppetBase/Skeleton/R_Hand" index="0"]
collision_layer = 8

[node name="L_UpperArm" parent="PuppetBase/Skeleton" index="8"]
transform = Transform3D(0.230062, 0.850343, 0.473273, -0.654013, 0.495222, -0.571859, -0.720652, -0.177964, 0.670067, -0.195247, 1.38959, -0.0358987)

[node name="L_UpperArmArea" parent="PuppetBase/Skeleton/L_UpperArm" index="0"]
collision_layer = 8

[node name="L_Forearm" parent="PuppetBase/Skeleton" index="9"]
transform = Transform3D(0.46411, 0.860228, -0.21121, -0.541788, 0.464327, 0.700619, 0.700762, -0.210733, 0.68156, -0.234807, 1.19369, 0.0241243)

[node name="L_ForearmArea" parent="PuppetBase/Skeleton/L_Forearm" index="0"]
collision_layer = 8

[node name="L_Hand" parent="PuppetBase/Skeleton" index="10"]
transform = Transform3D(-0.223403, 0.267166, 0.937397, -0.779343, 0.528638, -0.336401, -0.585419, -0.805707, 0.090115, -0.235628, 0.992887, -0.0185657)

[node name="L_HandArea" parent="PuppetBase/Skeleton/L_Hand" index="0"]
collision_layer = 8

[node name="R_Thigh" parent="PuppetBase/Skeleton" index="11"]
transform = Transform3D(-0.963527, -0.00186515, 0.267603, -0.0840048, -0.947322, -0.309069, 0.254083, -0.320277, 0.912614, 0.0851499, 0.872137, -0.0593682)

[node name="R_ThighArea" parent="PuppetBase/Skeleton/R_Thigh" index="0"]
collision_layer = 8

[node name="R_Shin" parent="PuppetBase/Skeleton" index="12"]
transform = Transform3D(0.96664, -0.0223927, -0.255157, -0.00813766, -0.998353, 0.0567872, -0.256009, -0.0528164, -0.96523, 0.111145, 0.486395, -0.223875)

[node name="R_ShinArea" parent="PuppetBase/Skeleton/R_Shin" index="0"]
collision_layer = 8

[node name="R_Foot" parent="PuppetBase/Skeleton" index="13"]
transform = Transform3D(-1, -1.04308e-07, -2.24449e-07, -2.23517e-07, 4.17233e-07, 1, -1.3411e-07, 1, -3.42727e-07, 0.119459, 0.113841, -0.180125)

[node name="R_FootArea" parent="PuppetBase/Skeleton/R_Foot" index="0"]
collision_layer = 8

[node name="L_Thigh" parent="PuppetBase/Skeleton" index="14"]
transform = Transform3D(-0.960237, 0.00905098, -0.279038, -0.0485867, -0.98964, 0.135098, -0.274925, 0.143284, 0.950729, -0.0851499, 0.872137, -0.0593682)

[node name="L_ThighArea" parent="PuppetBase/Skeleton/L_Thigh" index="0"]
collision_layer = 8

[node name="L_Shin" parent="PuppetBase/Skeleton" index="15"]
transform = Transform3D(0.961737, 0.0164626, 0.273478, 0.087922, -0.963942, -0.251168, 0.259482, 0.265602, -0.928506, -0.107753, 0.453497, -0.0317093)

[node name="L_ShinArea" parent="PuppetBase/Skeleton/L_Shin" index="0"]
collision_layer = 8

[node name="L_Foot" parent="PuppetBase/Skeleton" index="16"]
transform = Transform3D(-1, -1.49012e-07, -1.71363e-07, -1.56462e-07, -2.98023e-08, 1, -8.9407e-08, 1, 5.96046e-08, -0.11946, 0.113839, 0.127273)

[node name="L_FootArea" parent="PuppetBase/Skeleton/L_Foot" index="0"]
collision_layer = 8

[node name="PlayerTimer" type="Timer" parent="." index="9"]
wait_time = 3.0
one_shot = true

[node name="StuckTimer" type="Timer" parent="." index="10"]
wait_time = 3.0
one_shot = true

[node name="ShootTimer" type="Timer" parent="." index="11"]
one_shot = true

[connection signal="timeout" from="PlayerTimer" to="." method="_player_lost"]
[connection signal="timeout" from="StuckTimer" to="." method="_stuck"]

[editable path="PuppetBase"]
