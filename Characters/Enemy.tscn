[gd_scene load_steps=6 format=3 uid="uid://2iouko1meib4"]

[ext_resource type="PackedScene" uid="uid://1s5qidco641t" path="res://Characters/CharacterBase.tscn" id="1_rf7ub"]
[ext_resource type="Script" path="res://Characters/Enemy.gd" id="2_ojr6m"]
[ext_resource type="PackedScene" uid="uid://cy12nf62sv60i" path="res://Debug/VectorCube.tscn" id="3_3vsup"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_0bpq3"]
albedo_color = Color(0.372549, 0.376471, 0.784314, 1)

[sub_resource type="BoxMesh" id="BoxMesh_m0eni"]
material = SubResource("StandardMaterial3D_0bpq3")
size = Vector3(0.3, 0.3, 0.3)

[node name="Enemy" instance=ExtResource("1_rf7ub")]
script = ExtResource("2_ojr6m")

[node name="NameLabel" type="Label3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.9756, 0)
billboard = 1
text = "Enemy"

[node name="NavAgent" type="NavigationAgent3D" parent="." index="1"]
target_desired_distance = 3.0

[node name="NavTarget" type="Marker3D" parent="." index="2"]
top_level = true
visible = false

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavTarget" index="0"]
mesh = SubResource("BoxMesh_m0eni")

[node name="PlayerCast" type="RayCast3D" parent="." index="4"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)
target_position = Vector3(0, 0, -1)
collision_mask = 3
debug_shape_custom_color = Color(0, 0.54902, 0.282353, 1)

[node name="Weapons" parent="." index="5"]
transform = Transform3D(-0.219277, -0.166029, -0.961432, -0.963767, 0.190272, 0.186951, 0.151894, 0.96759, -0.201736, 0.174658, 1.37655, -0.271018)

[node name="VectorCube" parent="AimHelper" index="0" instance=ExtResource("3_3vsup")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
visible = false

[node name="ShootCast" parent="AimHelper" index="2"]
visible = false
collision_mask = 13

[node name="Skeleton3D" parent="Puppet" index="2"]
bones/1/position = Vector3(-1.41359e-09, 0.881088, -0.0641973)
bones/2/rotation = Quaternion(-0.133275, 0.0007768, 0.00322367, 0.991074)
bones/4/rotation = Quaternion(0.0922403, 0.0133013, 0.018698, 0.995472)
bones/5/rotation = Quaternion(-0.0103642, -3.08167e-05, -0.000120016, 0.999946)
bones/7/rotation = Quaternion(-0.173245, 0.244591, -0.499437, 0.812849)
bones/8/rotation = Quaternion(0.261354, 0.0351886, -0.0508868, 0.963258)
bones/9/rotation = Quaternion(-0.0322739, -0.332899, -0.00441335, 0.9424)
bones/11/rotation = Quaternion(-0.139517, -0.0289909, 0.152178, 0.978027)
bones/14/rotation = Quaternion(0.0616653, -0.1701, -0.0859361, 0.979734)
bones/17/rotation = Quaternion(-0.317515, -0.0325858, 0.25172, 0.913652)
bones/20/rotation = Quaternion(0.167944, 0.0926787, 0.525873, 0.828651)
bones/21/rotation = Quaternion(0.710899, -0.0251683, 0.138421, 0.689078)
bones/22/rotation = Quaternion(0.189012, 0.221599, -0.0428791, 0.955683)
bones/24/rotation = Quaternion(-0.147629, 0.0489458, -0.151826, 0.976094)
bones/25/rotation = Quaternion(-0.0715183, 0.00549158, 0.0370984, 0.996734)
bones/27/rotation = Quaternion(0.104209, 0.156192, 0.114133, 0.97556)
bones/28/rotation = Quaternion(0.0718572, -0.144546, -0.0473965, 0.985747)
bones/30/rotation = Quaternion(-0.54464, -0.394587, 0.59819, 0.435703)
bones/33/rotation = Quaternion(-0.577642, 0.198253, -0.194091, 0.767694)
bones/34/rotation = Quaternion(-0.127773, 0.00380916, 0.19576, 0.972285)
bones/35/rotation = Quaternion(0.278907, -0.126953, -0.655797, 0.689945)
bones/38/rotation = Quaternion(-0.515383, -0.0416302, 0.351953, 0.780241)
bones/39/rotation = Quaternion(-0.160999, -0.00374391, -0.246665, 0.955626)
bones/40/rotation = Quaternion(0.232703, 0.125696, 0.537153, 0.800947)

[node name="Head" parent="Puppet/Skeleton3D" index="1"]
transform = Transform3D(-1, -0.000629256, 0.000135642, -0.000643579, 0.97314, -0.230212, 1.28654e-05, -0.230212, -0.97314, -0.000103174, 1.56109, -0.0503784)

[node name="HeadArea" parent="Puppet/Skeleton3D/Head" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Neck" parent="Puppet/Skeleton3D" index="2"]
transform = Transform3D(-1, -0.000386929, 8.4538e-05, -0.00039577, 0.96816, -0.250334, 1.50166e-05, -0.250334, -0.96816, -7.83382e-05, 1.49895, -0.0343105)

[node name="NeckArea" parent="Puppet/Skeleton3D/Neck" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Chest" parent="Puppet/Skeleton3D" index="3"]
transform = Transform3D(-0.999978, 0.00659693, -0.000680839, 0.00638225, 0.985146, 0.171599, 0.00180276, 0.171591, -0.985167, -2.32019e-09, 1.11926, -0.0868667)

[node name="ChestArea" parent="Puppet/Skeleton3D/Chest" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Stomach" parent="Puppet/Skeleton3D" index="4"]
transform = Transform3D(-1, -3.78941e-09, -3.89234e-07, 3.31093e-08, 0.995501, -0.0947544, 3.87842e-07, -0.0947544, -0.995501, -1.41359e-09, 0.881088, -0.0641973)

[node name="StomachArea" parent="Puppet/Skeleton3D/Stomach" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_UpperArm" parent="Puppet/Skeleton3D" index="5"]
transform = Transform3D(0.989297, 0.142594, -0.030971, 0.130894, -0.773404, 0.620253, 0.0644914, -0.617668, -0.78379, 0.194907, 1.38189, -0.0389864)

[node name="R_UpperArmArea" parent="Puppet/Skeleton3D/R_UpperArm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Forearm" parent="Puppet/Skeleton3D" index="6"]
transform = Transform3D(0.965062, -0.261251, 0.0200609, 0.149433, 0.61166, 0.77688, -0.215231, -0.74674, 0.629329, 0.224662, 1.2205, -0.167876)

[node name="R_ForearmArea" parent="Puppet/Skeleton3D/R_Forearm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Hand" parent="Puppet/Skeleton3D" index="7"]
transform = Transform3D(0.857437, -0.0748205, 0.50912, -0.20633, 0.856372, 0.473345, -0.471412, -0.51091, 0.718847, 0.171029, 1.34607, -0.321178)

[node name="R_HandArea" parent="Puppet/Skeleton3D/R_Hand" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_UpperArm" parent="Puppet/Skeleton3D" index="8"]
transform = Transform3D(0.979029, -0.180874, 0.0937442, -0.146124, -0.944096, -0.295519, 0.141955, 0.275623, -0.950726, -0.195015, 1.38181, -0.0389802)

[node name="L_UpperArmArea" parent="Puppet/Skeleton3D/L_UpperArm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Forearm" parent="Puppet/Skeleton3D" index="9"]
transform = Transform3D(0.97709, 0.00562273, 0.212752, -0.0419223, -0.974981, 0.218301, 0.208657, -0.222218, -0.952408, -0.232758, 1.1848, 0.0185346)

[node name="L_ForearmArea" parent="Puppet/Skeleton3D/L_Forearm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Hand" parent="Puppet/Skeleton3D" index="10"]
transform = Transform3D(0.894112, 0.0224176, -0.447281, 0.0915653, -0.986799, 0.13358, -0.438382, -0.160391, -0.884362, -0.231604, 0.984642, -0.0270853)

[node name="L_HandArea" parent="Puppet/Skeleton3D/L_Hand" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Thigh" parent="Puppet/Skeleton3D" index="11"]
transform = Transform3D(0.489458, 0.064784, 0.869617, -0.343243, -0.902422, 0.260419, 0.801633, -0.425954, -0.419461, 0.0851499, 0.863599, -0.0593682)

[node name="R_ThighArea" parent="Puppet/Skeleton3D/R_Thigh" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Shin" parent="Puppet/Skeleton3D" index="12"]
transform = Transform3D(0.474712, 0.0188979, 0.879938, 0.145432, -0.98771, -0.0572459, 0.868042, 0.155147, -0.471627, 0.11237, 0.484437, -0.238337)

[node name="R_ShinArea" parent="Puppet/Skeleton3D/R_Shin" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Foot" parent="Puppet/Skeleton3D" index="13"]
transform = Transform3D(0.245939, 0.0720782, 0.966602, -0.853541, -0.456466, 0.25121, 0.459327, -0.886817, -0.0507409, 0.11946, 0.113841, -0.180125)

[node name="R_FootArea" parent="Puppet/Skeleton3D/R_Foot" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Thigh" parent="Puppet/Skeleton3D" index="14"]
transform = Transform3D(0.499514, -0.056851, -0.864439, -0.0472037, -0.998148, 0.038368, -0.865019, 0.0216393, -0.501272, -0.0851499, 0.863599, -0.0593682)

[node name="L_ThighArea" parent="Puppet/Skeleton3D/L_Thigh" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Shin" parent="Puppet/Skeleton3D" index="15"]
transform = Transform3D(0.489276, -0.0277804, -0.871687, -0.424781, -0.880515, -0.210367, -0.761689, 0.473203, -0.442615, -0.109036, 0.444217, -0.0502763)

[node name="L_ShinArea" parent="Puppet/Skeleton3D/L_Shin" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Foot" parent="Puppet/Skeleton3D" index="16"]
transform = Transform3D(0.245938, -0.0720762, -0.966602, 0.853542, -0.456465, 0.251208, -0.459326, -0.886817, -0.0507419, -0.11946, 0.113841, 0.127273)

[node name="L_FootArea" parent="Puppet/Skeleton3D/L_Foot" index="0"]
collision_layer = 8
collision_mask = 1

[node name="PlayerTimer" type="Timer" parent="." index="9"]
wait_time = 3.0
one_shot = true

[node name="StuckTimer" type="Timer" parent="." index="10"]
wait_time = 3.0
one_shot = true

[node name="ShootTimer" type="Timer" parent="." index="11"]
one_shot = true

[connection signal="timeout" from="PlayerTimer" to="." method="_player_lost"]
[connection signal="timeout" from="StuckTimer" to="." method="_stuck"]

[editable path="Weapons/Pistol"]
[editable path="Weapons/Pistol/Mesh"]
[editable path="Weapons/Rifle"]
[editable path="Weapons/Shotgun"]
[editable path="Puppet"]
