[gd_scene load_steps=7 format=3 uid="uid://cevbv8x2k7xwv"]

[ext_resource type="PackedScene" uid="uid://1s5qidco641t" path="res://Characters/CharacterBase.tscn" id="1_rf7ub"]
[ext_resource type="Script" path="res://Characters/Enemy.gd" id="2_n324u"]
[ext_resource type="Script" path="res://Characters/DecisionTree.gd" id="3_0gdh0"]
[ext_resource type="PackedScene" uid="uid://cy12nf62sv60i" path="res://Debug/VectorCube.tscn" id="3_3vsup"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_0bpq3"]
albedo_color = Color(0.372549, 0.376471, 0.784314, 1)

[sub_resource type="BoxMesh" id="BoxMesh_m0eni"]
material = SubResource("StandardMaterial3D_0bpq3")
size = Vector3(0.3, 0.3, 0.3)

[node name="Enemy" instance=ExtResource("1_rf7ub")]
script = ExtResource("2_n324u")

[node name="NameLabel" type="Label3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.9756, 0)
billboard = 1
text = "Enemy"

[node name="NavAgent" type="NavigationAgent3D" parent="." index="1"]
target_desired_distance = 3.0

[node name="DecisionTree" type="Node" parent="." index="2"]
script = ExtResource("3_0gdh0")

[node name="VectorCube" parent="AimHelper" index="1" instance=ExtResource("3_3vsup")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
visible = false

[node name="FPCamera" type="Camera3D" parent="AimHelper" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.210124)
cull_mask = 1048567

[node name="Weapons" parent="." index="5"]
transform = Transform3D(-0.249488, -0.307318, -0.91832, -0.439705, 0.880864, -0.175324, 0.862795, 0.360048, -0.354895, 0.059125, 1.49559, -0.389467)

[node name="AnimationTree" parent="PuppetBase" index="1"]
parameters/Idle/UpperIdle/blend_position = Vector2(-1, -1)

[node name="Skeleton" parent="PuppetBase" index="2"]
bones/1/position = Vector3(1.61994e-09, 0.889692, -0.0641973)
bones/2/rotation = Quaternion(-0.0632326, 0.00139609, -0.00189722, 0.997996)
bones/4/rotation = Quaternion(0.0200018, 3.04826e-07, 2.59886e-07, 0.9998)
bones/5/rotation = Quaternion(0.0116761, 4.17256e-07, 3.35238e-07, 0.999932)
bones/7/rotation = Quaternion(0.528474, 0.662455, 0.204968, -0.489752)
bones/8/rotation = Quaternion(-0.108018, -0.793071, -0.105002, 0.590208)
bones/9/rotation = Quaternion(-0.475738, 0.802267, -0.127385, 0.337365)
bones/11/rotation = Quaternion(-0.0966272, -0.281682, -0.154316, 0.942075)
bones/12/rotation = Quaternion(-0.140047, -0.543054, 0.0540662, 0.82617)
bones/14/rotation = Quaternion(-0.17066, -0.318941, -0.0235048, 0.931987)
bones/15/rotation = Quaternion(-0.289092, -0.459995, 0.0169906, 0.83937)
bones/17/rotation = Quaternion(0.479758, 0.118375, 0.202798, 0.845395)
bones/18/rotation = Quaternion(-0.0358341, -0.102954, 0.0733966, 0.991327)
bones/20/rotation = Quaternion(-0.403672, 0.672366, 0.339681, 0.51922)
bones/21/rotation = Quaternion(-0.0558806, 0.755474, 0.0543207, 0.650527)
bones/22/rotation = Quaternion(-0.325342, -0.713882, 0.205486, 0.585064)
bones/24/rotation = Quaternion(-0.192525, 0.290313, 0.0472984, 0.936171)
bones/25/rotation = Quaternion(-0.282438, 0.515468, 0.134341, 0.797793)
bones/27/rotation = Quaternion(-0.432709, 0.524002, -0.0954245, 0.727378)
bones/28/rotation = Quaternion(-0.402798, 0.605453, -0.129943, 0.674015)
bones/30/rotation = Quaternion(-0.537937, 0.241139, -0.479164, 0.65029)
bones/31/rotation = Quaternion(-0.0714522, 0.0195048, -0.448426, 0.890746)
bones/33/rotation = Quaternion(-0.140233, 0.0706734, 0.987485, -0.0146334)
bones/34/rotation = Quaternion(-0.0206721, 0.99806, 0.0586176, 0.00364467)
bones/35/rotation = Quaternion(0.077229, 0.787015, -0.601226, 0.114763)
bones/38/rotation = Quaternion(0.133398, -0.160775, 0.97771, -0.0209692)
bones/39/rotation = Quaternion(0.0453009, 0.990648, 0.128455, -0.00798669)
bones/40/rotation = Quaternion(-0.0857469, 0.681248, -0.720569, -0.0965891)

[node name="Head" parent="PuppetBase/Skeleton" index="1"]
transform = Transform3D(0.999989, 0.00379351, 0.00279334, -0.00396233, 0.997997, 0.0631435, -0.0025482, -0.0631539, 0.998001, 0.00171144, 1.57157, -0.105378)

[node name="HeadArea" parent="PuppetBase/Skeleton/Head" index="0"]
collision_layer = 8

[node name="Neck" parent="PuppetBase/Skeleton" index="2"]
transform = Transform3D(0.999989, 0.00361027, 0.00302652, -0.00396339, 0.991996, 0.126206, -0.00254666, -0.126217, 0.991999, 0.00357262, 1.45623, -0.0726813)

[node name="NeckArea" parent="PuppetBase/Skeleton/Neck" index="0"]
collision_layer = 8

[node name="Chest" parent="PuppetBase/Skeleton" index="3"]
transform = Transform3D(0.999989, 0.00361027, 0.00302652, -0.00396339, 0.991996, 0.126206, -0.00254666, -0.126217, 0.991999, 7.13332e-10, 1.12786, -0.0868668)

[node name="ChestArea" parent="PuppetBase/Skeleton/Chest" index="0"]
collision_layer = 8

[node name="Stomach" parent="PuppetBase/Skeleton" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.61994e-09, 0.889692, -0.0641973)

[node name="StomachArea" parent="PuppetBase/Skeleton/Stomach" index="0"]
collision_layer = 8

[node name="R_UpperArm" parent="PuppetBase/Skeleton" index="5"]
transform = Transform3D(0.186987, -0.44048, -0.878073, -0.948394, 0.152074, -0.278249, 0.256095, 0.884789, -0.389313, 0.19605, 1.39366, -0.0737274)

[node name="R_UpperArmArea" parent="PuppetBase/Skeleton/R_UpperArm" index="0"]
collision_layer = 8

[node name="R_Forearm" parent="PuppetBase/Skeleton" index="6"]
transform = Transform3D(0.846902, -0.472362, 0.244194, 0.412868, 0.294721, -0.861788, 0.335107, 0.83067, 0.444624, 0.126896, 1.40687, -0.270164)

[node name="R_ForearmArea" parent="PuppetBase/Skeleton/R_Forearm" index="0"]
collision_layer = 8

[node name="R_Hand" parent="PuppetBase/Skeleton" index="7"]
transform = Transform3D(-0.249488, -0.307318, -0.91832, -0.439705, 0.880864, -0.175324, 0.862795, 0.360048, -0.354895, 0.059125, 1.49559, -0.442446)

[node name="R_HandArea" parent="PuppetBase/Skeleton/R_Hand" index="0"]
collision_layer = 8

[node name="L_UpperArm" parent="PuppetBase/Skeleton" index="8"]
transform = Transform3D(0.502647, 0.359242, 0.786315, 0.861443, -0.131819, -0.490448, -0.072538, 0.923888, -0.375725, -0.193868, 1.3952, -0.0727344)

[node name="L_UpperArmArea" parent="PuppetBase/Skeleton/L_UpperArm" index="0"]
collision_layer = 8

[node name="L_Forearm" parent="PuppetBase/Skeleton" index="9"]
transform = Transform3D(0.630243, 0.522058, -0.574673, -0.717687, 0.10938, -0.687721, -0.296173, 0.845867, 0.44361, -0.101568, 1.41361, -0.258976)

[node name="L_ForearmArea" parent="PuppetBase/Skeleton/L_Forearm" index="0"]
collision_layer = 8

[node name="L_Hand" parent="PuppetBase/Skeleton" index="10"]
transform = Transform3D(-0.403451, 0.143811, 0.903629, 0.42548, 0.903791, 0.0461307, -0.810058, 0.403088, -0.425824, 0.00102678, 1.46463, -0.429321)

[node name="L_HandArea" parent="PuppetBase/Skeleton/L_Hand" index="0"]
collision_layer = 8

[node name="R_Thigh" parent="PuppetBase/Skeleton" index="11"]
transform = Transform3D(-0.963531, -0.00189041, 0.267591, -0.0838975, -0.947424, -0.308788, 0.254106, -0.319977, 0.912713, 0.0851499, 0.872203, -0.0593682)

[node name="R_ThighArea" parent="PuppetBase/Skeleton/R_Thigh" index="0"]
collision_layer = 8

[node name="R_Shin" parent="PuppetBase/Skeleton" index="12"]
transform = Transform3D(0.966636, -0.0223683, -0.255175, -0.0080291, -0.998337, 0.0570973, -0.256028, -0.0531434, -0.965208, 0.111134, 0.486408, -0.223753)

[node name="R_ShinArea" parent="PuppetBase/Skeleton/R_Shin" index="0"]
collision_layer = 8

[node name="R_Foot" parent="PuppetBase/Skeleton" index="13"]
transform = Transform3D(-1, -1.3411e-07, -2.71015e-07, -2.93367e-07, 6.63102e-07, 1, -7.45058e-08, 1, -5.32717e-07, 0.11946, 0.113839, -0.180125)

[node name="R_FootArea" parent="PuppetBase/Skeleton/R_Foot" index="0"]
collision_layer = 8

[node name="L_Thigh" parent="PuppetBase/Skeleton" index="14"]
transform = Transform3D(-0.960241, 0.00907896, -0.279025, -0.048722, -0.989582, 0.135474, -0.274888, 0.143682, 0.95068, -0.0851499, 0.872203, -0.0593682)

[node name="L_ThighArea" parent="PuppetBase/Skeleton/L_Thigh" index="0"]
collision_layer = 8

[node name="L_Shin" parent="PuppetBase/Skeleton" index="15"]
transform = Transform3D(0.96173, 0.0164365, 0.273505, 0.0877765, -0.964074, -0.250713, 0.259558, 0.265126, -0.928622, -0.107742, 0.453574, -0.0315403)

[node name="L_ShinArea" parent="PuppetBase/Skeleton/L_Shin" index="0"]
collision_layer = 8

[node name="L_Foot" parent="PuppetBase/Skeleton" index="16"]
transform = Transform3D(-1, -2.98023e-08, 0, 0, -1.49012e-07, 1, -5.96046e-08, 1, 1.63913e-07, -0.11946, 0.113837, 0.127274)

[node name="L_FootArea" parent="PuppetBase/Skeleton/L_Foot" index="0"]
collision_layer = 8

[node name="NavTarget" type="Marker3D" parent="." index="9"]
top_level = true
visible = false

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavTarget" index="0"]
mesh = SubResource("BoxMesh_m0eni")

[node name="PlayerCast" type="RayCast3D" parent="." index="10"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)
collision_mask = 3

[node name="PlayerTimer" type="Timer" parent="." index="11"]
wait_time = 3.0
one_shot = true

[node name="StuckTimer" type="Timer" parent="." index="12"]
wait_time = 3.0
one_shot = true

[node name="ShootTimer" type="Timer" parent="." index="13"]
one_shot = true

[connection signal="timeout" from="PlayerTimer" to="." method="_player_lost"]
[connection signal="timeout" from="StuckTimer" to="." method="_stuck"]

[editable path="PuppetBase"]
