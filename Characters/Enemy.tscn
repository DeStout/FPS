[gd_scene load_steps=6 format=3 uid="uid://la6he6vwubnb"]

[ext_resource type="PackedScene" uid="uid://1s5qidco641t" path="res://Characters/CharacterBase.tscn" id="1_rf7ub"]
[ext_resource type="Script" path="res://Characters/Enemy.gd" id="2_pqw3d"]
[ext_resource type="PackedScene" uid="uid://cy12nf62sv60i" path="res://Debug/VectorCube.tscn" id="3_3vsup"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_0bpq3"]
albedo_color = Color(0.372549, 0.376471, 0.784314, 1)

[sub_resource type="BoxMesh" id="BoxMesh_m0eni"]
material = SubResource("StandardMaterial3D_0bpq3")
size = Vector3(0.3, 0.3, 0.3)

[node name="Enemy" instance=ExtResource("1_rf7ub")]
script = ExtResource("2_pqw3d")

[node name="NameLabel" type="Label3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.9756, 0)
billboard = 1
text = "Enemy"

[node name="NavAgent" type="NavigationAgent3D" parent="." index="1"]
target_desired_distance = 3.0

[node name="NavTarget" type="Marker3D" parent="." index="2"]
top_level = true
visible = false

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavTarget" index="0"]
mesh = SubResource("BoxMesh_m0eni")

[node name="PlayerCast" type="RayCast3D" parent="." index="4"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)
target_position = Vector3(0, 0, -1)
collision_mask = 3
debug_shape_custom_color = Color(0, 0.54902, 0.282353, 1)

[node name="Weapons" parent="." index="5"]
transform = Transform3D(0.846392, -0.0734508, 0.527472, -0.248432, 0.821621, 0.51305, -0.471066, -0.565282, 0.677165, 0.167709, 1.45931, -0.379625)

[node name="VectorCube" parent="AimHelper" index="0" instance=ExtResource("3_3vsup")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
visible = false

[node name="ShootCast" parent="AimHelper" index="2"]
visible = false
collision_mask = 13

[node name="Skeleton3D" parent="Puppet" index="2"]
bones/1/position = Vector3(-9.64839e-10, 0.894642, -0.0641973)
bones/2/rotation = Quaternion(-0.142481, 0.000898816, 0.00250394, 0.989794)
bones/4/rotation = Quaternion(0.0841634, 0.0131176, 0.0181825, 0.9962)
bones/5/rotation = Quaternion(-0.0212065, -0.000151966, -0.000947281, 0.999775)
bones/7/rotation = Quaternion(-0.186838, 0.256587, -0.490209, 0.811757)
bones/8/rotation = Quaternion(0.258322, 0.0352183, -0.0502971, 0.964105)
bones/9/rotation = Quaternion(-0.0111361, -0.334441, -0.0160533, 0.942214)
bones/11/rotation = Quaternion(-0.137643, -0.0284989, 0.157448, 0.977472)
bones/12/rotation = Quaternion(-0.0728706, -0.00440988, -0.0389535, 0.996571)
bones/14/rotation = Quaternion(0.0637394, -0.171868, -0.0806789, 0.97974)
bones/15/rotation = Quaternion(0.0688573, 0.146545, 0.0441172, 0.985818)
bones/17/rotation = Quaternion(-0.306418, -0.031067, 0.273579, 0.911207)
bones/18/rotation = Quaternion(-0.0645516, 0.0977242, -0.0941116, 0.988649)
bones/20/rotation = Quaternion(0.195967, 0.114455, 0.511231, 0.828939)
bones/21/rotation = Quaternion(0.6978, -0.0256702, 0.135871, 0.70282)
bones/22/rotation = Quaternion(0.138227, 0.259919, -0.0621365, 0.953664)
bones/24/rotation = Quaternion(-0.133217, 0.0443114, -0.139188, 0.980264)
bones/25/rotation = Quaternion(-0.0620977, 0.0127873, 0.0242648, 0.997693)
bones/27/rotation = Quaternion(0.0966248, 0.160337, 0.106721, 0.976507)
bones/28/rotation = Quaternion(0.0928119, -0.131205, -0.0701117, 0.984508)
bones/30/rotation = Quaternion(-0.525243, -0.385783, 0.59347, 0.472318)
bones/31/rotation = Quaternion(-0.291467, -0.110498, 0.336933, 0.888433)
bones/33/rotation = Quaternion(-0.587264, 0.221323, -0.165297, 0.760798)
bones/34/rotation = Quaternion(-0.0812856, 0.00387415, 0.124537, 0.988872)
bones/35/rotation = Quaternion(0.266216, -0.133206, -0.623773, 0.722698)
bones/36/rotation = Quaternion(0.00495412, -0.00577786, -0.163837, 0.986458)
bones/38/rotation = Quaternion(-0.527461, -0.0616464, 0.330912, 0.780053)
bones/39/rotation = Quaternion(-0.127295, -0.00380997, -0.195027, 0.972495)
bones/40/rotation = Quaternion(0.222117, 0.129394, 0.5127, 0.819182)
bones/41/rotation = Quaternion(0.00495411, 0.00577787, 0.163837, 0.986458)

[node name="Head" parent="Puppet/Skeleton3D" index="1"]
transform = Transform3D(-0.999988, -0.00496361, 0.000577632, -0.00498813, 0.984573, -0.174904, 0.000299432, -0.174905, -0.984585, -0.000809229, 1.57413, -0.0411573)

[node name="HeadArea" parent="Puppet/Skeleton3D/Head" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Neck" parent="Puppet/Skeleton3D" index="2"]
transform = Transform3D(-0.999995, -0.00304697, 0.000443548, -0.00307074, 0.976278, -0.216497, 0.000226634, -0.216498, -0.976283, -0.000613656, 1.51146, -0.0272612)

[node name="NeckArea" parent="Puppet/Skeleton3D/Neck" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Chest" parent="Puppet/Skeleton3D" index="3"]
transform = Transform3D(-0.999986, 0.00521301, -0.00106613, 0.00491574, 0.981795, 0.189882, 0.00203658, 0.189874, -0.981806, -1.87143e-09, 1.13281, -0.0868667)

[node name="ChestArea" parent="Puppet/Skeleton3D/Chest" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Stomach" parent="Puppet/Skeleton3D" index="4"]
transform = Transform3D(-1, -3.78941e-09, -3.89234e-07, 3.31093e-08, 0.995501, -0.0947544, 3.87842e-07, -0.0947544, -0.995501, -9.64839e-10, 0.894642, -0.0641973)

[node name="StomachArea" parent="Puppet/Skeleton3D/Stomach" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_UpperArm" parent="Puppet/Skeleton3D" index="5"]
transform = Transform3D(0.985026, 0.167329, -0.0415397, 0.149655, -0.710211, 0.687898, 0.0856032, -0.683814, -0.724618, 0.194538, 1.39478, -0.034135)

[node name="R_UpperArmArea" parent="Puppet/Skeleton3D/R_UpperArm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Forearm" parent="Puppet/Skeleton3D" index="6"]
transform = Transform3D(0.963946, -0.265671, -0.0150851, 0.188997, 0.643636, 0.741628, -0.18732, -0.71774, 0.670642, 0.229455, 1.24658, -0.176828)

[node name="R_ForearmArea" parent="Puppet/Skeleton3D/R_Forearm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Hand" parent="Puppet/Skeleton3D" index="7"]
transform = Transform3D(0.846392, -0.0734508, 0.527472, -0.248432, 0.821621, 0.513051, -0.471066, -0.565282, 0.677165, 0.174914, 1.37872, -0.324176)

[node name="R_HandArea" parent="Puppet/Skeleton3D/R_Hand" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_UpperArm" parent="Puppet/Skeleton3D" index="8"]
transform = Transform3D(0.976823, -0.19424, 0.0899382, -0.157134, -0.936026, -0.314903, 0.145351, 0.293472, -0.944853, -0.195383, 1.39414, -0.0340853)

[node name="L_UpperArmArea" parent="Puppet/Skeleton3D/L_UpperArm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Forearm" parent="Puppet/Skeleton3D" index="9"]
transform = Transform3D(0.976316, -0.0103452, 0.216102, -0.0526341, -0.980204, 0.190869, 0.209849, -0.197723, -0.957533, -0.235916, 1.19882, 0.0271541)

[node name="L_ForearmArea" parent="Puppet/Skeleton3D/L_Forearm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Hand" parent="Puppet/Skeleton3D" index="10"]
transform = Transform3D(0.893917, 0.0242554, -0.447577, 0.101878, -0.983396, 0.150182, -0.436502, -0.179848, -0.881544, -0.23804, 0.997592, -0.013437)

[node name="L_HandArea" parent="Puppet/Skeleton3D/L_Hand" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Thigh" parent="Puppet/Skeleton3D" index="11"]
transform = Transform3D(0.487116, 0.0599691, 0.871276, -0.295077, -0.927669, 0.228823, 0.821978, -0.368557, -0.434187, 0.0851499, 0.877153, -0.0593682)

[node name="R_ThighArea" parent="Puppet/Skeleton3D/R_Thigh" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Shin" parent="Puppet/Skeleton3D" index="12"]
transform = Transform3D(0.477074, 0.0242897, 0.878528, 0.0914246, -0.995566, -0.0221213, 0.874095, 0.0908726, -0.477179, 0.110347, 0.487383, -0.214221)

[node name="R_ShinArea" parent="Puppet/Skeleton3D/R_Shin" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Foot" parent="Puppet/Skeleton3D" index="13"]
transform = Transform3D(0.245938, 0.072078, 0.966602, -0.853541, -0.456466, 0.25121, 0.459327, -0.886817, -0.0507409, 0.11946, 0.11384, -0.180125)

[node name="R_FootArea" parent="Puppet/Skeleton3D/R_Foot" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Thigh" parent="Puppet/Skeleton3D" index="14"]
transform = Transform3D(0.497021, -0.0516146, -0.866202, -0.111382, -0.993767, -0.00469415, -0.860561, 0.098812, -0.499671, -0.0851499, 0.877152, -0.0593682)

[node name="L_ThighArea" parent="Puppet/Skeleton3D/L_Thigh" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Shin" parent="Puppet/Skeleton3D" index="15"]
transform = Transform3D(0.493082, -0.0336449, -0.869332, -0.351933, -0.921555, -0.163949, -0.795621, 0.386787, -0.466243, -0.106836, 0.459612, -0.0178514)

[node name="L_ShinArea" parent="Puppet/Skeleton3D/L_Shin" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Foot" parent="Puppet/Skeleton3D" index="16"]
transform = Transform3D(0.245938, -0.072076, -0.966602, 0.853542, -0.456465, 0.251208, -0.459326, -0.886817, -0.0507422, -0.11946, 0.113838, 0.127274)

[node name="L_FootArea" parent="Puppet/Skeleton3D/L_Foot" index="0"]
collision_layer = 8
collision_mask = 1

[node name="PlayerTimer" type="Timer" parent="." index="9"]
wait_time = 3.0
one_shot = true

[node name="StuckTimer" type="Timer" parent="." index="10"]
wait_time = 3.0
one_shot = true

[node name="ShootTimer" type="Timer" parent="." index="11"]
one_shot = true

[connection signal="timeout" from="PlayerTimer" to="." method="_player_lost"]
[connection signal="timeout" from="StuckTimer" to="." method="_stuck"]

[editable path="Weapons/Pistol"]
[editable path="Weapons/Pistol/Mesh"]
[editable path="Weapons/SMG"]
[editable path="Weapons/SMG/Mesh"]
[editable path="Weapons/Rifle"]
[editable path="Weapons/Shotgun"]
[editable path="Puppet"]
