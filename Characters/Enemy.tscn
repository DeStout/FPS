[gd_scene load_steps=6 format=3 uid="uid://2iouko1meib4"]

[ext_resource type="PackedScene" uid="uid://1s5qidco641t" path="res://Characters/CharacterBase.tscn" id="1_rf7ub"]
[ext_resource type="Script" path="res://Characters/Enemy.gd" id="2_ojr6m"]
[ext_resource type="PackedScene" uid="uid://cy12nf62sv60i" path="res://Debug/VectorCube.tscn" id="3_3vsup"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_0bpq3"]
albedo_color = Color(0.372549, 0.376471, 0.784314, 1)

[sub_resource type="BoxMesh" id="BoxMesh_m0eni"]
material = SubResource("StandardMaterial3D_0bpq3")
size = Vector3(0.3, 0.3, 0.3)

[node name="Enemy" instance=ExtResource("1_rf7ub")]
script = ExtResource("2_ojr6m")

[node name="NameLabel" type="Label3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.9756, 0)
billboard = 1
text = "Enemy"

[node name="NavAgent" type="NavigationAgent3D" parent="." index="1"]
target_desired_distance = 3.0

[node name="NavTarget" type="Marker3D" parent="." index="2"]
top_level = true
visible = false

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavTarget" index="0"]
mesh = SubResource("BoxMesh_m0eni")

[node name="PlayerCast" type="RayCast3D" parent="." index="4"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)
target_position = Vector3(0, 0, -1)
collision_mask = 3
debug_shape_custom_color = Color(0, 0.54902, 0.282353, 1)

[node name="Weapons" parent="." index="5"]
transform = Transform3D(-0.219277, -0.166029, -0.961432, -0.963767, 0.190272, 0.186951, 0.151894, 0.96759, -0.201736, 0.174658, 1.37655, -0.271018)

[node name="VectorCube" parent="AimHelper" index="0" instance=ExtResource("3_3vsup")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
visible = false

[node name="ShootCast" parent="AimHelper" index="2"]
visible = false
collision_mask = 13

[node name="Skeleton" parent="PuppetBase" index="2"]
bones/1/position = Vector3(1.61994e-09, 0.893744, -0.0641973)
bones/2/rotation = Quaternion(0.010031, 6.79537e-05, 0.00077227, 0.999949)
bones/4/rotation = Quaternion(0.008791, 6.34572e-05, 0.000675637, 0.999961)
bones/5/rotation = Quaternion(0.0117018, 8.08516e-05, 0.000900222, 0.999931)
bones/7/rotation = Quaternion(0.0103789, 0.88237, 0.27077, 0.384707)
bones/8/rotation = Quaternion(-0.0174512, -0.723103, -0.0169728, 0.690312)
bones/9/rotation = Quaternion(-0.395279, 0.728184, 0.142625, 0.541443)
bones/11/rotation = Quaternion(0.032106, -0.0155015, -0.0732399, 0.996677)
bones/14/rotation = Quaternion(0.00296613, 0.00528687, -0.0027558, 0.999978)
bones/17/rotation = Quaternion(0.335755, 0.0658077, 0.0429407, 0.938666)
bones/20/rotation = Quaternion(-0.135887, 0.949394, 0.25362, 0.125951)
bones/21/rotation = Quaternion(0.245193, 0.393076, -0.238348, 0.853559)
bones/22/rotation = Quaternion(-0.25608, -0.833988, -0.126679, 0.472059)
bones/24/rotation = Quaternion(0.0106597, 0.022907, 0.0660136, 0.997499)
bones/25/rotation = Quaternion(-0.00121675, -0.0182779, 0.00470797, 0.999821)
bones/27/rotation = Quaternion(-0.00596036, -0.0135621, -0.0397622, 0.999099)
bones/28/rotation = Quaternion(0.00495645, -0.0350806, 0.00793418, 0.999341)
bones/30/rotation = Quaternion(-0.346569, 0.491238, -0.553159, 0.576707)
bones/33/rotation = Quaternion(-0.139507, 0.0834882, 0.986543, -0.0173264)
bones/34/rotation = Quaternion(-0.0109857, 0.999452, 0.0311507, 0.00193686)
bones/35/rotation = Quaternion(0.0802532, 0.777268, -0.613586, 0.113696)
bones/38/rotation = Quaternion(0.133338, -0.151134, 0.979299, -0.0188002)
bones/39/rotation = Quaternion(0.0385815, 0.993225, 0.109402, -0.00680213)
bones/40/rotation = Quaternion(-0.0876789, 0.673784, -0.727463, -0.095529)

[node name="Head" parent="PuppetBase/Skeleton" index="1"]
transform = Transform3D(0.999989, -0.0046805, 0.0005676, 0.00470641, 0.998126, -0.0610095, -0.000280981, 0.0610115, 0.998137, -0.000762886, 1.57327, -0.0417644)

[node name="HeadArea" parent="PuppetBase/Skeleton/Head" index="0"]
collision_layer = 8

[node name="Neck" parent="PuppetBase/Skeleton" index="2"]
transform = Transform3D(0.999999, -0.0015431, 0.000151394, 0.00154583, 0.999798, -0.0200608, -0.000120407, 0.020061, 0.999799, 0.0017435, 1.4547, -0.0248542)

[node name="NeckArea" parent="PuppetBase/Skeleton/Neck" index="0"]
collision_layer = 8

[node name="Chest" parent="PuppetBase/Skeleton" index="3"]
transform = Transform3D(0.999999, -0.0015431, 0.000151394, 0.00154583, 0.999798, -0.0200608, -0.000120407, 0.020061, 0.999799, 7.13332e-10, 1.13191, -0.0868668)

[node name="ChestArea" parent="PuppetBase/Skeleton/Chest" index="0"]
collision_layer = 8

[node name="Stomach" parent="PuppetBase/Skeleton" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.61994e-09, 0.893744, -0.0641973)

[node name="StomachArea" parent="PuppetBase/Skeleton/Stomach" index="0"]
collision_layer = 8

[node name="R_UpperArm" parent="PuppetBase/Skeleton" index="5"]
transform = Transform3D(0.194749, -0.835064, -0.514529, -0.326403, 0.439501, -0.836839, 0.924951, 0.330917, -0.186975, 0.194563, 1.39393, -0.0344563)

[node name="R_UpperArmArea" parent="PuppetBase/Skeleton/R_UpperArm" index="0"]
collision_layer = 8

[node name="R_Forearm" parent="PuppetBase/Skeleton" index="6"]
transform = Transform3D(0.696655, -0.641954, 0.320262, 0.37679, -0.0524795, -0.924811, 0.610493, 0.764945, 0.205321, 0.22913, 1.24481, -0.176269)

[node name="R_ForearmArea" parent="PuppetBase/Skeleton/R_Forearm" index="0"]
collision_layer = 8

[node name="R_Hand" parent="PuppetBase/Skeleton" index="7"]
transform = Transform3D(-0.219277, -0.166029, -0.961432, -0.963767, 0.190272, 0.186951, 0.151894, 0.96759, -0.201736, 0.174658, 1.37655, -0.323997)

[node name="R_HandArea" parent="PuppetBase/Skeleton/R_Hand" index="0"]
collision_layer = 8

[node name="L_UpperArm" parent="PuppetBase/Skeleton" index="8"]
transform = Transform3D(0.227582, 0.852372, 0.470816, -0.658681, 0.490857, -0.570262, -0.717179, -0.180336, 0.673152, -0.195359, 1.39333, -0.0344094)

[node name="L_UpperArmArea" parent="PuppetBase/Skeleton/L_UpperArm" index="0"]
collision_layer = 8

[node name="L_Forearm" parent="PuppetBase/Skeleton" index="9"]
transform = Transform3D(0.461304, 0.862652, -0.207437, -0.538246, 0.457958, 0.707507, 0.70533, -0.214724, 0.675577, -0.235722, 1.19791, 0.0266239)

[node name="L_ForearmArea" parent="PuppetBase/Skeleton/L_Forearm" index="0"]
collision_layer = 8

[node name="L_Hand" parent="PuppetBase/Skeleton" index="10"]
transform = Transform3D(-0.223087, 0.266882, 0.937553, -0.776111, 0.533319, -0.336487, -0.589817, -0.802711, 0.0881536, -0.237609, 0.996754, -0.0143537)

[node name="L_HandArea" parent="PuppetBase/Skeleton/L_Hand" index="0"]
collision_layer = 8

[node name="R_Thigh" parent="PuppetBase/Skeleton" index="11"]
transform = Transform3D(-0.963735, -0.00348182, 0.266838, -0.0771258, -0.95361, -0.290997, 0.255473, -0.301024, 0.918759, 0.0851499, 0.876254, -0.0593682)

[node name="R_ThighArea" parent="PuppetBase/Skeleton/R_Thigh" index="0"]
collision_layer = 8

[node name="R_Shin" parent="PuppetBase/Skeleton" index="12"]
transform = Transform3D(0.966373, -0.020834, -0.256298, -0.00116512, -0.997057, 0.0766558, -0.257141, -0.0737796, -0.963553, 0.110494, 0.487214, -0.216021)

[node name="R_ShinArea" parent="PuppetBase/Skeleton/R_Shin" index="0"]
collision_layer = 8

[node name="R_Foot" parent="PuppetBase/Skeleton" index="13"]
transform = Transform3D(-1, -5.96046e-08, -4.28408e-07, -4.47035e-07, 4.91738e-07, 1, 0, 1, -3.8743e-07, 0.11946, 0.113836, -0.180126)

[node name="R_FootArea" parent="PuppetBase/Skeleton/R_Foot" index="0"]
collision_layer = 8

[node name="L_Thigh" parent="PuppetBase/Skeleton" index="14"]
transform = Transform3D(-0.960475, 0.0108921, -0.278153, -0.057481, -0.985459, 0.159895, -0.272367, 0.169564, 0.947135, -0.0851499, 0.876254, -0.0593682)

[node name="L_ThighArea" parent="PuppetBase/Skeleton/L_Thigh" index="0"]
collision_layer = 8

[node name="L_Shin" parent="PuppetBase/Skeleton" index="15"]
transform = Transform3D(0.961265, 0.0147677, 0.275229, 0.0782593, -0.97209, -0.221171, 0.264281, 0.234143, -0.935592, -0.107013, 0.458462, -0.0205485)

[node name="L_ShinArea" parent="PuppetBase/Skeleton/L_Shin" index="0"]
collision_layer = 8

[node name="L_Foot" parent="PuppetBase/Skeleton" index="16"]
transform = Transform3D(-1, -2.38419e-07, 1.86265e-08, 2.6077e-08, -2.98023e-08, 1, -1.78814e-07, 1, -1.49012e-08, -0.11946, 0.113828, 0.127276)

[node name="L_FootArea" parent="PuppetBase/Skeleton/L_Foot" index="0"]
collision_layer = 8

[node name="PlayerTimer" type="Timer" parent="." index="9"]
wait_time = 3.0
one_shot = true

[node name="StuckTimer" type="Timer" parent="." index="10"]
wait_time = 3.0
one_shot = true

[node name="ShootTimer" type="Timer" parent="." index="11"]
one_shot = true

[connection signal="timeout" from="PlayerTimer" to="." method="_player_lost"]
[connection signal="timeout" from="StuckTimer" to="." method="_stuck"]

[editable path="Weapons/Pistol"]
[editable path="Weapons/Pistol/Mesh"]
[editable path="Weapons/Rifle"]
[editable path="Weapons/Shotgun"]
[editable path="PuppetBase"]
