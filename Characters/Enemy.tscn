[gd_scene load_steps=6 format=3 uid="uid://cevbv8x2k7xwv"]

[ext_resource type="PackedScene" uid="uid://1s5qidco641t" path="res://Characters/CharacterBase.tscn" id="1_rf7ub"]
[ext_resource type="Script" path="res://Characters/Enemy.gd" id="2_n324u"]
[ext_resource type="PackedScene" uid="uid://cy12nf62sv60i" path="res://Debug/VectorCube.tscn" id="3_3vsup"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_0bpq3"]
albedo_color = Color(0.372549, 0.376471, 0.784314, 1)

[sub_resource type="BoxMesh" id="BoxMesh_m0eni"]
material = SubResource("StandardMaterial3D_0bpq3")
size = Vector3(0.3, 0.3, 0.3)

[node name="Enemy" instance=ExtResource("1_rf7ub")]
script = ExtResource("2_n324u")

[node name="NameLabel" type="Label3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.9756, 0)
billboard = 1
text = "Enemy"

[node name="VectorCube" parent="AimHelper" index="1" instance=ExtResource("3_3vsup")]

[node name="Weapons" parent="." index="3"]
transform = Transform3D(-0.249439, -0.307243, -0.918358, -0.429565, 0.885033, -0.179418, 0.867902, 0.349741, -0.352742, 0.0591027, 1.48247, -0.391733)

[node name="Pistol" parent="Weapons" index="0"]
visible = true

[node name="AnimationTree" parent="PuppetBase" index="1"]
parameters/Idle/UpperIdle/blend_position = Vector2(-1, -1)

[node name="Skeleton" parent="PuppetBase" index="2"]
bones/1/position = Vector3(1.61993e-09, 0.882322, -0.0641973)
bones/2/rotation = Quaternion(-0.0662561, 0.00141295, -0.00189108, 0.9978)
bones/4/rotation = Quaternion(0.0166263, 3.62086e-07, 3.09352e-07, 0.999862)
bones/5/rotation = Quaternion(0.00727251, 4.95552e-07, 4.03629e-07, 0.999974)
bones/7/rotation = Quaternion(0.524212, 0.670149, 0.210178, -0.481588)
bones/8/rotation = Quaternion(-0.0996181, -0.787517, -0.0968372, 0.60043)
bones/9/rotation = Quaternion(-0.473575, 0.801329, -0.134541, 0.339848)
bones/10/rotation = Quaternion(2.38419e-07, -2.98023e-08, -1.19209e-07, 1)
bones/11/rotation = Quaternion(-0.0966272, -0.281682, -0.154316, 0.942075)
bones/12/rotation = Quaternion(-0.140047, -0.543054, 0.0540662, 0.82617)
bones/14/rotation = Quaternion(-0.17066, -0.318941, -0.0235048, 0.931987)
bones/15/rotation = Quaternion(-0.289092, -0.459995, 0.0169906, 0.83937)
bones/16/rotation = Quaternion(-0.214187, 0.673887, 0.214187, 0.673887)
bones/17/rotation = Quaternion(0.479758, 0.118375, 0.202798, 0.845395)
bones/18/rotation = Quaternion(-0.0358341, -0.102954, 0.0733966, 0.991327)
bones/20/rotation = Quaternion(-0.401041, 0.677785, 0.342413, 0.512374)
bones/21/rotation = Quaternion(-0.0506229, 0.751275, 0.0492098, 0.656203)
bones/22/rotation = Quaternion(-0.325525, -0.712104, 0.208466, 0.586074)
bones/23/rotation = Quaternion(5.96046e-08, -5.96046e-08, 1.78814e-07, 1)
bones/24/rotation = Quaternion(-0.192525, 0.290313, 0.0472984, 0.936171)
bones/25/rotation = Quaternion(-0.282438, 0.515468, 0.134341, 0.797793)
bones/27/rotation = Quaternion(-0.432709, 0.524002, -0.0954245, 0.727378)
bones/28/rotation = Quaternion(-0.402798, 0.605453, -0.129943, 0.674015)
bones/29/rotation = Quaternion(-0.214187, -0.673887, -0.214187, 0.673887)
bones/30/rotation = Quaternion(-0.537937, 0.241139, -0.479164, 0.65029)
bones/31/rotation = Quaternion(-0.0714522, 0.0195048, -0.448426, 0.890746)
bones/33/rotation = Quaternion(-0.141211, 0.051677, 0.988573, -0.010564)
bones/34/rotation = Quaternion(-0.0351563, 0.994378, 0.0996889, 0.00619822)
bones/35/rotation = Quaternion(0.0725945, 0.801388, -0.582233, 0.116239)
bones/38/rotation = Quaternion(0.133437, -0.176656, 0.974876, -0.0245702)
bones/39/rotation = Quaternion(0.0563075, 0.985514, 0.159665, -0.00992738)
bones/40/rotation = Quaternion(-0.0825358, 0.693315, -0.709116, -0.0982719)
bones/41/rotation = Quaternion(-4.21469e-08, 1, 5.96047e-08, -1.26441e-07)

[node name="Head" parent="PuppetBase/Skeleton" index="1"]
transform = Transform3D(0.999989, 0.00372781, 0.00289714, -0.00395982, 0.996398, 0.0847031, -0.00257094, -0.0847137, 0.996402, 0.00170096, 1.56393, -0.108473)

[node name="HeadArea" parent="PuppetBase/Skeleton/Head" index="0"]
collision_layer = 8

[node name="Neck" parent="PuppetBase/Skeleton" index="2"]
transform = Transform3D(0.999989, 0.0035866, 0.00307027, -0.00396106, 0.991213, 0.132215, -0.00256909, -0.132226, 0.991216, 0.00356738, 1.44894, -0.0746716)

[node name="NeckArea" parent="PuppetBase/Skeleton/Neck" index="0"]
collision_layer = 8

[node name="Chest" parent="PuppetBase/Skeleton" index="3"]
transform = Transform3D(0.999989, 0.0035866, 0.00307027, -0.00396106, 0.991213, 0.132215, -0.00256909, -0.132226, 0.991216, 7.13329e-10, 1.12049, -0.0868668)

[node name="ChestArea" parent="PuppetBase/Skeleton/Chest" index="0"]
collision_layer = 8

[node name="Stomach" parent="PuppetBase/Skeleton" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.61993e-09, 0.882322, -0.0641973)

[node name="StomachArea" parent="PuppetBase/Skeleton/Stomach" index="0"]
collision_layer = 8

[node name="R_UpperArm" parent="PuppetBase/Skeleton" index="5"]
transform = Transform3D(0.189745, -0.440897, -0.877272, -0.941183, 0.172759, -0.290393, 0.27959, 0.880775, -0.382184, 0.196046, 1.38637, -0.0753474)

[node name="R_UpperArmArea" parent="PuppetBase/Skeleton/R_UpperArm" index="0"]
collision_layer = 8

[node name="R_Forearm" parent="PuppetBase/Skeleton" index="6"]
transform = Transform3D(0.84904, -0.46977, 0.24176, 0.411593, 0.301233, -0.860145, 0.331245, 0.829804, 0.449113, 0.126848, 1.39448, -0.272045)

[node name="R_ForearmArea" parent="PuppetBase/Skeleton/R_Forearm" index="0"]
collision_layer = 8

[node name="R_Hand" parent="PuppetBase/Skeleton" index="7"]
transform = Transform3D(-0.249439, -0.307243, -0.918358, -0.429565, 0.885033, -0.179418, 0.867902, 0.349741, -0.352742, 0.0591027, 1.48247, -0.444711)

[node name="R_HandArea" parent="PuppetBase/Skeleton/R_Hand" index="0"]
collision_layer = 8

[node name="L_UpperArm" parent="PuppetBase/Skeleton" index="8"]
transform = Transform3D(0.503303, 0.364029, 0.783689, 0.858017, -0.10302, -0.503184, -0.102438, 0.925673, -0.364193, -0.193872, 1.38791, -0.0743457)

[node name="L_UpperArmArea" parent="PuppetBase/Skeleton/L_UpperArm" index="0"]
collision_layer = 8

[node name="L_Forearm" parent="PuppetBase/Skeleton" index="9"]
transform = Transform3D(0.640621, 0.513253, -0.571118, -0.712082, 0.118806, -0.691971, -0.287304, 0.849974, 0.441588, -0.102549, 1.40029, -0.261565)

[node name="L_ForearmArea" parent="PuppetBase/Skeleton/L_Forearm" index="0"]
collision_layer = 8

[node name="L_Hand" parent="PuppetBase/Skeleton" index="10"]
transform = Transform3D(-0.403489, 0.143801, 0.903613, 0.41587, 0.908494, 0.0411197, -0.815014, 0.392377, -0.42637, 0.00100478, 1.45167, -0.431219)

[node name="L_HandArea" parent="PuppetBase/Skeleton/L_Hand" index="0"]
collision_layer = 8

[node name="R_Thigh" parent="PuppetBase/Skeleton" index="11"]
transform = Transform3D(-0.963182, 0.000760924, 0.26885, -0.0950506, -0.936378, -0.337878, 0.251488, -0.350992, 0.901975, 0.0851499, 0.864832, -0.0593682)

[node name="R_ThighArea" parent="PuppetBase/Skeleton/R_Thigh" index="0"]
collision_layer = 8

[node name="R_Shin" parent="PuppetBase/Skeleton" index="12"]
transform = Transform3D(0.967061, -0.0249256, -0.253321, -0.0192117, -0.999503, 0.0250049, -0.253818, -0.0193145, -0.967059, 0.112201, 0.484736, -0.236372)

[node name="R_ShinArea" parent="PuppetBase/Skeleton/R_Shin" index="0"]
collision_layer = 8

[node name="R_Foot" parent="PuppetBase/Skeleton" index="13"]
transform = Transform3D(-1, -3.12924e-07, -2.62633e-07, -2.77534e-07, 5.73695e-07, 1, -2.83122e-07, 1, -7.00355e-07, 0.119459, 0.113841, -0.180125)

[node name="R_FootArea" parent="PuppetBase/Skeleton/R_Foot" index="0"]
collision_layer = 8

[node name="L_Thigh" parent="PuppetBase/Skeleton" index="14"]
transform = Transform3D(-0.959896, 0.0062919, -0.280286, -0.0354813, -0.994436, 0.0991895, -0.278102, 0.105157, 0.954778, -0.0851499, 0.864832, -0.0593682)

[node name="L_ThighArea" parent="PuppetBase/Skeleton/L_Thigh" index="0"]
collision_layer = 8

[node name="L_Shin" parent="PuppetBase/Skeleton" index="15"]
transform = Transform3D(0.962437, 0.0190043, 0.27084, 0.101772, -0.950066, -0.294986, 0.25171, 0.31147, -0.916313, -0.108865, 0.4455, -0.0478552)

[node name="L_ShinArea" parent="PuppetBase/Skeleton/L_Shin" index="0"]
collision_layer = 8

[node name="L_Foot" parent="PuppetBase/Skeleton" index="16"]
transform = Transform3D(-1, -1.04308e-07, -3.65078e-07, -3.57628e-07, -2.98023e-07, 1, -1.04308e-07, 1, 3.57628e-07, -0.11946, 0.11384, 0.127273)

[node name="L_FootArea" parent="PuppetBase/Skeleton/L_Foot" index="0"]
collision_layer = 8

[node name="NavAgent" type="NavigationAgent3D" parent="." index="7"]
target_desired_distance = 3.0

[node name="NavTarget" type="Marker3D" parent="." index="8"]
top_level = true
visible = false

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavTarget" index="0"]
mesh = SubResource("BoxMesh_m0eni")

[node name="PlayerCast" type="RayCast3D" parent="." index="9"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)
collision_mask = 3

[node name="PlayerTimer" type="Timer" parent="." index="10"]
wait_time = 5.0
one_shot = true

[node name="StuckTimer" type="Timer" parent="." index="11"]
wait_time = 3.0
one_shot = true

[node name="ShootTimer" type="Timer" parent="." index="12"]
one_shot = true

[connection signal="timeout" from="PlayerTimer" to="." method="_player_lost"]
[connection signal="timeout" from="StuckTimer" to="." method="_stuck"]

[editable path="PuppetBase"]
