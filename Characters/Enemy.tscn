[gd_scene load_steps=6 format=3 uid="uid://cevbv8x2k7xwv"]

[ext_resource type="PackedScene" uid="uid://1s5qidco641t" path="res://Characters/CharacterBase.tscn" id="1_rf7ub"]
[ext_resource type="Script" path="res://Characters/Enemy.gd" id="2_ojr6m"]
[ext_resource type="PackedScene" uid="uid://cy12nf62sv60i" path="res://Debug/VectorCube.tscn" id="3_3vsup"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_0bpq3"]
albedo_color = Color(0.372549, 0.376471, 0.784314, 1)

[sub_resource type="BoxMesh" id="BoxMesh_m0eni"]
material = SubResource("StandardMaterial3D_0bpq3")
size = Vector3(0.3, 0.3, 0.3)

[node name="Enemy" instance=ExtResource("1_rf7ub")]
script = ExtResource("2_ojr6m")

[node name="NameLabel" type="Label3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.9756, 0)
billboard = 1
text = "Enemy"

[node name="NavAgent" type="NavigationAgent3D" parent="." index="1"]
target_desired_distance = 3.0
debug_enabled = true

[node name="NavTarget" type="Marker3D" parent="." index="2"]
top_level = true
visible = false

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavTarget" index="0"]
mesh = SubResource("BoxMesh_m0eni")

[node name="PlayerCast" type="RayCast3D" parent="." index="4"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)
collision_mask = 3

[node name="VectorCube" parent="AimHelper" index="1" instance=ExtResource("3_3vsup")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
visible = false

[node name="FPCamera" type="Camera3D" parent="AimHelper" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.210124)
cull_mask = 1048567

[node name="Weapons" parent="." index="6"]
transform = Transform3D(-0.213681, -0.177826, -0.960583, -0.970338, 0.152448, 0.187629, 0.113074, 0.972182, -0.205126, 0.172425, 1.35773, -0.269342)

[node name="Skeleton" parent="PuppetBase" index="2"]
bones/1/position = Vector3(1.61993e-09, 0.885937, -0.0641973)
bones/2/rotation = Quaternion(0.00467833, 2.97282e-05, 0.000360499, 0.999989)
bones/4/rotation = Quaternion(0.00411129, 2.58817e-05, 0.00031673, 0.999992)
bones/5/rotation = Quaternion(0.00545652, 3.37037e-05, 0.000420337, 0.999985)
bones/7/rotation = Quaternion(0.0146717, 0.885207, 0.274581, 0.375232)
bones/8/rotation = Quaternion(-0.0159997, -0.721805, -0.0155635, 0.691737)
bones/9/rotation = Quaternion(-0.401415, 0.724323, 0.130923, 0.545051)
bones/10/rotation = Quaternion(2.38419e-07, -2.98023e-08, -1.19209e-07, 1)
bones/11/rotation = Quaternion(0.0309496, -0.0184234, -0.0721166, 0.996746)
bones/12/rotation = Quaternion(-5.96047e-08, -2.38419e-07, 2.38419e-07, 1)
bones/14/rotation = Quaternion(0.00139721, 0.00249822, -0.00130478, 0.999995)
bones/15/rotation = Quaternion(-5.96046e-08, 5.96046e-08, 1.78814e-07, 1)
bones/16/rotation = Quaternion(-0.214187, 0.673887, 0.214187, 0.673887)
bones/17/rotation = Quaternion(0.329115, 0.0538096, 0.0451919, 0.941672)
bones/18/rotation = Quaternion(-0.0177395, 0.184228, 0.00458947, 0.982713)
bones/20/rotation = Quaternion(-0.131906, 0.949627, 0.263559, 0.106518)
bones/21/rotation = Quaternion(0.250355, 0.384411, -0.243366, 0.85459)
bones/22/rotation = Quaternion(-0.221732, -0.841668, -0.141207, 0.471689)
bones/23/rotation = Quaternion(5.96046e-08, -5.96046e-08, 1.78814e-07, 1)
bones/24/rotation = Quaternion(0.0124273, 0.0233968, 0.0774502, 0.996644)
bones/25/rotation = Quaternion(-0.000603998, -0.00849879, 0.00221814, 0.999961)
bones/27/rotation = Quaternion(-0.00714625, -0.0138435, -0.0461793, 0.998812)
bones/28/rotation = Quaternion(0.0021733, -0.0163116, 0.00378493, 0.999857)
bones/29/rotation = Quaternion(-0.214187, -0.673887, -0.214187, 0.673887)
bones/30/rotation = Quaternion(-0.343299, 0.501536, -0.564909, 0.558109)
bones/31/rotation = Quaternion(-0.0929818, 0.136922, -0.113451, 0.979661)
bones/33/rotation = Quaternion(-0.140773, 0.0604713, 0.988115, -0.0124599)
bones/34/rotation = Quaternion(-0.0284328, 0.996326, 0.0806238, 0.00501302)
bones/35/rotation = Quaternion(0.0747636, 0.794746, -0.591128, 0.115572)
bones/38/rotation = Quaternion(0.133427, -0.169095, 0.976259, -0.0228514)
bones/39/rotation = Quaternion(0.0510775, 0.988096, 0.144835, -0.00900517)
bones/40/rotation = Quaternion(-0.0840689, 0.687605, -0.714583, -0.0974804)
bones/41/rotation = Quaternion(-4.21469e-08, 1, 5.96047e-08, -1.26441e-07)

[node name="Head" parent="PuppetBase/Skeleton" index="1"]
transform = Transform3D(0.999998, -0.00219228, 0.000209876, 0.00219737, 0.999592, -0.0284883, -0.000147336, 0.0284887, 0.999594, -0.000356517, 1.56578, -0.047076)

[node name="HeadArea" parent="PuppetBase/Skeleton/Head" index="0"]
collision_layer = 8

[node name="Neck" parent="PuppetBase/Skeleton" index="2"]
transform = Transform3D(1, -0.000720713, 6.28289e-05, 0.000721269, 0.999956, -0.00935655, -5.60828e-05, 0.00935659, 0.999956, 0.002005, 1.44754, -0.0283131)

[node name="NeckArea" parent="PuppetBase/Skeleton/Neck" index="0"]
collision_layer = 8

[node name="Chest" parent="PuppetBase/Skeleton" index="3"]
transform = Transform3D(1, -0.000720713, 6.28289e-05, 0.000721269, 0.999956, -0.00935655, -5.60828e-05, 0.00935659, 0.999956, 7.1333e-10, 1.12411, -0.0868668)

[node name="ChestArea" parent="PuppetBase/Skeleton/Chest" index="0"]
collision_layer = 8

[node name="Stomach" parent="PuppetBase/Skeleton" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.61993e-09, 0.885937, -0.0641973)

[node name="StomachArea" parent="PuppetBase/Skeleton/Stomach" index="0"]
collision_layer = 8

[node name="R_UpperArm" parent="PuppetBase/Skeleton" index="5"]
transform = Transform3D(0.19463, -0.826596, -0.52807, -0.280501, 0.468979, -0.837483, 0.939914, 0.311123, -0.140584, 0.194775, 1.38651, -0.0372486)

[node name="R_UpperArmArea" parent="PuppetBase/Skeleton/R_UpperArm" index="0"]
collision_layer = 8

[node name="R_Forearm" parent="PuppetBase/Skeleton" index="6"]
transform = Transform3D(0.710085, -0.633802, 0.306717, 0.383121, -0.0176923, -0.923529, 0.590761, 0.773293, 0.23026, 0.226346, 1.22966, -0.171203)

[node name="R_ForearmArea" parent="PuppetBase/Skeleton/R_Forearm" index="0"]
collision_layer = 8

[node name="R_Hand" parent="PuppetBase/Skeleton" index="7"]
transform = Transform3D(-0.213681, -0.177826, -0.960583, -0.970338, 0.152448, 0.187629, 0.113074, 0.972182, -0.205126, 0.172425, 1.35773, -0.322321)

[node name="R_HandArea" parent="PuppetBase/Skeleton/R_Hand" index="0"]
collision_layer = 8

[node name="L_UpperArm" parent="PuppetBase/Skeleton" index="8"]
transform = Transform3D(0.232466, 0.848411, 0.475562, -0.649345, 0.499407, -0.573536, -0.724093, -0.175476, 0.667006, -0.195147, 1.38623, -0.0372268)

[node name="L_UpperArmArea" parent="PuppetBase/Skeleton/L_UpperArm" index="0"]
collision_layer = 8

[node name="L_Forearm" parent="PuppetBase/Skeleton" index="9"]
transform = Transform3D(0.466583, 0.858098, -0.214402, -0.544646, 0.469739, 0.69477, 0.696894, -0.207395, 0.686532, -0.233947, 1.18987, 0.0217752)

[node name="L_ForearmArea" parent="PuppetBase/Skeleton/L_Forearm" index="0"]
collision_layer = 8

[node name="L_Hand" parent="PuppetBase/Skeleton" index="10"]
transform = Transform3D(-0.223692, 0.267386, 0.937266, -0.782208, 0.524453, -0.336303, -0.581474, -0.808365, 0.0918359, -0.233851, 0.989374, -0.0223451)

[node name="L_HandArea" parent="PuppetBase/Skeleton/L_Hand" index="0"]
collision_layer = 8

[node name="R_Thigh" parent="PuppetBase/Skeleton" index="11"]
transform = Transform3D(-0.96335, -0.000506029, 0.268247, -0.0897417, -0.941769, -0.324064, 0.252791, -0.33626, 0.907208, 0.0851499, 0.868448, -0.0593682)

[node name="R_ThighArea" parent="PuppetBase/Skeleton/R_Thigh" index="0"]
collision_layer = 8

[node name="R_Shin" parent="PuppetBase/Skeleton" index="12"]
transform = Transform3D(0.96686, -0.0237029, -0.254205, -0.0139073, -0.999092, 0.0402628, -0.254928, -0.0353931, -0.966312, 0.111691, 0.485584, -0.230383)

[node name="R_ShinArea" parent="PuppetBase/Skeleton/R_Shin" index="0"]
collision_layer = 8

[node name="R_Foot" parent="PuppetBase/Skeleton" index="13"]
transform = Transform3D(-1, 1.19209e-07, -4.20958e-07, -4.07919e-07, 3.27826e-07, 1, 8.9407e-08, 1, -4.13507e-07, 0.11946, 0.11384, -0.180125)

[node name="R_FootArea" parent="PuppetBase/Skeleton/R_Foot" index="0"]
collision_layer = 8

[node name="L_Thigh" parent="PuppetBase/Skeleton" index="14"]
transform = Transform3D(-0.960055, 0.00759828, -0.279707, -0.0416491, -0.992376, 0.115997, -0.276693, 0.123013, 0.953052, -0.0851499, 0.868448, -0.0593682)

[node name="L_ThighArea" parent="PuppetBase/Skeleton/L_Thigh" index="0"]
collision_layer = 8

[node name="L_Shin" parent="PuppetBase/Skeleton" index="15"]
transform = Transform3D(0.962107, 0.0178002, 0.27209, 0.0953117, -0.956874, -0.274422, 0.255472, 0.289956, -0.922312, -0.108338, 0.449361, -0.0403002)

[node name="L_ShinArea" parent="PuppetBase/Skeleton/L_Shin" index="0"]
collision_layer = 8

[node name="L_Foot" parent="PuppetBase/Skeleton" index="16"]
transform = Transform3D(-1, 4.17233e-07, -1.49012e-07, -1.41561e-07, -5.96046e-08, 1, 3.8743e-07, 1, 1.19209e-07, -0.11946, 0.113839, 0.127274)

[node name="L_FootArea" parent="PuppetBase/Skeleton/L_Foot" index="0"]
collision_layer = 8

[node name="PlayerTimer" type="Timer" parent="." index="9"]
wait_time = 3.0
one_shot = true

[node name="StuckTimer" type="Timer" parent="." index="10"]
wait_time = 3.0
one_shot = true

[node name="ShootTimer" type="Timer" parent="." index="11"]
one_shot = true

[connection signal="timeout" from="PlayerTimer" to="." method="_player_lost"]
[connection signal="timeout" from="StuckTimer" to="." method="_stuck"]

[editable path="PuppetBase"]
