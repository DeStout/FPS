[gd_scene load_steps=11 format=3 uid="uid://bvtob15rpepds"]

[ext_resource type="PackedScene" uid="uid://1s5qidco641t" path="res://Characters/CharacterBase.tscn" id="1_l1vxh"]
[ext_resource type="Script" path="res://Characters/Player.gd" id="2_pimkv"]
[ext_resource type="PackedScene" uid="uid://brkwsl458i1pq" path="res://Props/PistolBase.tscn" id="3_4yye4"]
[ext_resource type="Script" path="res://Characters/Pause.gd" id="3_dkci2"]
[ext_resource type="PackedScene" uid="uid://bhxw75oi8yofw" path="res://Props/Rifle.tscn" id="4_0u135"]
[ext_resource type="PackedScene" uid="uid://ch6dv53ilimv4" path="res://Props/Pistol.tscn" id="4_575ca"]
[ext_resource type="PackedScene" uid="uid://c7isot5rpcwus" path="res://Props/RifleBase.tscn" id="4_jc36a"]
[ext_resource type="Texture2D" uid="uid://dwg7182f40h5u" path="res://Characters/CrossHair.png" id="4_vym86"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_hykio"]
radius = 0.25
height = 1.75

[sub_resource type="LabelSettings" id="LabelSettings_ue0id"]
font_size = 48

[node name="Player" node_paths=PackedStringArray("weapon_held") instance=ExtResource("1_l1vxh")]
script = ExtResource("2_pimkv")
weapon_held = NodePath("AimHelper/FPWeapons/Pistol")

[node name="Collision" parent="." index="0"]
shape = SubResource("CapsuleShape3D_hykio")

[node name="AimHelper" parent="." index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6, 0)

[node name="ShootCast" parent="AimHelper" index="0"]
collision_mask = 9

[node name="MainCamera" type="Camera3D" parent="AimHelper" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.105338)
cull_mask = 1048573

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="AimHelper/MainCamera" index="0"]
remote_path = NodePath("../../../CanvasLayer/SubViewportContainer/SubViewport/GunCamera")

[node name="Pistol" parent="AimHelper/Weapons" index="0" instance=ExtResource("3_4yye4")]
transform = Transform3D(0.926581, -0.220735, 0.304499, 0.372465, 0.650734, -0.661673, -0.0520941, 0.726509, 0.685176, 0.175199, -0.177469, -0.351539)

[node name="Gun" parent="AimHelper/Weapons/Pistol" index="0"]
layers = 1
cast_shadow = 3

[node name="Rifle" parent="AimHelper/Weapons" index="1" instance=ExtResource("4_jc36a")]
visible = false

[node name="Rifle2" parent="AimHelper/Weapons/Rifle" index="0"]
layers = 1
cast_shadow = 3

[node name="FPWeapons" type="Node3D" parent="AimHelper" index="3"]

[node name="Pistol" parent="AimHelper/FPWeapons" index="0" instance=ExtResource("4_575ca")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.085, -0.14, -0.335)
weapon_type = 1

[node name="Rifle" parent="AimHelper/FPWeapons" index="1" instance=ExtResource("4_0u135")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.09, -0.205, -0.245)
visible = false
weapon_type = 2

[node name="Skeleton3D" parent="PuppetAnimations/Character" index="0"]
bones/1/position = Vector3(3.11443e-10, 0.897158, -0.0641973)
bones/1/rotation = Quaternion(7.33823e-09, 0.998875, -0.0474306, -1.94488e-07)
bones/2/rotation = Quaternion(-0.16893, 0.000884177, 0.00329781, 0.985622)
bones/4/rotation = Quaternion(0.043259, 0.0123785, 0.0194214, 0.998798)
bones/5/rotation = Quaternion(0.0827605, -1.61335e-08, 1.91671e-08, 0.99657)
bones/7/rotation = Quaternion(-0.29646, 0.217138, -0.420622, 0.829482)
bones/8/rotation = Quaternion(0.451499, 0.0324098, -0.0879126, 0.887339)
bones/10/rotation = Quaternion(0.229945, 0.16347, 0.495575, 0.821467)
bones/11/rotation = Quaternion(0.499512, -0.0314205, 0.0972615, 0.860256)
bones/12/position = Vector3(0.263828, -0.0896941, -0.069473)
bones/12/rotation = Quaternion(0.154095, 0.216137, -0.579405, 0.770603)
bones/15/rotation = Quaternion(-0.0716247, -0.0320912, 0.111414, 0.99067)
bones/16/rotation = Quaternion(-0.0728706, -0.00440989, -0.0389535, 0.996571)
bones/21/rotation = Quaternion(0.0612661, -0.169755, -0.0869493, 0.979729)
bones/27/rotation = Quaternion(-0.176079, 0.0204277, -0.217908, 0.959737)
bones/28/rotation = Quaternion(0.65977, 0.491283, 0.18681, 0.537073)
bones/29/rotation = Quaternion(0.649508, 0.371598, -0.0377264, 0.662292)
bones/30/position = Vector3(-0.210024, 0.140008, 0.329943)
bones/30/rotation = Quaternion(-0.526883, 0.344568, 0.406096, 0.662384)
bones/33/rotation = Quaternion(-0.125195, 0.0276595, -0.146019, 0.980938)
bones/34/rotation = Quaternion(-0.117604, -0.0172697, 0.137017, 0.983411)
bones/39/rotation = Quaternion(0.089804, 0.167209, 0.113941, 0.975189)
bones/40/rotation = Quaternion(0.017629, -0.161482, 0.0307546, 0.986239)
bones/45/rotation = Quaternion(-0.0361723, -0.0997375, 0.176228, 0.978615)
bones/46/rotation = Quaternion(-0.295117, -0.59182, 0.644347, -0.384021)
bones/47/rotation = Quaternion(0.234885, 0.569563, -0.554866, 0.559063)
bones/49/rotation = Quaternion(-0.589811, 0.227728, -0.157098, 0.758672)
bones/50/rotation = Quaternion(-0.0675648, 0.00388766, 0.103515, 0.992323)
bones/52/rotation = Quaternion(-0.530833, -0.0624429, 0.32613, 0.779716)
bones/53/rotation = Quaternion(-0.105185, -0.00384449, -0.161153, 0.981301)
bones/54/position = Vector3(-0.11946, 0.113842, 0.126346)
bones/54/rotation = Quaternion(0.64937, -0.347814, -0.514224, 0.439225)
bones/56/rotation = Quaternion(0.00495412, -0.00577784, -0.163837, 0.986458)
bones/60/position = Vector3(-0.358456, 1.29624, 0.503077)
bones/60/rotation = Quaternion(0.586707, -0.407781, -0.439504, 0.544359)
bones/61/position = Vector3(0.11946, 0.113841, -0.203503)
bones/61/rotation = Quaternion(0.64937, 0.347814, 0.514224, 0.439225)
bones/63/rotation = Quaternion(0.00495412, 0.00577784, 0.163837, 0.986458)
bones/67/position = Vector3(0.376083, 0.971577, 0.487843)
bones/67/rotation = Quaternion(0.586707, 0.407781, 0.439504, 0.544359)

[node name="Body" parent="PuppetAnimations/Character/Skeleton3D" index="0"]
cast_shadow = 3

[node name="Head" parent="PuppetAnimations/Character/Skeleton3D" index="1"]
transform = Transform3D(-1, -3.05576e-08, -3.89651e-07, 6.65237e-08, 0.969315, -0.245822, 3.86541e-07, -0.245822, -0.969315, 8.29226e-09, 1.57421, -0.0123784)

[node name="HeadArea" parent="PuppetAnimations/Character/Skeleton3D/Head" index="0"]
collision_layer = 4

[node name="Neck" parent="PuppetAnimations/Character/Skeleton3D" index="2"]
transform = Transform3D(-1, -1.39698e-09, -4.24683e-07, 3.40297e-08, 0.996585, -0.0825636, 4.24683e-07, -0.0825635, -0.996586, 8.3819e-09, 1.51025, -0.00707896)

[node name="NeckArea" parent="PuppetAnimations/Character/Skeleton3D/Neck" index="0"]
collision_layer = 4

[node name="Chest" parent="PuppetAnimations/Character/Skeleton3D" index="3"]
transform = Transform3D(-0.999977, 0.00679964, -0.000629103, 0.0064449, 0.970214, 0.242163, 0.00225699, 0.242153, -0.970235, -5.95163e-10, 1.13533, -0.0868667)

[node name="ChestArea" parent="PuppetAnimations/Character/Skeleton3D/Chest" index="0"]
collision_layer = 4

[node name="Stomach" parent="PuppetAnimations/Character/Skeleton3D" index="4"]
transform = Transform3D(-1, -3.78945e-09, -3.89234e-07, 3.31093e-08, 0.9955, -0.0947545, 3.87842e-07, -0.0947545, -0.995501, 3.11443e-10, 0.897158, -0.0641973)

[node name="StomachArea" parent="PuppetAnimations/Character/Skeleton3D/Stomach" index="0"]
collision_layer = 4

[node name="L_UpperArm" parent="PuppetAnimations/Character/Skeleton3D" index="5"]
transform = Transform3D(0.956939, -0.248612, -0.149867, -0.287569, -0.882383, -0.372429, -0.0396499, 0.399489, -0.91588, -0.194961, 1.39378, -0.0201805)

[node name="L_UpperArmArea" parent="PuppetAnimations/Character/Skeleton3D/L_UpperArm" index="0"]
collision_layer = 4

[node name="L_Forearm" parent="PuppetAnimations/Character/Skeleton3D" index="6"]
transform = Transform3D(0.992165, -0.0853349, 0.0912434, -0.119691, -0.858567, 0.498533, 0.0357964, -0.505548, -0.862055, -0.246839, 1.20965, 0.0631816)

[node name="L_ForearmArea" parent="PuppetAnimations/Character/Skeleton3D/L_Forearm" index="0"]
collision_layer = 4

[node name="L_Hand" parent="PuppetAnimations/Character/Skeleton3D" index="7"]
transform = Transform3D(-0.240441, -0.957652, -0.158399, -0.924151, 0.27576, -0.264387, 0.296871, 0.0828154, -0.95132, -0.264388, 1.03318, -0.0405858)

[node name="L_HandArea" parent="PuppetAnimations/Character/Skeleton3D/L_Hand" index="0"]
collision_layer = 4

[node name="R_UpperArm" parent="PuppetAnimations/Character/Skeleton3D" index="8"]
transform = Transform3D(0.981171, 0.192191, -0.0191347, 0.129714, -0.582311, 0.80255, 0.143101, -0.789921, -0.596277, 0.194961, 1.39378, -0.0201804)

[node name="R_UpperArmArea" parent="PuppetAnimations/Character/Skeleton3D/R_UpperArm" index="0"]
collision_layer = 4

[node name="R_Forearm" parent="PuppetAnimations/Character/Skeleton3D" index="9"]
transform = Transform3D(0.983905, -0.118668, -0.1336, 0.169205, 0.378334, 0.910073, -0.0574513, -0.918031, 0.392325, 0.235066, 1.27227, -0.185015)

[node name="R_ForearmArea" parent="PuppetAnimations/Character/Skeleton3D/R_Forearm" index="0"]
collision_layer = 4

[node name="R_Hand" parent="PuppetAnimations/Character/Skeleton3D" index="10"]
transform = Transform3D(-0.430961, 0.902102, -0.0220238, -0.0417011, 0.00447057, 0.99912, 0.901406, 0.431501, 0.0356921, 0.210764, 1.34971, -0.37356)

[node name="R_HandArea" parent="PuppetAnimations/Character/Skeleton3D/R_Hand" index="0"]
collision_layer = 4

[node name="GunTransform" parent="PuppetAnimations/Character/Skeleton3D/R_Hand" index="1"]
remote_path = NodePath("../../../../../AimHelper/Weapons/Pistol")

[node name="L_Thigh" parent="PuppetAnimations/Character/Skeleton3D" index="11"]
transform = Transform3D(0.496281, -0.0501365, -0.866713, -0.129413, -0.991449, -0.0167503, -0.858462, 0.120477, -0.498526, -0.0851499, 0.879669, -0.0593681)

[node name="L_ThighArea" parent="PuppetAnimations/Character/Skeleton3D/L_Thigh" index="0"]
collision_layer = 4

[node name="L_Shin" parent="PuppetAnimations/Character/Skeleton3D" index="12"]
transform = Transform3D(0.494167, -0.0352995, -0.86865, -0.329436, -0.932262, -0.149529, -0.804531, 0.360056, -0.472323, -0.106215, 0.463101, -0.00874852)

[node name="L_ShinArea" parent="PuppetAnimations/Character/Skeleton3D/L_Shin" index="0"]
collision_layer = 4

[node name="L_Foot" parent="PuppetAnimations/Character/Skeleton3D" index="13"]
transform = Transform3D(0.245937, -0.0720774, -0.966602, 0.853541, -0.456466, 0.251208, -0.459327, -0.886817, -0.0507409, -0.11946, 0.113842, 0.126346)

[node name="L_FootArea" parent="PuppetAnimations/Character/Skeleton3D/L_Foot" index="0"]
collision_layer = 4

[node name="R_Thigh" parent="PuppetAnimations/Character/Skeleton3D" index="14"]
transform = Transform3D(0.481432, 0.0578015, 0.874575, -0.289301, -0.931422, 0.220812, 0.827362, -0.359322, -0.431694, 0.0851499, 0.879669, -0.0593681)

[node name="R_ThighArea" parent="PuppetAnimations/Character/Skeleton3D/R_Thigh" index="0"]
collision_layer = 4

[node name="R_Shin" parent="PuppetAnimations/Character/Skeleton3D" index="15"]
transform = Transform3D(0.474426, 0.0267157, 0.87989, 0.0287218, -0.999477, 0.0148601, 0.879827, 0.018222, -0.474945, 0.109436, 0.488322, -0.210341)

[node name="R_ShinArea" parent="PuppetAnimations/Character/Skeleton3D/R_Shin" index="0"]
collision_layer = 4

[node name="R_Foot" parent="PuppetAnimations/Character/Skeleton3D" index="16"]
transform = Transform3D(0.245937, 0.0720774, 0.966602, -0.853541, -0.456466, 0.251208, 0.459327, -0.886817, -0.0507409, 0.11946, 0.113841, -0.203503)

[node name="R_FootArea" parent="PuppetAnimations/Character/Skeleton3D/R_Foot" index="0"]
collision_layer = 4

[node name="AnimationTree" parent="PuppetAnimations" index="2"]
active = true
parameters/Run/Blend2/blend_amount = 1.0

[node name="CanvasLayer" type="CanvasLayer" parent="." index="3"]

[node name="SubViewportContainer" type="SubViewportContainer" parent="CanvasLayer" index="0"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3
stretch = true

[node name="SubViewport" type="SubViewport" parent="CanvasLayer/SubViewportContainer" index="0"]
transparent_bg = true
handle_input_locally = false
gui_disable_input = true
positional_shadow_atlas_size = 4096
size = Vector2i(1920, 1080)
render_target_update_mode = 4

[node name="GunCamera" type="Camera3D" parent="CanvasLayer/SubViewportContainer/SubViewport" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6, -0.105338)
cull_mask = 14
fov = 74.96
near = 0.01

[node name="UI" type="Control" parent="CanvasLayer" index="1"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 960.0
offset_top = 540.0
offset_right = -960.0
offset_bottom = -540.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4

[node name="Crosshairs" type="Sprite2D" parent="CanvasLayer/UI" index="0"]
scale = Vector2(0.5, 0.5)
texture = ExtResource("4_vym86")

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/UI" index="1"]
layout_mode = 0
offset_left = 610.0
offset_top = 340.0
offset_right = 905.0
offset_bottom = 484.0
alignment = 2

[node name="AmmoInMag" type="Label" parent="CanvasLayer/UI/VBoxContainer" index="0"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 6
text = "0 / 0"
label_settings = SubResource("LabelSettings_ue0id")
horizontal_alignment = 2
vertical_alignment = 1

[node name="ExtraAmmo" type="Label" parent="CanvasLayer/UI/VBoxContainer" index="1"]
unique_name_in_owner = true
layout_mode = 2
text = "0
"
label_settings = SubResource("LabelSettings_ue0id")
horizontal_alignment = 2
vertical_alignment = 1

[node name="Pause" type="Node" parent="." index="7"]
process_mode = 3
script = ExtResource("3_dkci2")

[connection signal="finished_reloading" from="AimHelper/FPWeapons/Pistol" to="." method="_update_UI"]
[connection signal="finished_reloading" from="AimHelper/FPWeapons/Rifle" to="." method="_update_UI"]

[editable path="AimHelper/Weapons/Pistol"]
[editable path="AimHelper/Weapons/Rifle"]
[editable path="PuppetAnimations"]
