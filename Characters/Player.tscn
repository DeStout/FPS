[gd_scene load_steps=11 format=3 uid="uid://bvtob15rpepds"]

[ext_resource type="PackedScene" uid="uid://1s5qidco641t" path="res://Characters/CharacterBase.tscn" id="1_l1vxh"]
[ext_resource type="Script" path="res://Characters/Player.gd" id="2_pimkv"]
[ext_resource type="PackedScene" uid="uid://brkwsl458i1pq" path="res://Props/PistolBase.tscn" id="3_4yye4"]
[ext_resource type="Script" path="res://Characters/Pause.gd" id="3_dkci2"]
[ext_resource type="PackedScene" uid="uid://bhxw75oi8yofw" path="res://Props/Rifle.tscn" id="4_0u135"]
[ext_resource type="PackedScene" uid="uid://ch6dv53ilimv4" path="res://Props/Pistol.tscn" id="4_575ca"]
[ext_resource type="PackedScene" uid="uid://c7isot5rpcwus" path="res://Props/RifleBase.tscn" id="4_jc36a"]
[ext_resource type="Texture2D" uid="uid://dwg7182f40h5u" path="res://Characters/CrossHair.png" id="4_vym86"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_hykio"]
radius = 0.25
height = 1.75

[sub_resource type="LabelSettings" id="LabelSettings_ue0id"]
font_size = 48

[node name="Player" node_paths=PackedStringArray("weapon_held") instance=ExtResource("1_l1vxh")]
script = ExtResource("2_pimkv")
weapon_held = NodePath("AimHelper/FPWeapons/Pistol")

[node name="Collision" parent="." index="0"]
shape = SubResource("CapsuleShape3D_hykio")

[node name="AimHelper" parent="." index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6, 0)

[node name="ShootCast" parent="AimHelper" index="0"]
collision_mask = 9

[node name="MainCamera" type="Camera3D" parent="AimHelper" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.105338)
cull_mask = 1048573

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="AimHelper/MainCamera" index="0"]
remote_path = NodePath("../../../CanvasLayer/SubViewportContainer/SubViewport/GunCamera")

[node name="Pistol" parent="AimHelper/Weapons" index="0" instance=ExtResource("3_4yye4")]
transform = Transform3D(0.300066, -0.923169, -0.240238, 0.453305, -0.0835947, 0.887424, -0.839328, -0.375188, 0.393395, 0.141258, -0.360865, -0.310517)

[node name="Gun" parent="AimHelper/Weapons/Pistol" index="0"]
layers = 1
cast_shadow = 3

[node name="Rifle" parent="AimHelper/Weapons" index="1" instance=ExtResource("4_jc36a")]
transform = Transform3D(0.300066, -0.923169, -0.240238, 0.471061, -0.0755931, 0.878854, -0.829493, -0.376881, 0.412188, 0.141225, -0.357705, -0.308319)
visible = false

[node name="Rifle2" parent="AimHelper/Weapons/Rifle" index="0"]
layers = 1
cast_shadow = 3

[node name="FPWeapons" type="Node3D" parent="AimHelper" index="3"]

[node name="Pistol" parent="AimHelper/FPWeapons" index="0" instance=ExtResource("4_575ca")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.085, -0.14, -0.335)
weapon_type = 1

[node name="Rifle" parent="AimHelper/FPWeapons" index="1" instance=ExtResource("4_0u135")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.09, -0.205, -0.245)
visible = false
weapon_type = 2

[node name="Skeleton3D" parent="PuppetAnimations/Character" index="0"]
bones/1/position = Vector3(-9.94846e-11, 0.88106, -0.0641973)
bones/1/rotation = Quaternion(7.33823e-09, 0.998875, -0.0474306, -1.94488e-07)
bones/2/rotation = Quaternion(0.121369, -0.000100602, 0.00341291, 0.992602)
bones/4/rotation = Quaternion(-0.116125, 0.00913252, 0.0211426, 0.992968)
bones/5/rotation = Quaternion(-0.0778096, -1.92635e-08, -6.00997e-09, 0.996968)
bones/7/rotation = Quaternion(0.756291, -0.224653, -0.425017, 0.443752)
bones/8/rotation = Quaternion(0.142749, 0.0361123, -0.0277951, 0.988709)
bones/10/rotation = Quaternion(0.314912, 0.0585686, 0.425018, 0.846616)
bones/11/rotation = Quaternion(0.876201, -0.0164521, 0.170608, 0.450438)
bones/12/position = Vector3(-0.0099867, 0.403082, 0.32372)
bones/12/rotation = Quaternion(-0.223819, -0.338895, -0.742044, 0.533316)
bones/15/rotation = Quaternion(0.163763, 0.041538, 0.298749, 0.939258)
bones/16/rotation = Quaternion(-0.0496317, -0.150768, -0.19875, 0.967111)
bones/21/rotation = Quaternion(0.134067, 0.118303, 0.00493325, 0.983873)
bones/22/rotation = Quaternion(-0.421547, 0.179036, -0.554872, 0.694522)
bones/26/rotation = Quaternion(-0.237739, 0.347835, -0.101284, 0.90124)
bones/27/rotation = Quaternion(-0.176079, 0.0204277, -0.217908, 0.959737)
bones/28/rotation = Quaternion(0.358217, 0.298426, 0.394248, 0.791954)
bones/29/rotation = Quaternion(0.27743, 0.293949, 0.145937, 0.902956)
bones/30/position = Vector3(-0.129522, 0.28583, 0.172271)
bones/30/rotation = Quaternion(0.0838925, 0.186627, 0.0126269, 0.978761)
bones/33/rotation = Quaternion(-0.390181, 0.163129, 0.154174, 0.89296)
bones/34/rotation = Quaternion(-0.427899, 0.146724, 0.708347, 0.541866)
bones/39/rotation = Quaternion(-0.438077, 0.312323, 0.528252, 0.656881)
bones/40/rotation = Quaternion(-0.385254, -0.222185, 0.451194, 0.773717)
bones/44/rotation = Quaternion(-0.275473, -0.100344, 0.265335, 0.9185)
bones/45/rotation = Quaternion(-0.612876, -0.275248, 0.111856, 0.732195)
bones/46/rotation = Quaternion(-0.307437, -0.22722, 0.889608, 0.249902)
bones/47/rotation = Quaternion(0.597709, -0.275677, -0.733956, 0.167494)
bones/49/rotation = Quaternion(-0.547447, 0.301652, -0.276549, 0.729951)
bones/50/rotation = Quaternion(-0.128491, 0.00380792, 0.196859, 0.971968)
bones/52/rotation = Quaternion(-0.512491, -0.133405, 0.439696, 0.725413)
bones/53/rotation = Quaternion(-0.151683, -0.00376386, -0.232391, 0.960715)
bones/54/position = Vector3(-0.11946, 0.113842, 0.126346)
bones/54/rotation = Quaternion(0.64937, -0.347814, -0.514224, 0.439225)
bones/56/rotation = Quaternion(0.00495412, -0.00577784, -0.163837, 0.986458)
bones/59/position = Vector3(-0.114721, 0.482147, -0.290625)
bones/60/position = Vector3(-0.346925, 0.949203, -0.462991)
bones/60/rotation = Quaternion(0.565929, -0.423939, -0.423939, 0.565929)
bones/61/position = Vector3(0.11946, 0.113841, -0.203503)
bones/61/rotation = Quaternion(0.64937, 0.347814, 0.514224, 0.439225)
bones/63/rotation = Quaternion(0.00495412, 0.00577784, 0.163837, 0.986458)
bones/66/position = Vector3(0.114721, 0.482147, -0.290625)
bones/67/position = Vector3(0.336462, 0.963183, -0.442594)
bones/67/rotation = Quaternion(0.565929, 0.423939, 0.423939, 0.565929)

[node name="Body" parent="PuppetAnimations/Character/Skeleton3D" index="0"]
cast_shadow = 3

[node name="Head" parent="PuppetAnimations/Character/Skeleton3D" index="1"]
transform = Transform3D(-1, 7.54713e-09, -3.85104e-07, 8.15773e-08, 0.981946, -0.189157, 3.73955e-07, -0.189158, -0.981947, 6.06792e-09, 1.53655, -0.248375)

[node name="HeadArea" parent="PuppetAnimations/Character/Skeleton3D/Head" index="0"]
collision_layer = 4

[node name="Neck" parent="PuppetAnimations/Character/Skeleton3D" index="2"]
transform = Transform3D(-1, -4.33065e-08, -4.20958e-07, 1.03377e-07, 0.940709, -0.339213, 4.07919e-07, -0.339214, -0.940709, 8.84756e-09, 1.47617, -0.226603)

[node name="NeckArea" parent="PuppetAnimations/Character/Skeleton3D/Neck" index="0"]
collision_layer = 4

[node name="Chest" parent="PuppetAnimations/Character/Skeleton3D" index="3"]
transform = Transform3D(-0.999977, 0.00679964, -0.000629102, 0.00662313, 0.943319, -0.331821, -0.00166282, -0.331818, -0.943342, -1.00608e-09, 1.11923, -0.0868667)

[node name="ChestArea" parent="PuppetAnimations/Character/Skeleton3D/Chest" index="0"]
collision_layer = 4

[node name="Stomach" parent="PuppetAnimations/Character/Skeleton3D" index="4"]
transform = Transform3D(-1, -3.78941e-09, -3.89234e-07, 3.31093e-08, 0.9955, -0.0947544, 3.87842e-07, -0.0947544, -0.995501, -9.94846e-11, 0.88106, -0.0641973)

[node name="StomachArea" parent="PuppetAnimations/Character/Skeleton3D/Stomach" index="0"]
collision_layer = 4

[node name="L_UpperArm" parent="PuppetAnimations/Character/Skeleton3D" index="5"]
transform = Transform3D(0.864154, 0.451965, 0.221278, -0.206982, -0.081574, 0.974938, 0.458689, -0.888298, 0.023056, -0.194961, 1.37172, -0.173441)

[node name="L_UpperArmArea" parent="PuppetAnimations/Character/Skeleton3D/L_UpperArm" index="0"]
collision_layer = 4

[node name="L_Forearm" parent="PuppetAnimations/Character/Skeleton3D" index="6"]
transform = Transform3D(0.822827, 0.55127, 0.138048, -0.279835, 0.18161, 0.942713, 0.494619, -0.814321, 0.303699, -0.100648, 1.3547, -0.358804)

[node name="L_ForearmArea" parent="PuppetAnimations/Character/Skeleton3D/L_Forearm" index="0"]
collision_layer = 4

[node name="L_Hand" parent="PuppetAnimations/Character/Skeleton3D" index="7"]
transform = Transform3D(0.326164, -0.944704, 0.0339304, -0.835879, -0.271456, 0.477092, -0.4415, -0.183972, -0.878198, 0.0125236, 1.39198, -0.525978)

[node name="L_HandArea" parent="PuppetAnimations/Character/Skeleton3D/L_Hand" index="0"]
collision_layer = 4

[node name="R_UpperArm" parent="PuppetAnimations/Character/Skeleton3D" index="8"]
transform = Transform3D(0.916521, 0.246473, -0.315024, 0.343725, -0.888099, 0.305177, -0.204555, -0.387983, -0.89868, 0.194961, 1.37172, -0.173441)

[node name="R_UpperArmArea" parent="PuppetAnimations/Character/Skeleton3D/R_UpperArm" index="0"]
collision_layer = 4

[node name="R_Forearm" parent="PuppetAnimations/Character/Skeleton3D" index="9"]
transform = Transform3D(0.794594, -0.560509, 0.233347, 0.308399, 0.703677, 0.6401, -0.522983, -0.436656, 0.731997, 0.246393, 1.1864, -0.254402)

[node name="R_ForearmArea" parent="PuppetAnimations/Character/Skeleton3D/R_Forearm" index="0"]
collision_layer = 4

[node name="R_Hand" parent="PuppetAnimations/Character/Skeleton3D" index="10"]
transform = Transform3D(-0.92939, -1.30436e-07, -0.369098, 0.179535, 0.873727, -0.452069, 0.322491, -0.486415, -0.812034, 0.131355, 1.33083, -0.344005)

[node name="R_HandArea" parent="PuppetAnimations/Character/Skeleton3D/R_Hand" index="0"]
collision_layer = 4

[node name="GunTransform" parent="PuppetAnimations/Character/Skeleton3D/R_Hand" index="1"]
remote_path = NodePath("../../../../../AimHelper/Weapons/Rifle")

[node name="L_Thigh" parent="PuppetAnimations/Character/Skeleton3D" index="11"]
transform = Transform3D(0.720628, -0.0471136, -0.69172, -0.045634, -0.998748, 0.0204843, -0.691819, 0.0168043, -0.721876, -0.0851499, 0.86357, -0.0593682)

[node name="L_ThighArea" parent="PuppetAnimations/Character/Skeleton3D/L_Thigh" index="0"]
collision_layer = 4

[node name="L_Shin" parent="PuppetAnimations/Character/Skeleton3D" index="12"]
transform = Transform3D(0.686883, -0.146643, -0.711819, -0.424509, -0.875937, -0.229184, -0.589901, 0.459597, -0.663918, -0.104945, 0.443936, -0.0523077)

[node name="L_ShinArea" parent="PuppetAnimations/Character/Skeleton3D/L_Shin" index="0"]
collision_layer = 4

[node name="L_Foot" parent="PuppetAnimations/Character/Skeleton3D" index="13"]
transform = Transform3D(0.245937, -0.0720779, -0.966602, 0.853542, -0.456465, 0.251209, -0.459327, -0.886817, -0.0507405, -0.11946, 0.113842, 0.126346)

[node name="L_FootArea" parent="PuppetAnimations/Character/Skeleton3D/L_Foot" index="0"]
collision_layer = 4

[node name="R_Thigh" parent="PuppetAnimations/Character/Skeleton3D" index="14"]
transform = Transform3D(0.682863, -0.0710633, 0.727082, -0.355354, -0.90189, 0.245593, 0.638296, -0.426078, -0.64112, 0.0851499, 0.86357, -0.0593682)

[node name="R_ThighArea" parent="PuppetAnimations/Character/Skeleton3D/R_Thigh" index="0"]
collision_layer = 4

[node name="R_Shin" parent="PuppetAnimations/Character/Skeleton3D" index="15"]
transform = Transform3D(0.697254, 0.0349412, 0.715972, 0.103813, -0.993203, -0.0526286, 0.709267, 0.111023, -0.696142, 0.0552919, 0.484632, -0.238389)

[node name="R_ShinArea" parent="PuppetAnimations/Character/Skeleton3D/R_Shin" index="0"]
collision_layer = 4

[node name="R_Foot" parent="PuppetAnimations/Character/Skeleton3D" index="16"]
transform = Transform3D(0.245937, 0.0720779, 0.966602, -0.853542, -0.456465, 0.251209, 0.459327, -0.886817, -0.0507405, 0.11946, 0.113841, -0.203503)

[node name="R_FootArea" parent="PuppetAnimations/Character/Skeleton3D/R_Foot" index="0"]
collision_layer = 4

[node name="AnimationTree" parent="PuppetAnimations" index="2"]
parameters/Idle/IdleUpper_Blend/blend_position = Vector2(1, -1)

[node name="CanvasLayer" type="CanvasLayer" parent="." index="3"]

[node name="SubViewportContainer" type="SubViewportContainer" parent="CanvasLayer" index="0"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3
stretch = true

[node name="SubViewport" type="SubViewport" parent="CanvasLayer/SubViewportContainer" index="0"]
transparent_bg = true
handle_input_locally = false
gui_disable_input = true
positional_shadow_atlas_size = 4096
size = Vector2i(1920, 1080)
render_target_update_mode = 4

[node name="GunCamera" type="Camera3D" parent="CanvasLayer/SubViewportContainer/SubViewport" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6, -0.105338)
cull_mask = 14
fov = 74.96
near = 0.01

[node name="UI" type="Control" parent="CanvasLayer" index="1"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 960.0
offset_top = 540.0
offset_right = -960.0
offset_bottom = -540.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4

[node name="Crosshairs" type="Sprite2D" parent="CanvasLayer/UI" index="0"]
scale = Vector2(0.5, 0.5)
texture = ExtResource("4_vym86")

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/UI" index="1"]
layout_mode = 0
offset_left = 610.0
offset_top = 340.0
offset_right = 905.0
offset_bottom = 484.0
alignment = 2

[node name="AmmoInMag" type="Label" parent="CanvasLayer/UI/VBoxContainer" index="0"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 6
text = "0 / 0"
label_settings = SubResource("LabelSettings_ue0id")
horizontal_alignment = 2
vertical_alignment = 1

[node name="ExtraAmmo" type="Label" parent="CanvasLayer/UI/VBoxContainer" index="1"]
unique_name_in_owner = true
layout_mode = 2
text = "0
"
label_settings = SubResource("LabelSettings_ue0id")
horizontal_alignment = 2
vertical_alignment = 1

[node name="Pause" type="Node" parent="." index="7"]
process_mode = 3
script = ExtResource("3_dkci2")

[connection signal="finished_reloading" from="AimHelper/FPWeapons/Pistol" to="." method="_update_UI"]
[connection signal="finished_reloading" from="AimHelper/FPWeapons/Rifle" to="." method="_update_UI"]

[editable path="AimHelper/Weapons/Pistol"]
[editable path="AimHelper/Weapons/Rifle"]
[editable path="PuppetAnimations"]
