[gd_scene load_steps=12 format=3 uid="uid://bvtob15rpepds"]

[ext_resource type="PackedScene" uid="uid://1s5qidco641t" path="res://Characters/CharacterBase.tscn" id="1_a23yl"]
[ext_resource type="Script" path="res://Characters/Player.gd" id="2_aqpim"]
[ext_resource type="PackedScene" uid="uid://0r6eljbdbyqv" path="res://Props/FPSlapper.tscn" id="3_mqij6"]
[ext_resource type="PackedScene" uid="uid://by7wwhoru7x60" path="res://Props/FPPistol.tscn" id="4_wj3q8"]
[ext_resource type="PackedScene" uid="uid://btj7bcwc5cjwk" path="res://Props/FPRifle.tscn" id="5_ubj5j"]
[ext_resource type="Texture2D" uid="uid://dwg7182f40h5u" path="res://Characters/CrossHair.png" id="5_wk7d6"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_hykio"]
radius = 0.25
height = 1.75

[sub_resource type="LabelSettings" id="LabelSettings_lhp81"]
font_size = 76
font_color = Color(0.862745, 0.0980392, 0.0862745, 1)

[sub_resource type="LabelSettings" id="LabelSettings_kxml2"]
font_size = 68
font_color = Color(0.254902, 0, 1, 1)

[sub_resource type="LabelSettings" id="LabelSettings_ue0id"]
font_size = 48

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_tin5q"]
albedo_color = Color(0.839216, 0.6, 0.466667, 1)
subsurf_scatter_enabled = true
subsurf_scatter_strength = 1.0
subsurf_scatter_skin_mode = true

[node name="Player" instance=ExtResource("1_a23yl")]
script = ExtResource("2_aqpim")

[node name="Collision" parent="." index="0"]
shape = SubResource("CapsuleShape3D_hykio")

[node name="AimHelper" parent="." index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6, 0)

[node name="ShootCast" parent="AimHelper" index="0"]
collision_mask = 9

[node name="MainCamera" type="Camera3D" parent="AimHelper" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.105338)
cull_mask = 1048567

[node name="RemoteTransform3D" type="RemoteTransform3D" parent="AimHelper/MainCamera" index="0"]
remote_path = NodePath("../../../CanvasLayer/GunViewContainer/GunView/GunCamera")

[node name="FPWeapons" type="Node3D" parent="AimHelper" index="2"]

[node name="Slapper" parent="AimHelper/FPWeapons" index="0" instance=ExtResource("3_mqij6")]
transform = Transform3D(-0.983385, -0.110577, 0.14397, 0.109524, 0.271082, 0.956305, -0.144773, 0.956184, -0.254467, 0.14, -0.205, -0.31)
skeleton = NodePath("")

[node name="Pistol" parent="AimHelper/FPWeapons" index="1" instance=ExtResource("4_wj3q8")]
transform = Transform3D(-1, 0, -2.62268e-07, 0, 1, 0, 2.62268e-07, 0, -1, 0.115, -0.14, -0.31)
visible = false

[node name="Rifle" parent="AimHelper/FPWeapons" index="2" instance=ExtResource("5_ubj5j")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0.125, -0.21, -0.315)
visible = false

[node name="Weapons" parent="." index="2"]
transform = Transform3D(-0.219541, -0.165302, -0.961497, -0.963385, 0.192222, 0.186924, 0.153922, 0.967329, -0.201451, 0.174777, 1.37755, -0.271102)

[node name="Mesh" parent="Weapons/Pistol" index="0"]
cast_shadow = 3

[node name="Mesh" parent="Weapons/Rifle" index="0"]
cast_shadow = 3

[node name="CanvasLayer" type="CanvasLayer" parent="." index="3"]
layer = 2

[node name="GunViewContainer" type="SubViewportContainer" parent="CanvasLayer" index="0"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3
stretch = true

[node name="GunView" type="SubViewport" parent="CanvasLayer/GunViewContainer" index="0"]
transparent_bg = true
handle_input_locally = false
gui_disable_input = true
positional_shadow_atlas_size = 4096
size = Vector2i(1920, 1080)
render_target_update_mode = 4

[node name="GunCamera" type="Camera3D" parent="CanvasLayer/GunViewContainer/GunView" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6, -0.105338)
cull_mask = 8

[node name="UI" type="Control" parent="CanvasLayer" index="1"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 960.0
offset_top = 540.0
offset_right = -960.0
offset_bottom = -540.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4

[node name="Crosshairs" type="Sprite2D" parent="CanvasLayer/UI" index="0"]
scale = Vector2(0.5, 0.5)
texture = ExtResource("5_wk7d6")

[node name="Health" type="BoxContainer" parent="CanvasLayer/UI" index="1"]
layout_mode = 0
offset_left = -852.0
offset_top = -481.0
offset_right = -686.0
offset_bottom = -273.0
theme_override_constants/separation = -20
vertical = true

[node name="Health" type="Label" parent="CanvasLayer/UI/Health" index="0"]
unique_name_in_owner = true
layout_mode = 2
text = "100"
label_settings = SubResource("LabelSettings_lhp81")
vertical_alignment = 1

[node name="Armor" type="Label" parent="CanvasLayer/UI/Health" index="1"]
unique_name_in_owner = true
layout_mode = 2
text = "0"
label_settings = SubResource("LabelSettings_kxml2")

[node name="Weapon" type="VBoxContainer" parent="CanvasLayer/UI" index="2"]
layout_mode = 0
offset_left = 610.0
offset_top = 340.0
offset_right = 905.0
offset_bottom = 484.0
alignment = 2

[node name="AmmoInMag" type="Label" parent="CanvasLayer/UI/Weapon" index="0"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 6
text = "0 / 0"
label_settings = SubResource("LabelSettings_ue0id")
horizontal_alignment = 2
vertical_alignment = 1

[node name="ExtraAmmo" type="Label" parent="CanvasLayer/UI/Weapon" index="1"]
unique_name_in_owner = true
layout_mode = 2
text = "0"
label_settings = SubResource("LabelSettings_ue0id")
horizontal_alignment = 2
vertical_alignment = 1

[node name="Skeleton" parent="PuppetBase" index="2"]
bones/1/position = Vector3(1.61994e-09, 0.894159, -0.0641973)
bones/2/rotation = Quaternion(0.0103161, 7.01169e-05, 0.000794186, 0.999946)
bones/4/rotation = Quaternion(0.00902305, 6.69686e-05, 0.000692999, 0.999959)
bones/5/rotation = Quaternion(0.0120345, 8.34596e-05, 0.000925786, 0.999927)
bones/7/rotation = Quaternion(0.0101683, 0.882224, 0.270575, 0.385183)
bones/8/rotation = Quaternion(-0.0175621, -0.7232, -0.0170792, 0.690204)
bones/9/rotation = Quaternion(-0.394935, 0.728396, 0.143274, 0.541238)
bones/11/rotation = Quaternion(0.0321716, -0.0153355, -0.0733038, 0.996673)
bones/14/rotation = Quaternion(0.00303775, 0.00541355, -0.00282153, 0.999977)
bones/17/rotation = Quaternion(0.336106, 0.0664476, 0.0428238, 0.938501)
bones/20/rotation = Quaternion(-0.136104, 0.949372, 0.25307, 0.126984)
bones/21/rotation = Quaternion(0.244903, 0.393559, -0.238066, 0.853498)
bones/22/rotation = Quaternion(-0.257904, -0.833547, -0.125982, 0.472031)
bones/24/rotation = Quaternion(0.0105617, 0.02288, 0.0654043, 0.997541)
bones/25/rotation = Quaternion(-0.00124706, -0.0188003, 0.00483914, 0.999811)
bones/27/rotation = Quaternion(-0.00589777, -0.0135479, -0.0394185, 0.999114)
bones/28/rotation = Quaternion(0.00511352, -0.036083, 0.00814972, 0.999303)
bones/30/rotation = Quaternion(-0.346749, 0.490672, -0.552532, 0.577681)
bones/33/rotation = Quaternion(-0.139421, 0.0849438, 0.986426, -0.0176299)
bones/34/rotation = Quaternion(-0.00988959, 0.999556, 0.0280425, 0.00174361)
bones/35/rotation = Quaternion(0.080592, 0.776157, -0.614969, 0.113571)
bones/38/rotation = Quaternion(0.13333, -0.1501, 0.979463, -0.0185683)
bones/39/rotation = Quaternion(0.0378594, 0.993477, 0.107354, -0.00667484)
bones/40/rotation = Quaternion(-0.0878853, 0.672977, -0.728199, -0.0954135)

[node name="Body" parent="PuppetBase/Skeleton" index="0"]
cast_shadow = 3
surface_material_override/0 = SubResource("StandardMaterial3D_tin5q")

[node name="Head" parent="PuppetBase/Skeleton" index="1"]
transform = Transform3D(0.999988, -0.00480906, 0.000592195, 0.00483673, 0.99802, -0.062706, -0.000289466, 0.0627081, 0.998032, -0.000784319, 1.57367, -0.0414836)

[node name="HeadArea" parent="PuppetBase/Skeleton/Head" index="0"]
collision_layer = 4

[node name="Neck" parent="PuppetBase/Skeleton" index="2"]
transform = Transform3D(0.999999, -0.00158684, 0.000156612, 0.00158973, 0.999786, -0.020631, -0.00012384, 0.0206312, 0.999787, 0.00172962, 1.45508, -0.0246701)

[node name="NeckArea" parent="PuppetBase/Skeleton/Neck" index="0"]
collision_layer = 4

[node name="Chest" parent="PuppetBase/Skeleton" index="3"]
transform = Transform3D(0.999999, -0.00158684, 0.000156612, 0.00158973, 0.999786, -0.020631, -0.00012384, 0.0206312, 0.999787, 7.13331e-10, 1.13233, -0.0868668)

[node name="ChestArea" parent="PuppetBase/Skeleton/Chest" index="0"]
collision_layer = 4

[node name="Stomach" parent="PuppetBase/Skeleton" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.61994e-09, 0.894159, -0.0641973)

[node name="StomachArea" parent="PuppetBase/Skeleton/Stomach" index="0"]
collision_layer = 4

[node name="R_UpperArm" parent="PuppetBase/Skeleton" index="5"]
transform = Transform3D(0.194793, -0.835519, -0.513775, -0.328823, 0.437868, -0.836748, 0.924084, 0.331933, -0.189445, 0.194551, 1.39433, -0.0343077)

[node name="R_UpperArmArea" parent="PuppetBase/Skeleton/R_UpperArm" index="0"]
collision_layer = 4

[node name="R_Forearm" parent="PuppetBase/Skeleton" index="6"]
transform = Transform3D(0.695911, -0.642386, 0.321011, 0.376478, -0.0543081, -0.924833, 0.611533, 0.764455, 0.204051, 0.22928, 1.24563, -0.176528)

[node name="R_ForearmArea" parent="PuppetBase/Skeleton/R_Forearm" index="0"]
collision_layer = 4

[node name="R_Hand" parent="PuppetBase/Skeleton" index="7"]
transform = Transform3D(-0.219541, -0.165302, -0.961497, -0.963385, 0.192222, 0.186924, 0.153922, 0.967329, -0.201451, 0.174777, 1.37755, -0.32408)

[node name="R_HandArea" parent="PuppetBase/Skeleton/R_Hand" index="0"]
collision_layer = 4

[node name="L_UpperArm" parent="PuppetBase/Skeleton" index="8"]
transform = Transform3D(0.227343, 0.85257, 0.470573, -0.659125, 0.490433, -0.570115, -0.716847, -0.180555, 0.673446, -0.19537, 1.39371, -0.0342595)

[node name="L_UpperArmArea" parent="PuppetBase/Skeleton/L_UpperArm" index="0"]
collision_layer = 4

[node name="L_Forearm" parent="PuppetBase/Skeleton" index="9"]
transform = Transform3D(0.461019, 0.862898, -0.207047, -0.53787, 0.457299, 0.708219, 0.705803, -0.215138, 0.67495, -0.235812, 1.19833, 0.0268691)

[node name="L_ForearmArea" parent="PuppetBase/Skeleton/L_Forearm" index="0"]
collision_layer = 4

[node name="L_Hand" parent="PuppetBase/Skeleton" index="10"]
transform = Transform3D(-0.223053, 0.266852, 0.93757, -0.775779, 0.533798, -0.336492, -0.590266, -0.802402, 0.0879529, -0.237808, 0.997142, -0.0139298)

[node name="L_HandArea" parent="PuppetBase/Skeleton/L_Hand" index="0"]
collision_layer = 4

[node name="R_Thigh" parent="PuppetBase/Skeleton" index="11"]
transform = Transform3D(-0.963757, -0.00365174, 0.266758, -0.0763996, -0.95425, -0.289084, 0.255609, -0.298987, 0.919386, 0.0851499, 0.87667, -0.0593682)

[node name="R_ThighArea" parent="PuppetBase/Skeleton/R_Thigh" index="0"]
collision_layer = 4

[node name="R_Shin" parent="PuppetBase/Skeleton" index="12"]
transform = Transform3D(0.966345, -0.0206702, -0.256418, -0.000425893, -0.996894, 0.0787559, -0.25725, -0.0759962, -0.963352, 0.110426, 0.487291, -0.215189)

[node name="R_ShinArea" parent="PuppetBase/Skeleton/R_Shin" index="0"]
collision_layer = 4

[node name="R_Foot" parent="PuppetBase/Skeleton" index="13"]
transform = Transform3D(-1, -2.98023e-08, -4.47035e-07, -4.24683e-07, 3.72529e-07, 1, -5.96046e-08, 1, -4.54485e-07, 0.11946, 0.113836, -0.180126)

[node name="R_FootArea" parent="PuppetBase/Skeleton/R_Foot" index="0"]
collision_layer = 4

[node name="L_Thigh" parent="PuppetBase/Skeleton" index="14"]
transform = Transform3D(-0.960502, 0.0110952, -0.278053, -0.0584672, -0.984947, 0.162666, -0.272063, 0.172497, 0.946692, -0.0851499, 0.87667, -0.0593682)

[node name="L_ThighArea" parent="PuppetBase/Skeleton/L_Thigh" index="0"]
collision_layer = 4

[node name="L_Shin" parent="PuppetBase/Skeleton" index="15"]
transform = Transform3D(0.961213, 0.0145809, 0.275421, 0.0771746, -0.972931, -0.21783, 0.264789, 0.230637, -0.936319, -0.106931, 0.458992, -0.0193009)

[node name="L_ShinArea" parent="PuppetBase/Skeleton/L_Shin" index="0"]
collision_layer = 4

[node name="L_Foot" parent="PuppetBase/Skeleton" index="16"]
transform = Transform3D(-1, -1.78814e-07, 1.86265e-08, 1.49012e-08, -1.93715e-07, 1, -1.78814e-07, 1, 2.5332e-07, -0.119461, 0.113828, 0.127276)

[node name="L_FootArea" parent="PuppetBase/Skeleton/L_Foot" index="0"]
collision_layer = 4

[connection signal="finished_reloading" from="Weapons/Pistol" to="." method="_update_UI"]
[connection signal="finished_reloading" from="Weapons/Rifle" to="." method="_update_UI"]

[editable path="Weapons/Pistol"]
[editable path="Weapons/Pistol/Mesh"]
[editable path="Weapons/Rifle"]
[editable path="PuppetBase"]
