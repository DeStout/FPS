[gd_scene load_steps=6 format=3 uid="uid://2iouko1meib4"]

[ext_resource type="PackedScene" uid="uid://1s5qidco641t" path="res://Characters/CharacterBase.tscn" id="1_hyo3r"]
[ext_resource type="Script" path="res://Characters/SimpleEnemy.gd" id="2_pfq3h"]
[ext_resource type="PackedScene" uid="uid://cy12nf62sv60i" path="res://Debug/VectorCube.tscn" id="3_knmbc"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_0bpq3"]
albedo_color = Color(0.372549, 0.376471, 0.784314, 1)

[sub_resource type="BoxMesh" id="BoxMesh_m0eni"]
material = SubResource("StandardMaterial3D_0bpq3")
size = Vector3(0.3, 0.3, 0.3)

[node name="Enemy" instance=ExtResource("1_hyo3r")]
script = ExtResource("2_pfq3h")

[node name="NameLabel" type="Label3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.9756, 0)
billboard = 1
text = "Enemy"

[node name="NavAgent" type="NavigationAgent3D" parent="." index="1"]
target_desired_distance = 3.0

[node name="NavTarget" type="Marker3D" parent="." index="2"]
top_level = true
visible = false

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavTarget" index="0"]
mesh = SubResource("BoxMesh_m0eni")

[node name="PlayerCast" type="RayCast3D" parent="." index="4"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)
target_position = Vector3(0, 0, -1)
collision_mask = 3
debug_shape_custom_color = Color(0, 0.54902, 0.282353, 1)

[node name="Weapons" parent="." index="5"]
transform = Transform3D(0.852761, -0.0731746, 0.51715, -0.227167, 0.839619, 0.493392, -0.470312, -0.538225, 0.699371, 0.165739, 1.44422, -0.375498)

[node name="VectorCube" parent="AimHelper" index="0" instance=ExtResource("3_knmbc")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
visible = false

[node name="ShootCast" parent="AimHelper" index="2"]
visible = false
collision_mask = 13

[node name="Skeleton3D" parent="Puppet" index="2"]
bones/1/position = Vector3(-1.1963e-09, 0.887651, -0.0641973)
bones/2/rotation = Quaternion(-0.137742, 0.000834557, 0.00287431, 0.990464)
bones/4/rotation = Quaternion(0.0882914, 0.0132142, 0.0184465, 0.995836)
bones/5/rotation = Quaternion(-0.0156143, -8.76449e-05, -0.000520254, 0.999878)
bones/7/rotation = Quaternion(-0.180185, 0.25062, -0.494793, 0.812344)
bones/8/rotation = Quaternion(0.260954, 0.0351934, -0.0508087, 0.963371)
bones/9/rotation = Quaternion(-0.0224441, -0.333647, -0.00985208, 0.942379)
bones/11/rotation = Quaternion(-0.138648, -0.0287635, 0.154623, 0.977774)
bones/14/rotation = Quaternion(0.0626333, -0.170931, -0.0834804, 0.97974)
bones/17/rotation = Quaternion(-0.312157, -0.0319002, 0.262322, 0.912539)
bones/20/rotation = Quaternion(0.181405, 0.103341, 0.51904, 0.828861)
bones/21/rotation = Quaternion(0.704868, -0.0254018, 0.137247, 0.695471)
bones/22/rotation = Quaternion(0.163858, 0.239697, -0.0529555, 0.955454)
bones/24/rotation = Quaternion(-0.140674, 0.0466556, -0.145723, 0.978161)
bones/25/rotation = Quaternion(-0.0669843, 0.00905462, 0.0309024, 0.997234)
bones/27/rotation = Quaternion(0.100521, 0.158195, 0.110532, 0.976039)
bones/28/rotation = Quaternion(0.0819316, -0.137998, -0.0583579, 0.985311)
bones/30/rotation = Quaternion(-0.535493, -0.390223, 0.595987, 0.453622)
bones/33/rotation = Quaternion(-0.581877, 0.208138, -0.181884, 0.764864)
bones/34/rotation = Quaternion(-0.107905, 0.00384064, 0.16532, 0.980312)
bones/35/rotation = Quaternion(0.273537, -0.129719, -0.642119, 0.704296)
bones/38/rotation = Quaternion(-0.520966, -0.050781, 0.342407, 0.780239)
bones/39/rotation = Quaternion(-0.145734, -0.00377588, -0.223277, 0.963792)
bones/40/rotation = Quaternion(0.227938, 0.127412, 0.526118, 0.809327)

[node name="Head" parent="Puppet/Skeleton3D" index="1"]
transform = Transform3D(-0.999996, -0.0027305, 0.000374909, -0.00274966, 0.979087, -0.203422, 0.000188376, -0.203422, -0.979091, -0.000446447, 1.56743, -0.0459016)

[node name="HeadArea" parent="Puppet/Skeleton3D/Head" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Neck" parent="Puppet/Skeleton3D" index="2"]
transform = Transform3D(-0.999999, -0.00167982, 0.00026847, -0.00169601, 0.97226, -0.233895, 0.000131879, -0.233895, -0.972262, -0.000338626, 1.50502, -0.0308888)

[node name="NeckArea" parent="Puppet/Skeleton3D/Neck" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Chest" parent="Puppet/Skeleton3D" index="3"]
transform = Transform3D(-0.999982, 0.00592381, -0.000861746, 0.00567102, 0.983563, 0.180475, 0.00191668, 0.180467, -0.983579, -2.1029e-09, 1.12582, -0.0868667)

[node name="ChestArea" parent="Puppet/Skeleton3D/Chest" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Stomach" parent="Puppet/Skeleton3D" index="4"]
transform = Transform3D(-1, -3.78941e-09, -3.89234e-07, 3.31093e-08, 0.995501, -0.0947544, 3.87842e-07, -0.0947544, -0.995501, -1.1963e-09, 0.887651, -0.0641973)

[node name="StomachArea" parent="Puppet/Skeleton3D/Stomach" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_UpperArm" parent="Puppet/Skeleton3D" index="5"]
transform = Transform3D(0.98737, 0.154416, -0.0354504, 0.139786, -0.743753, 0.653675, 0.0745717, -0.650375, -0.755944, 0.194728, 1.38814, -0.0366311)

[node name="R_UpperArmArea" parent="Puppet/Skeleton3D/R_UpperArm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Forearm" parent="Puppet/Skeleton3D" index="6"]
transform = Transform3D(0.964735, -0.263199, 0.00350272, 0.168559, 0.627951, 0.75978, -0.202173, -0.732396, 0.650171, 0.22695, 1.23294, -0.172346)

[node name="R_ForearmArea" parent="Puppet/Skeleton3D/R_Forearm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Hand" parent="Puppet/Skeleton3D" index="7"]
transform = Transform3D(0.852761, -0.0731749, 0.51715, -0.227167, 0.839618, 0.493393, -0.470312, -0.538225, 0.699371, 0.172917, 1.36186, -0.322703)

[node name="R_HandArea" parent="Puppet/Skeleton3D/R_Hand" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_UpperArm" parent="Puppet/Skeleton3D" index="8"]
transform = Transform3D(0.977943, -0.187651, 0.0917313, -0.151686, -0.939959, -0.305726, 0.143594, 0.285069, -0.94769, -0.195194, 1.38779, -0.0366037)

[node name="L_UpperArmArea" parent="Puppet/Skeleton3D/L_UpperArm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Forearm" parent="Puppet/Skeleton3D" index="9"]
transform = Transform3D(0.976742, -0.00163344, 0.214412, -0.0469361, -0.977348, 0.20637, 0.209218, -0.211634, -0.954693, -0.234352, 1.19165, 0.0228821)

[node name="L_ForearmArea" parent="Puppet/Skeleton3D/L_Forearm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Hand" parent="Puppet/Skeleton3D" index="10"]
transform = Transform3D(0.894022, 0.0234736, -0.447408, 0.0968994, -0.985121, 0.141942, -0.437419, -0.170253, -0.882994, -0.234687, 0.991004, -0.0205649)

[node name="L_HandArea" parent="Puppet/Skeleton3D/L_Hand" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Thigh" parent="Puppet/Skeleton3D" index="11"]
transform = Transform3D(0.488382, 0.0625741, 0.870384, -0.321434, -0.914394, 0.246098, 0.811273, -0.399961, -0.42646, 0.0851499, 0.870162, -0.0593682)

[node name="R_ThighArea" parent="Puppet/Skeleton3D/R_Thigh" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Shin" parent="Puppet/Skeleton3D" index="12"]
transform = Transform3D(0.475789, 0.0213712, 0.8793, 0.120966, -0.991795, -0.0413491, 0.871201, 0.126039, -0.474471, 0.111441, 0.48597, -0.227416)

[node name="R_ShinArea" parent="Puppet/Skeleton3D/R_Shin" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Foot" parent="Puppet/Skeleton3D" index="13"]
transform = Transform3D(0.245938, 0.072077, 0.966602, -0.853541, -0.456466, 0.251208, 0.459327, -0.886817, -0.0507414, 0.11946, 0.113842, -0.180125)

[node name="R_FootArea" parent="Puppet/Skeleton3D/R_Foot" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Thigh" parent="Puppet/Skeleton3D" index="14"]
transform = Transform3D(0.498466, -0.05456, -0.865191, -0.0745412, -0.997019, 0.0199275, -0.863699, 0.0545591, -0.501047, -0.0851499, 0.870162, -0.0593682)

[node name="L_ThighArea" parent="Puppet/Skeleton3D/L_Thigh" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Shin" parent="Puppet/Skeleton3D" index="15"]
transform = Transform3D(0.490948, -0.0303462, -0.87066, -0.393663, -0.89927, -0.190635, -0.777174, 0.436339, -0.453441, -0.108074, 0.451254, -0.0364447)

[node name="L_ShinArea" parent="Puppet/Skeleton3D/L_Shin" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Foot" parent="Puppet/Skeleton3D" index="16"]
transform = Transform3D(0.245938, -0.0720773, -0.966602, 0.853542, -0.456465, 0.251209, -0.459327, -0.886817, -0.0507411, -0.11946, 0.113842, 0.127273)

[node name="L_FootArea" parent="Puppet/Skeleton3D/L_Foot" index="0"]
collision_layer = 8
collision_mask = 1

[node name="PlayerTimer" type="Timer" parent="." index="9"]
wait_time = 3.0
one_shot = true

[node name="StuckTimer" type="Timer" parent="." index="10"]
wait_time = 3.0
one_shot = true

[node name="ShootTimer" type="Timer" parent="." index="11"]
one_shot = true

[connection signal="timeout" from="PlayerTimer" to="." method="_player_lost"]
[connection signal="timeout" from="StuckTimer" to="." method="_stuck"]

[editable path="Weapons/Pistol"]
[editable path="Weapons/Pistol/Mesh"]
[editable path="Weapons/SMG"]
[editable path="Weapons/SMG/Mesh"]
[editable path="Weapons/Rifle"]
[editable path="Weapons/Shotgun"]
[editable path="Puppet"]
