[gd_scene load_steps=16 format=3 uid="uid://1s5qidco641t"]

[ext_resource type="Script" path="res://Characters/CharacterBase.gd" id="1_bax7o"]
[ext_resource type="PackedScene" uid="uid://ckqtvo1inhvtn" path="res://Props/Weapons/Slapper/Slapper.tscn" id="2_26305"]
[ext_resource type="PackedScene" uid="uid://bwie7ixf4v1vw" path="res://Props/Weapons/Pistol/Pistol.tscn" id="3_c6pft"]
[ext_resource type="PackedScene" uid="uid://bhxw75oi8yofw" path="res://Props/Weapons/Rifle/Rifle.tscn" id="4_7rqvl"]
[ext_resource type="Script" path="res://Characters/Voice.gd" id="4_8ihun"]
[ext_resource type="PackedScene" uid="uid://dh23vd3s1cpss" path="res://Props/Weapons/SMG/SMG.tscn" id="4_bxvtu"]
[ext_resource type="PackedScene" uid="uid://barsvh0ntyosw" path="res://Props/Weapons/Shotgun/Shotgun.tscn" id="5_gqd55"]
[ext_resource type="AudioStream" uid="uid://dvwslqt03fwb6" path="res://Props/Weapons/Slapper/Slap.ogg" id="5_tm5o4"]
[ext_resource type="PackedScene" uid="uid://bj70y5rv73685" path="res://Characters/PuppetBase.tscn" id="6_7o0ro"]
[ext_resource type="AudioStream" uid="uid://b56r0e1ges6xc" path="res://Characters/Audio/footstep1.ogg" id="9_4go11"]
[ext_resource type="Script" path="res://RandomAudio.gd" id="9_druge"]
[ext_resource type="AudioStream" uid="uid://doju4xf4dtgt" path="res://Characters/Audio/footstep2.ogg" id="10_i4x8w"]
[ext_resource type="AudioStream" uid="uid://brbwtdst5aopq" path="res://Characters/Audio/footstep3.ogg" id="11_ccipe"]
[ext_resource type="AudioStream" uid="uid://cxbr801up84rw" path="res://Characters/Audio/footstep4.ogg" id="12_hl0ln"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_5yxej"]
radius = 0.35
height = 1.8

[node name="CharacterBase" type="CharacterBody3D" groups=["players"]]
collision_layer = 2
collision_mask = 3
platform_floor_layers = 4278190080
script = ExtResource("1_bax7o")

[node name="Collision" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.875, 0)
shape = SubResource("CapsuleShape3D_5yxej")

[node name="Weapons" type="Node3D" parent="."]
transform = Transform3D(0.842986, -0.074121, 0.532805, -0.259015, 0.812161, 0.522787, -0.471473, -0.578706, 0.665442, 0.168598, 1.46488, -0.382107)

[node name="Slapper" parent="Weapons" instance=ExtResource("2_26305")]
transform = Transform3D(-0.224442, -0.501342, 0.835634, -0.399893, 0.829368, 0.390176, -0.888659, -0.246592, -0.386628, 0.00662899, -0.0015403, 0.0135412)
visible = false

[node name="Pistol" parent="Weapons" instance=ExtResource("3_c6pft")]
transform = Transform3D(0.907643, -0.419078, 0.0236713, 0.0267876, 0.00155281, -0.99964, 0.41889, 0.90795, 0.0126354, -0.0382926, -0.0126591, 0.00222373)
visible = false

[node name="SMG" parent="Weapons" instance=ExtResource("4_bxvtu")]
transform = Transform3D(0.898794, -0.438371, 1.11759e-08, 9.31323e-09, -4.48199e-08, -1, 0.438371, 0.898794, -3.81842e-08, -0.033591, -0.0112215, -0.00850368)
visible = false

[node name="Rifle" parent="Weapons" instance=ExtResource("4_7rqvl")]
transform = Transform3D(0.873686, -0.485679, 0.0280673, 0.0243102, -0.0140355, -0.999606, 0.485882, 0.874024, -0.000455644, -0.0376089, -0.0336642, 0.0125195)
visible = false

[node name="Shotgun" parent="Weapons" instance=ExtResource("5_gqd55")]
transform = Transform3D(0.877343, -0.479192, 0.0253764, 0.0240809, -0.00885019, -0.999671, 0.479259, 0.877665, 0.00377468, -0.044263, -0.00856596, 0.0186746)
visible = false

[node name="AimHelper" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)

[node name="Camera" type="Camera3D" parent="AimHelper"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 0.97237, 0.233445, 0, -0.233445, 0.97237, 0, 0.5, 0.75)
cull_mask = 1048551

[node name="ShootCast" type="RayCast3D" parent="AimHelper"]
unique_name_in_owner = true
target_position = Vector3(0, 0, -999)
collision_mask = 9
hit_back_faces = false
collide_with_areas = true

[node name="Puppet" parent="." instance=ExtResource("6_7o0ro")]

[node name="Skeleton3D" parent="Puppet" index="2"]
bones/1/position = Vector3(-8.81538e-10, 0.897158, -0.0641973)
bones/2/rotation = Quaternion(-0.143558, 0.000914027, 0.00241984, 0.989639)
bones/4/rotation = Quaternion(0.0825188, 0.0131073, 0.0180869, 0.996339)
bones/5/rotation = Quaternion(-0.0233068, -0.000148462, -0.00110772, 0.999728)
bones/7/rotation = Quaternion(-0.1897, 0.259233, -0.48819, 0.811469)
bones/8/rotation = Quaternion(0.256794, 0.0352129, -0.0500067, 0.964529)
bones/9/rotation = Quaternion(-0.00567929, -0.3348, -0.0190279, 0.94208)
bones/11/rotation = Quaternion(-0.137414, -0.0284387, 0.158092, 0.977403)
bones/14/rotation = Quaternion(0.0637963, -0.171916, -0.0805346, 0.979739)
bones/17/rotation = Quaternion(-0.303788, -0.0306335, 0.278712, 0.910546)
bones/20/rotation = Quaternion(0.202696, 0.119445, 0.507478, 0.828923)
bones/21/rotation = Quaternion(0.694344, -0.0257995, 0.135198, 0.706358)
bones/22/rotation = Quaternion(0.126953, 0.269473, -0.0658024, 0.952333)
bones/24/rotation = Quaternion(-0.129792, 0.0432726, -0.136189, 0.98119)
bones/25/rotation = Quaternion(-0.0597773, 0.014522, 0.0211269, 0.997882)
bones/27/rotation = Quaternion(0.0951625, 0.161149, 0.105288, 0.976673)
bones/28/rotation = Quaternion(0.0978341, -0.128163, -0.0755096, 0.984023)
bones/30/rotation = Quaternion(-0.520387, -0.383825, 0.592264, 0.480727)
bones/33/rotation = Quaternion(-0.590302, 0.229099, -0.155351, 0.758237)
bones/34/rotation = Quaternion(-0.0655299, 0.0038909, 0.100397, 0.992779)
bones/35/rotation = Quaternion(0.261813, -0.135164, -0.61289, 0.733179)
bones/38/rotation = Quaternion(-0.530687, -0.0671366, 0.325038, 0.779881)
bones/39/rotation = Quaternion(-0.117852, -0.00382554, -0.18056, 0.97647)
bones/40/rotation = Quaternion(0.219107, 0.130374, 0.505787, 0.82412)

[node name="Head" parent="Puppet/Skeleton3D" index="1"]
transform = Transform3D(-0.999984, -0.00569061, 0.000516408, -0.00569766, 0.986215, -0.165369, 0.000431765, -0.165369, -0.986232, -0.000897561, 1.57659, -0.0399901)

[node name="Neck" parent="Puppet/Skeleton3D" index="2"]
transform = Transform3D(-0.999994, -0.00345247, 0.00043256, -0.00346597, 0.977448, -0.21115, 0.000306185, -0.21115, -0.977454, -0.000675961, 1.51385, -0.0264372)

[node name="Chest" parent="Puppet/Skeleton3D" index="3"]
transform = Transform3D(-0.999987, 0.00505207, -0.00111471, 0.00474402, 0.98138, 0.192018, 0.00206405, 0.19201, -0.981391, -1.78813e-09, 1.13533, -0.0868667)

[node name="Stomach" parent="Puppet/Skeleton3D" index="4"]
transform = Transform3D(-1, -3.78941e-09, -3.89234e-07, 3.31093e-08, 0.995501, -0.0947544, 3.87842e-07, -0.0947544, -0.995501, -8.81538e-10, 0.897158, -0.0641973)

[node name="R_UpperArm" parent="Puppet/Skeleton3D" index="5"]
transform = Transform3D(0.983871, 0.173215, -0.0446573, 0.154334, -0.695778, 0.70148, 0.0904351, -0.697058, -0.711288, 0.194495, 1.39722, -0.0335682)

[node name="R_Forearm" parent="Puppet/Skeleton3D" index="6"]
transform = Transform3D(0.96346, -0.266795, -0.0237943, 0.197792, 0.648736, 0.734861, -0.180621, -0.712715, 0.677801, 0.23064, 1.25203, -0.179025)

[node name="R_Hand" parent="Puppet/Skeleton3D" index="7"]
transform = Transform3D(0.842985, -0.0741218, 0.532806, -0.259016, 0.812159, 0.522789, -0.471473, -0.578708, 0.66544, 0.175869, 1.38521, -0.325341)

[node name="GunTransform" parent="Puppet/Skeleton3D/R_Hand" index="1"]
transform = Transform3D(1, 0, 2.98023e-08, 0, 1, -2.98023e-08, 5.96046e-08, 0, 1, 0, 0.0980922, -5.96046e-08)
remote_path = NodePath("../../../../Weapons")

[node name="L_UpperArm" parent="Puppet/Skeleton3D" index="8"]
transform = Transform3D(0.97628, -0.197287, 0.0891954, -0.15936, -0.93364, -0.320811, 0.146568, 0.298987, -0.942934, -0.195426, 1.39651, -0.0335134)

[node name="L_Forearm" parent="Puppet/Skeleton3D" index="9"]
transform = Transform3D(0.97609, -0.0145766, 0.216878, -0.054957, -0.981882, 0.181349, 0.210305, -0.188932, -0.959206, -0.236594, 1.20169, 0.0288769)

[node name="L_Hand" parent="Puppet/Skeleton3D" index="10"]
transform = Transform3D(0.893886, 0.0245837, -0.447621, 0.103308, -0.982917, 0.152321, -0.436229, -0.1824, -0.881155, -0.239587, 1.00011, -0.00990938)

[node name="R_Thigh" parent="Puppet/Skeleton3D" index="11"]
transform = Transform3D(0.486481, 0.0586589, 0.87172, -0.281574, -0.933982, 0.219986, 0.827075, -0.352473, -0.437847, 0.0851499, 0.879669, -0.0593682)

[node name="R_Shin" parent="Puppet/Skeleton3D" index="12"]
transform = Transform3D(0.477726, 0.0257586, 0.878131, 0.0763015, -0.997009, -0.0122643, 0.875189, 0.0728618, -0.478263, 0.109796, 0.487247, -0.207463)

[node name="R_Foot" parent="Puppet/Skeleton3D" index="13"]
transform = Transform3D(0.245939, 0.0720784, 0.966602, -0.853541, -0.456466, 0.251211, 0.459328, -0.886816, -0.0507411, 0.119461, 0.113162, -0.180125)

[node name="L_Thigh" parent="Puppet/Skeleton3D" index="14"]
transform = Transform3D(0.496142, -0.0499219, -0.866805, -0.133285, -0.990891, -0.0192215, -0.85795, 0.125069, -0.498276, -0.0851499, 0.879669, -0.0593682)

[node name="L_Shin" parent="Puppet/Skeleton3D" index="15"]
transform = Transform3D(0.494301, -0.0355368, -0.868564, -0.327216, -0.933282, -0.148034, -0.805355, 0.357382, -0.47295, -0.106125, 0.463336, -0.00681927)

[node name="L_Foot" parent="Puppet/Skeleton3D" index="16"]
transform = Transform3D(0.245936, -0.0720725, -0.966603, 0.853543, -0.456466, 0.251205, -0.459326, -0.886817, -0.0507444, -0.119459, 0.113162, 0.127273)

[node name="DmgLbl" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.88315, 0)

[node name="Voice" type="Node3D" parent="."]
script = ExtResource("4_8ihun")

[node name="Slapped" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("5_tm5o4")
bus = &"SFX"

[node name="Footsteps" type="Node3D" parent="."]
script = ExtResource("9_druge")

[node name="Footsteps1" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("9_4go11")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[node name="Footsteps2" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("10_i4x8w")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[node name="Footsteps3" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("11_ccipe")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[node name="Footsteps4" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("12_hl0ln")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[connection signal="take_damage" from="Puppet/Skeleton3D/Head/HeadArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/Neck/NeckArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/Chest/ChestArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/Stomach/StomachArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_UpperArm/R_UpperArmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Forearm/R_ForearmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Hand/R_HandArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_UpperArm/L_UpperArmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Forearm/L_ForearmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Hand/L_HandArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Thigh/R_ThighArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Shin/R_ShinArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Foot/R_FootArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Thigh/L_ThighArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Shin/L_ShinArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Foot/L_FootArea" to="." method="take_damage"]

[editable path="Weapons/Pistol"]
[editable path="Weapons/Pistol/Mesh"]
[editable path="Weapons/SMG"]
[editable path="Weapons/SMG/Mesh"]
[editable path="Weapons/Rifle"]
[editable path="Weapons/Shotgun"]
[editable path="Puppet"]
