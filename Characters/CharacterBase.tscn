[gd_scene load_steps=25 format=3 uid="uid://1s5qidco641t"]

[ext_resource type="Script" path="res://Characters/CharacterBase.gd" id="1_bax7o"]
[ext_resource type="PackedScene" uid="uid://ckqtvo1inhvtn" path="res://Props/Weapons/Slapper/Slapper.tscn" id="2_26305"]
[ext_resource type="PackedScene" uid="uid://bwie7ixf4v1vw" path="res://Props/Weapons/Pistol/Pistol.tscn" id="3_c6pft"]
[ext_resource type="PackedScene" uid="uid://bhxw75oi8yofw" path="res://Props/Weapons/Rifle/Rifle.tscn" id="4_7rqvl"]
[ext_resource type="Script" path="res://Characters/Voice.gd" id="4_8ihun"]
[ext_resource type="PackedScene" uid="uid://dh23vd3s1cpss" path="res://Props/Weapons/SMG/SMG.tscn" id="4_bxvtu"]
[ext_resource type="PackedScene" uid="uid://barsvh0ntyosw" path="res://Props/Weapons/Shotgun/Shotgun.tscn" id="5_gqd55"]
[ext_resource type="AudioStream" uid="uid://dvwslqt03fwb6" path="res://Props/Weapons/Slapper/Slap.ogg" id="5_tm5o4"]
[ext_resource type="PackedScene" uid="uid://bj70y5rv73685" path="res://Characters/PuppetBase.tscn" id="6_7o0ro"]
[ext_resource type="AudioStream" uid="uid://b56r0e1ges6xc" path="res://Characters/Audio/footstep1.ogg" id="9_4go11"]
[ext_resource type="Script" path="res://RandomAudio.gd" id="9_druge"]
[ext_resource type="AudioStream" uid="uid://doju4xf4dtgt" path="res://Characters/Audio/footstep2.ogg" id="10_i4x8w"]
[ext_resource type="AudioStream" uid="uid://cxbr801up84rw" path="res://Characters/Audio/footstep4.ogg" id="12_hl0ln"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_5yxej"]
radius = 0.35
height = 1.8

[sub_resource type="Curve" id="Curve_2ehja"]
_data = [Vector2(0, 1), 0.0, -6.32314, 0, 0, Vector2(0.245675, 0.28892), -1.03416, -1.03416, 0, 0, Vector2(1, 0.0063113), -0.580105, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_lu4fp"]
curve = SubResource("Curve_2ehja")

[sub_resource type="Curve" id="Curve_13y3a"]
max_value = 200.0
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_rfhwa"]
curve = SubResource("Curve_13y3a")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_lnvyr"]
particle_flag_align_y = true
direction = Vector3(0, 0, -1)
spread = 1.0
initial_velocity_min = 5.0
initial_velocity_max = 7.0
gravity = Vector3(0, 0, 0)
anim_speed_curve = SubResource("CurveTexture_rfhwa")
anim_offset_curve = SubResource("CurveTexture_lu4fp")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_pclso"]
emission_enabled = true
emission = Color(1, 0.721569, 0, 1)
emission_energy_multiplier = 16.0

[sub_resource type="CapsuleMesh" id="CapsuleMesh_y04xt"]
material = SubResource("StandardMaterial3D_pclso")
radius = 0.005
height = 0.03
radial_segments = 4
rings = 4

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_pqq4k"]
particle_flag_align_y = true
angle_min = 30.0
angle_max = 60.0
direction = Vector3(0, 0, -1)
spread = 85.0
initial_velocity_min = 0.1
initial_velocity_max = 0.2
gravity = Vector3(0, 0, 0)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_2l257"]
albedo_color = Color(1, 0.87451, 0.819608, 1)
emission_enabled = true
emission = Color(1, 0.392157, 0.403922, 1)
emission_energy_multiplier = 16.0

[sub_resource type="CylinderMesh" id="CylinderMesh_7tk3c"]
material = SubResource("StandardMaterial3D_2l257")
top_radius = 0.01
bottom_radius = 0.005
height = 0.05
radial_segments = 4
rings = 1

[node name="CharacterBase" type="CharacterBody3D" groups=["players"]]
collision_layer = 2
collision_mask = 3
platform_floor_layers = 4278190080
script = ExtResource("1_bax7o")

[node name="Collision" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.875, 0)
shape = SubResource("CapsuleShape3D_5yxej")

[node name="Weapons" type="Node3D" parent="."]
transform = Transform3D(0.851922, -0.0731067, 0.518541, -0.230274, 0.837035, 0.496332, -0.470322, -0.542243, 0.696254, 0.166033, 1.44637, -0.376121)

[node name="Slapper" parent="Weapons" instance=ExtResource("2_26305")]
transform = Transform3D(-0.224442, -0.501342, 0.835634, -0.399893, 0.829368, 0.390176, -0.888659, -0.246592, -0.386628, 0.00662899, -0.0015403, 0.0135412)
visible = false

[node name="Pistol" parent="Weapons" instance=ExtResource("3_c6pft")]
transform = Transform3D(0.907643, -0.419078, 0.0236713, 0.0267876, 0.00155281, -0.99964, 0.41889, 0.90795, 0.0126354, -0.0382926, -0.0126591, 0.00222373)
visible = false

[node name="MuzzleFlash1" parent="Weapons/Pistol" index="4"]
visibility_range_end = 10.0
visibility_range_end_margin = 1.0
emitting = false
amount = 3
lifetime = 0.18
interp_to_end = 0.25
one_shot = true
explosiveness = 1.0
process_material = SubResource("ParticleProcessMaterial_lnvyr")
draw_pass_1 = SubResource("CapsuleMesh_y04xt")

[node name="MuzzleFlash2" parent="Weapons/Pistol" index="5"]
visibility_range_end = 10.0
visibility_range_end_margin = 1.0
emitting = false
amount = 15
lifetime = 0.14
one_shot = true
explosiveness = 1.0
process_material = SubResource("ParticleProcessMaterial_pqq4k")
draw_pass_1 = SubResource("CylinderMesh_7tk3c")

[node name="SMG" parent="Weapons" instance=ExtResource("4_bxvtu")]
transform = Transform3D(0.898794, -0.438371, 1.11759e-08, 9.31323e-09, -4.48199e-08, -1, 0.438371, 0.898794, -3.81842e-08, -0.033591, -0.0112215, -0.00850368)
visible = false

[node name="MuzzleFlash1" parent="Weapons/SMG" index="4"]
visibility_range_end = 10.0
visibility_range_end_margin = 1.0
emitting = false
amount = 3
lifetime = 0.18
interp_to_end = 0.25
one_shot = true
explosiveness = 1.0
process_material = SubResource("ParticleProcessMaterial_lnvyr")
draw_pass_1 = SubResource("CapsuleMesh_y04xt")

[node name="MuzzleFlash2" parent="Weapons/SMG" index="5"]
visibility_range_end = 10.0
visibility_range_end_margin = 1.0
emitting = false
amount = 15
lifetime = 0.14
one_shot = true
explosiveness = 1.0
process_material = SubResource("ParticleProcessMaterial_pqq4k")
draw_pass_1 = SubResource("CylinderMesh_7tk3c")

[node name="Rifle" parent="Weapons" instance=ExtResource("4_7rqvl")]
transform = Transform3D(0.873686, -0.485679, 0.0280673, 0.0243102, -0.0140355, -0.999606, 0.485882, 0.874024, -0.000455644, -0.0376089, -0.0336642, 0.0125195)
visible = false

[node name="MuzzleFlash1" parent="Weapons/Rifle" index="4"]
visibility_range_end = 10.0
visibility_range_end_margin = 1.0
emitting = false
amount = 3
lifetime = 0.18
interp_to_end = 0.25
one_shot = true
explosiveness = 1.0
process_material = SubResource("ParticleProcessMaterial_lnvyr")
draw_pass_1 = SubResource("CapsuleMesh_y04xt")

[node name="MuzzleFlash2" parent="Weapons/Rifle" index="5"]
visibility_range_end = 10.0
visibility_range_end_margin = 1.0
emitting = false
amount = 15
lifetime = 0.14
one_shot = true
explosiveness = 1.0
process_material = SubResource("ParticleProcessMaterial_pqq4k")
draw_pass_1 = SubResource("CylinderMesh_7tk3c")

[node name="Shotgun" parent="Weapons" instance=ExtResource("5_gqd55")]
transform = Transform3D(0.877343, -0.479192, 0.0253764, 0.0240809, -0.00885019, -0.999671, 0.479259, 0.877665, 0.00377468, -0.044263, -0.00856596, 0.0186746)
visible = false

[node name="MuzzleFlash1" parent="Weapons/Shotgun" index="4"]
visibility_range_end = 10.0
visibility_range_end_margin = 1.0
emitting = false
amount = 3
lifetime = 0.18
interp_to_end = 0.25
one_shot = true
explosiveness = 1.0
process_material = SubResource("ParticleProcessMaterial_lnvyr")
draw_pass_1 = SubResource("CapsuleMesh_y04xt")

[node name="MuzzleFlash2" parent="Weapons/Shotgun" index="5"]
visibility_range_end = 10.0
visibility_range_end_margin = 1.0
emitting = false
amount = 15
lifetime = 0.14
one_shot = true
explosiveness = 1.0
process_material = SubResource("ParticleProcessMaterial_pqq4k")
draw_pass_1 = SubResource("CylinderMesh_7tk3c")

[node name="AimHelper" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)

[node name="Camera" type="Camera3D" parent="AimHelper"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 0.97237, 0.233445, 0, -0.233445, 0.97237, 0, 0.5, 0.75)
cull_mask = 1048551

[node name="ShootCast" type="RayCast3D" parent="AimHelper"]
unique_name_in_owner = true
target_position = Vector3(0, 0, -999)
collision_mask = 9
hit_back_faces = false
collide_with_areas = true

[node name="Puppet" parent="." instance=ExtResource("6_7o0ro")]

[node name="Skeleton3D" parent="Puppet" index="2"]
bones/1/position = Vector3(-1.16311e-09, 0.888654, -0.0641973)
bones/2/rotation = Quaternion(-0.138414, 0.000843527, 0.00282172, 0.99037)
bones/4/rotation = Quaternion(0.0876962, 0.0131964, 0.018408, 0.99589)
bones/5/rotation = Quaternion(-0.0164163, -9.73369e-05, -0.000581449, 0.999865)
bones/7/rotation = Quaternion(-0.181175, 0.2515, -0.494118, 0.812263)
bones/8/rotation = Quaternion(0.260553, 0.0352057, -0.0507277, 0.963483)
bones/9/rotation = Quaternion(-0.0208659, -0.333762, -0.0107194, 0.942366)
bones/11/rotation = Quaternion(-0.138504, -0.0287253, 0.155028, 0.977731)
bones/12/rotation = Quaternion(-0.0728706, -0.00440988, -0.0389535, 0.996571)
bones/14/rotation = Quaternion(0.0627897, -0.171064, -0.0830845, 0.979741)
bones/15/rotation = Quaternion(0.0688573, 0.146545, 0.0441172, 0.985818)
bones/17/rotation = Quaternion(-0.311336, -0.0317863, 0.263938, 0.912357)
bones/18/rotation = Quaternion(-0.0645516, 0.0977242, -0.0941116, 0.988649)
bones/20/rotation = Quaternion(0.183482, 0.104949, 0.517951, 0.828883)
bones/21/rotation = Quaternion(0.703888, -0.0254394, 0.137056, 0.696499)
bones/22/rotation = Quaternion(0.160118, 0.242549, -0.0543566, 0.955289)
bones/24/rotation = Quaternion(-0.139607, 0.0463143, -0.144788, 0.978469)
bones/25/rotation = Quaternion(-0.0662867, 0.00959332, 0.0299526, 0.997305)
bones/27/rotation = Quaternion(0.0999645, 0.158499, 0.109989, 0.976108)
bones/28/rotation = Quaternion(0.0834842, -0.137014, -0.0600395, 0.985217)
bones/30/rotation = Quaternion(-0.534053, -0.389576, 0.595638, 0.456326)
bones/31/rotation = Quaternion(-0.291467, -0.110498, 0.336933, 0.888433)
bones/33/rotation = Quaternion(-0.58259, 0.209844, -0.179756, 0.764357)
bones/34/rotation = Quaternion(-0.10447, 0.00384551, 0.160058, 0.981556)
bones/35/rotation = Quaternion(0.2726, -0.130181, -0.639756, 0.706721)
bones/36/rotation = Quaternion(0.00495412, -0.00577786, -0.163837, 0.986458)
bones/38/rotation = Quaternion(-0.521864, -0.0522694, 0.340842, 0.780226)
bones/39/rotation = Quaternion(-0.143227, -0.00378081, -0.219436, 0.965049)
bones/40/rotation = Quaternion(0.227151, 0.127687, 0.524299, 0.810684)
bones/41/rotation = Quaternion(0.00495411, 0.00577787, 0.163837, 0.986458)

[node name="Head" parent="Puppet/Skeleton3D" index="1"]
transform = Transform3D(-0.999995, -0.00305008, 0.000416955, -0.00307199, 0.979924, -0.19935, 0.000199453, -0.199351, -0.979928, -0.000498096, 1.56839, -0.0452275)

[node name="Neck" parent="Puppet/Skeleton3D" index="2"]
transform = Transform3D(-0.999998, -0.00187521, 0.000303121, -0.00189446, 0.972854, -0.231413, 0.000139056, -0.231413, -0.972856, -0.000377734, 1.50595, -0.0303741)

[node name="Chest" parent="Puppet/Skeleton3D" index="3"]
transform = Transform3D(-0.999983, 0.00582271, -0.000890052, 0.00556385, 0.983318, 0.18181, 0.00193383, 0.181802, -0.983333, -2.06971e-09, 1.12682, -0.0868667)

[node name="Stomach" parent="Puppet/Skeleton3D" index="4"]
transform = Transform3D(-1, -3.78941e-09, -3.89234e-07, 3.31093e-08, 0.995501, -0.0947544, 3.87842e-07, -0.0947544, -0.995501, -1.16311e-09, 0.888654, -0.0641973)

[node name="R_UpperArm" parent="Puppet/Skeleton3D" index="5"]
transform = Transform3D(0.987052, 0.156254, -0.0362456, 0.141185, -0.739076, 0.658661, 0.07613, -0.65525, -0.751567, 0.194701, 1.3891, -0.0362769)

[node name="R_Forearm" parent="Puppet/Skeleton3D" index="6"]
transform = Transform3D(0.96465, -0.263533, 0.000886644, 0.171489, 0.630274, 0.757197, -0.200105, -0.730278, 0.653187, 0.227306, 1.23487, -0.173009)

[node name="R_Hand" parent="Puppet/Skeleton3D" index="7"]
transform = Transform3D(0.851922, -0.0731067, 0.518541, -0.230274, 0.837035, 0.496332, -0.470322, -0.542243, 0.696254, 0.173205, 1.36426, -0.322931)

[node name="GunTransform" parent="Puppet/Skeleton3D/R_Hand" index="1"]
transform = Transform3D(1, 0, 2.98023e-08, 0, 1, -2.98023e-08, 5.96046e-08, 0, 1, 0, 0.0980922, -5.96046e-08)
remote_path = NodePath("../../../../Weapons")

[node name="L_UpperArm" parent="Puppet/Skeleton3D" index="8"]
transform = Transform3D(0.97778, -0.18863, 0.0914603, -0.15249, -0.939367, -0.307144, 0.143851, 0.286372, -0.947258, -0.195221, 1.3887, -0.0362463)

[node name="L_Forearm" parent="Puppet/Skeleton3D" index="9"]
transform = Transform3D(0.97668, -0.00293823, 0.214682, -0.0477811, -0.977806, 0.203995, 0.209318, -0.209495, -0.955143, -0.234583, 1.19268, 0.0235116)

[node name="L_Hand" parent="Puppet/Skeleton3D" index="10"]
transform = Transform3D(0.894017, 0.0234942, -0.447416, 0.0974251, -0.984923, 0.142953, -0.437312, -0.171392, -0.882827, -0.235186, 0.991947, -0.0194963)

[node name="R_Thigh" parent="Puppet/Skeleton3D" index="11"]
transform = Transform3D(0.488207, 0.0622174, 0.870507, -0.317852, -0.916273, 0.243749, 0.812788, -0.395692, -0.427555, 0.0851499, 0.871164, -0.0593682)

[node name="R_Shin" parent="Puppet/Skeleton3D" index="12"]
transform = Transform3D(0.475963, 0.0217733, 0.879196, 0.116948, -0.992382, -0.0387347, 0.871655, 0.121256, -0.474884, 0.111291, 0.486183, -0.225622)

[node name="R_Foot" parent="Puppet/Skeleton3D" index="13"]
transform = Transform3D(0.245939, 0.0720783, 0.966602, -0.853541, -0.456466, 0.25121, 0.459327, -0.886817, -0.0507409, 0.119461, 0.113834, -0.180126)

[node name="L_Thigh" parent="Puppet/Skeleton3D" index="14"]
transform = Transform3D(0.498281, -0.0541741, -0.865322, -0.0792869, -0.996711, 0.0167438, -0.863383, 0.0602655, -0.500938, -0.0851499, 0.871164, -0.0593682)

[node name="L_Shin" parent="Puppet/Skeleton3D" index="15"]
transform = Transform3D(0.491228, -0.0307808, -0.870487, -0.388285, -0.902323, -0.187209, -0.779698, 0.429959, -0.455199, -0.107912, 0.452386, -0.0340471)

[node name="L_Foot" parent="Puppet/Skeleton3D" index="16"]
transform = Transform3D(0.245939, -0.0720758, -0.966602, 0.853542, -0.456465, 0.251209, -0.459326, -0.886817, -0.0507429, -0.119461, 0.113828, 0.127277)

[node name="DmgLbl" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.88315, 0)

[node name="Voice" type="Node3D" parent="."]
script = ExtResource("4_8ihun")

[node name="Slapped" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("5_tm5o4")
bus = &"SFX"

[node name="Footsteps" type="Node3D" parent="."]
script = ExtResource("9_druge")

[node name="Footsteps1" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("9_4go11")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[node name="Footsteps2" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("10_i4x8w")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[node name="Footsteps3" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("12_hl0ln")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[connection signal="take_damage" from="Puppet/Skeleton3D/Head/HeadArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/Neck/NeckArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/Chest/ChestArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/Stomach/StomachArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_UpperArm/R_UpperArmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Forearm/R_ForearmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Hand/R_HandArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_UpperArm/L_UpperArmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Forearm/L_ForearmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Hand/L_HandArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Thigh/R_ThighArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Shin/R_ShinArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Foot/R_FootArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Thigh/L_ThighArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Shin/L_ShinArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Foot/L_FootArea" to="." method="take_damage"]

[editable path="Weapons/Pistol"]
[editable path="Weapons/Pistol/Mesh"]
[editable path="Weapons/SMG"]
[editable path="Weapons/SMG/Mesh"]
[editable path="Weapons/Rifle"]
[editable path="Weapons/Shotgun"]
[editable path="Puppet"]
