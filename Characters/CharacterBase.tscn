[gd_scene load_steps=16 format=3 uid="uid://1s5qidco641t"]

[ext_resource type="Script" path="res://Characters/CharacterBase.gd" id="1_bax7o"]
[ext_resource type="PackedScene" uid="uid://ckqtvo1inhvtn" path="res://Props/Weapons/Slapper/Slapper.tscn" id="2_26305"]
[ext_resource type="PackedScene" uid="uid://bwie7ixf4v1vw" path="res://Props/Weapons/Pistol/Pistol.tscn" id="3_c6pft"]
[ext_resource type="PackedScene" uid="uid://bhxw75oi8yofw" path="res://Props/Weapons/Rifle/Rifle.tscn" id="4_7rqvl"]
[ext_resource type="Script" path="res://Characters/Voice.gd" id="4_8ihun"]
[ext_resource type="PackedScene" uid="uid://dh23vd3s1cpss" path="res://Props/Weapons/SMG/SMG.tscn" id="4_bxvtu"]
[ext_resource type="PackedScene" uid="uid://barsvh0ntyosw" path="res://Props/Weapons/Shotgun/Shotgun.tscn" id="5_gqd55"]
[ext_resource type="AudioStream" uid="uid://dvwslqt03fwb6" path="res://Props/Weapons/Slapper/Slap.ogg" id="5_tm5o4"]
[ext_resource type="PackedScene" uid="uid://bj70y5rv73685" path="res://Characters/PuppetBase.tscn" id="6_7o0ro"]
[ext_resource type="AudioStream" uid="uid://b56r0e1ges6xc" path="res://Characters/Audio/footstep1.ogg" id="9_4go11"]
[ext_resource type="Script" path="res://RandomAudio.gd" id="9_druge"]
[ext_resource type="AudioStream" uid="uid://doju4xf4dtgt" path="res://Characters/Audio/footstep2.ogg" id="10_i4x8w"]
[ext_resource type="AudioStream" uid="uid://brbwtdst5aopq" path="res://Characters/Audio/footstep3.ogg" id="11_ccipe"]
[ext_resource type="AudioStream" uid="uid://cxbr801up84rw" path="res://Characters/Audio/footstep4.ogg" id="12_hl0ln"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_5yxej"]
radius = 0.35
height = 1.8

[node name="CharacterBase" type="CharacterBody3D" groups=["players"]]
collision_layer = 2
collision_mask = 3
platform_floor_layers = 4278190080
script = ExtResource("1_bax7o")

[node name="Collision" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.875, 0)
shape = SubResource("CapsuleShape3D_5yxej")

[node name="Weapons" type="Node3D" parent="."]
transform = Transform3D(0.858324, -0.0754462, 0.507531, -0.20153, 0.860076, 0.468675, -0.471875, -0.504557, 0.723019, 0.163217, 1.42725, -0.370238)

[node name="Slapper" parent="Weapons" instance=ExtResource("2_26305")]
transform = Transform3D(-0.224442, -0.501342, 0.835634, -0.399893, 0.829368, 0.390176, -0.888659, -0.246592, -0.386628, 0.00662899, -0.0015403, 0.0135412)
visible = false

[node name="Pistol" parent="Weapons" instance=ExtResource("3_c6pft")]
transform = Transform3D(0.907643, -0.419078, 0.0236713, 0.0267876, 0.00155281, -0.99964, 0.41889, 0.90795, 0.0126354, -0.0382926, -0.0126591, 0.00222373)
visible = false

[node name="SMG" parent="Weapons" instance=ExtResource("4_bxvtu")]
transform = Transform3D(0.898794, -0.438371, 1.11759e-08, 9.31323e-09, -4.48199e-08, -1, 0.438371, 0.898794, -3.81842e-08, -0.033591, -0.0112215, -0.00850368)
visible = false

[node name="Rifle" parent="Weapons" instance=ExtResource("4_7rqvl")]
transform = Transform3D(0.873686, -0.485679, 0.0280673, 0.0243102, -0.0140355, -0.999606, 0.485882, 0.874024, -0.000455644, -0.0376089, -0.0336642, 0.0125195)
visible = false

[node name="Shotgun" parent="Weapons" instance=ExtResource("5_gqd55")]
transform = Transform3D(0.877343, -0.479192, 0.0253764, 0.0240809, -0.00885019, -0.999671, 0.479259, 0.877665, 0.00377468, -0.044263, -0.00856596, 0.0186746)
visible = false

[node name="AimHelper" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)

[node name="Camera" type="Camera3D" parent="AimHelper"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 0.97237, 0.233445, 0, -0.233445, 0.97237, 0, 0.5, 0.75)
cull_mask = 1048551

[node name="ShootCast" type="RayCast3D" parent="AimHelper"]
unique_name_in_owner = true
target_position = Vector3(0, 0, -999)
collision_mask = 9
hit_back_faces = false
collide_with_areas = true

[node name="Puppet" parent="." instance=ExtResource("6_7o0ro")]

[node name="Skeleton3D" parent="Puppet" index="2"]
bones/1/position = Vector3(-1.45652e-09, 0.879792, -0.0641973)
bones/2/rotation = Quaternion(-0.13259, 0.000768295, 0.00327733, 0.991165)
bones/4/rotation = Quaternion(0.0928459, 0.0133208, 0.0187371, 0.995415)
bones/5/rotation = Quaternion(-0.00955728, -1.50635e-05, -5.86225e-05, 0.999954)
bones/7/rotation = Quaternion(-0.171662, 0.243238, -0.500479, 0.81295)
bones/8/rotation = Quaternion(0.261625, 0.0351828, -0.0509407, 0.963182)
bones/9/rotation = Quaternion(-0.0342917, -0.332738, -0.00329081, 0.94239)
bones/11/rotation = Quaternion(-0.1397, -0.0290383, 0.151662, 0.978079)
bones/14/rotation = Quaternion(0.0614611, -0.169924, -0.0864545, 0.979732)
bones/17/rotation = Quaternion(-0.318665, -0.0327211, 0.249432, 0.913874)
bones/20/rotation = Quaternion(0.165073, 0.090355, 0.527282, 0.828589)
bones/21/rotation = Quaternion(0.712022, -0.0251244, 0.13864, 0.687875)
bones/22/rotation = Quaternion(0.194555, 0.217816, -0.0405231, 0.955543)
bones/24/rotation = Quaternion(-0.149122, 0.0494506, -0.153137, 0.975636)
bones/25/rotation = Quaternion(-0.072408, 0.00478075, 0.0383187, 0.996627)
bones/27/rotation = Quaternion(0.104776, 0.155887, 0.114686, 0.975484)
bones/28/rotation = Quaternion(0.0697052, -0.145978, -0.0450447, 0.9858)
bones/30/rotation = Quaternion(-0.546549, -0.395552, 0.598643, 0.431798)
bones/33/rotation = Quaternion(-0.576796, 0.196326, -0.196449, 0.768225)
bones/34/rotation = Quaternion(-0.131639, 0.0038024, 0.201682, 0.970557)
bones/35/rotation = Quaternion(0.279943, -0.126397, -0.658457, 0.687088)
bones/38/rotation = Quaternion(-0.514231, -0.0397627, 0.353887, 0.780224)
bones/39/rotation = Quaternion(-0.164085, -0.00373703, -0.251392, 0.953868)
bones/40/rotation = Quaternion(0.23366, 0.125341, 0.539376, 0.799228)

[node name="Head" parent="Puppet/Skeleton3D" index="1"]
transform = Transform3D(-1, -0.000307205, 6.66441e-05, -0.000314282, 0.972162, -0.23431, 7.19501e-06, -0.23431, -0.972162, -5.04006e-05, 1.55983, -0.0510648)

[node name="Neck" parent="Puppet/Skeleton3D" index="2"]
transform = Transform3D(-1, -0.000188923, 4.12576e-05, -0.00019323, 0.967506, -0.252849, 7.85477e-06, -0.252849, -0.967506, -3.82743e-05, 1.49773, -0.0348355)

[node name="Chest" parent="Puppet/Skeleton3D" index="3"]
transform = Transform3D(-0.999977, 0.00670059, -0.000654309, 0.0064914, 0.985382, 0.170237, 0.00178543, 0.170229, -0.985403, -2.36312e-09, 1.11796, -0.0868667)

[node name="Stomach" parent="Puppet/Skeleton3D" index="4"]
transform = Transform3D(-1, -3.78941e-09, -3.89234e-07, 3.31093e-08, 0.995501, -0.0947544, 3.87842e-07, -0.0947544, -0.995501, -1.45652e-09, 0.879792, -0.0641973)

[node name="R_UpperArm" parent="Puppet/Skeleton3D" index="5"]
transform = Transform3D(0.989674, 0.140123, -0.0301893, 0.129033, -0.779203, 0.613345, 0.0624202, -0.610907, -0.789238, 0.194935, 1.38064, -0.0393479)

[node name="R_Forearm" parent="Puppet/Skeleton3D" index="6"]
transform = Transform3D(0.965088, -0.260877, 0.0234065, 0.145461, 0.608136, 0.780392, -0.21782, -0.749742, 0.624852, 0.224174, 1.21804, -0.166827)

[node name="R_Hand" parent="Puppet/Skeleton3D" index="7"]
transform = Transform3D(0.858324, -0.0754463, 0.507531, -0.201528, 0.860076, 0.468674, -0.471875, -0.504556, 0.72302, 0.170618, 1.34289, -0.320745)

[node name="GunTransform" parent="Puppet/Skeleton3D/R_Hand" index="1"]
transform = Transform3D(1, 0, 2.98023e-08, 0, 1, -2.98023e-08, 5.96046e-08, 0, 1, 0, 0.0980922, -5.96046e-08)
remote_path = NodePath("../../../../Weapons")

[node name="L_UpperArm" parent="Puppet/Skeleton3D" index="8"]
transform = Transform3D(0.979273, -0.179297, 0.0942252, -0.144906, -0.945199, -0.292577, 0.14152, 0.272859, -0.951588, -0.194987, 1.3806, -0.039345)

[node name="L_Forearm" parent="Puppet/Skeleton3D" index="9"]
transform = Transform3D(0.977162, 0.00745321, 0.212366, -0.0408155, -0.974193, 0.221995, 0.20854, -0.225593, -0.95164, -0.232401, 1.18336, 0.017593)

[node name="L_Hand" parent="Puppet/Skeleton3D" index="10"]
transform = Transform3D(0.894123, 0.0225348, -0.447254, 0.0913057, -0.986928, 0.132807, -0.438414, -0.159583, -0.884492, -0.230871, 0.983363, -0.0287196)

[node name="R_Thigh" parent="Puppet/Skeleton3D" index="11"]
transform = Transform3D(0.489679, 0.0652367, 0.869459, -0.347649, -0.899891, 0.263316, 0.799596, -0.431207, -0.417979, 0.0851499, 0.862303, -0.0593682)

[node name="R_Shin" parent="Puppet/Skeleton3D" index="12"]
transform = Transform3D(0.474494, 0.0183899, 0.880067, 0.150377, -0.986778, -0.0604571, 0.867319, 0.161029, -0.470985, 0.11256, 0.484204, -0.240544)

[node name="R_Foot" parent="Puppet/Skeleton3D" index="13"]
transform = Transform3D(0.245939, 0.0720775, 0.966602, -0.853542, -0.456465, 0.25121, 0.459327, -0.886817, -0.0507414, 0.11946, 0.113958, -0.180125)

[node name="L_Thigh" parent="Puppet/Skeleton3D" index="14"]
transform = Transform3D(0.499715, -0.057308, -0.864292, -0.0419026, -0.99824, 0.0419624, -0.865176, 0.0152468, -0.501237, -0.0851499, 0.862302, -0.0593682)

[node name="L_Shin" parent="Puppet/Skeleton3D" index="15"]
transform = Transform3D(0.488942, -0.0272687, -0.87189, -0.43083, -0.876647, -0.214185, -0.758499, 0.48036, -0.440378, -0.109228, 0.442882, -0.0529621)

[node name="L_Foot" parent="Puppet/Skeleton3D" index="16"]
transform = Transform3D(0.245937, -0.0720759, -0.966602, 0.853542, -0.456465, 0.251208, -0.459326, -0.886817, -0.0507419, -0.11946, 0.113958, 0.127272)

[node name="DmgLbl" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.88315, 0)

[node name="Voice" type="Node3D" parent="."]
script = ExtResource("4_8ihun")

[node name="Slapped" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("5_tm5o4")
bus = &"SFX"

[node name="Footsteps" type="Node3D" parent="."]
script = ExtResource("9_druge")

[node name="Footsteps1" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("9_4go11")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[node name="Footsteps2" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("10_i4x8w")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[node name="Footsteps3" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("11_ccipe")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[node name="Footsteps4" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("12_hl0ln")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[connection signal="take_damage" from="Puppet/Skeleton3D/Head/HeadArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/Neck/NeckArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/Chest/ChestArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/Stomach/StomachArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_UpperArm/R_UpperArmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Forearm/R_ForearmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Hand/R_HandArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_UpperArm/L_UpperArmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Forearm/L_ForearmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Hand/L_HandArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Thigh/R_ThighArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Shin/R_ShinArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Foot/R_FootArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Thigh/L_ThighArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Shin/L_ShinArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Foot/L_FootArea" to="." method="take_damage"]

[editable path="Weapons/Pistol"]
[editable path="Weapons/Pistol/Mesh"]
[editable path="Weapons/SMG"]
[editable path="Weapons/SMG/Mesh"]
[editable path="Weapons/Rifle"]
[editable path="Weapons/Shotgun"]
[editable path="Puppet"]
