[gd_scene load_steps=8 format=3 uid="uid://1s5qidco641t"]

[ext_resource type="Script" path="res://Characters/CharacterBase.gd" id="1_2ivhj"]
[ext_resource type="PackedScene" uid="uid://bwie7ixf4v1vw" path="res://Props/Pistol.tscn" id="2_0n5ny"]
[ext_resource type="PackedScene" uid="uid://cmdilq5ptgg8g" path="res://Characters/PuppetBase.tscn" id="2_hk3ry"]
[ext_resource type="PackedScene" uid="uid://bhxw75oi8yofw" path="res://Props/Rifle.tscn" id="3_radhw"]
[ext_resource type="Script" path="res://Characters/Voice.gd" id="5_1op2j"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_5yxej"]
radius = 0.35
height = 1.8

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ulpgl"]
albedo_color = Color(0.839216, 0.6, 0.466667, 1)
subsurf_scatter_enabled = true
subsurf_scatter_strength = 1.0
subsurf_scatter_skin_mode = true

[node name="CharacterBase" type="CharacterBody3D" groups=["players"]]
collision_layer = 2
collision_mask = 3
platform_floor_layers = 4278190080
script = ExtResource("1_2ivhj")

[node name="Collision" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.875, 0)
shape = SubResource("CapsuleShape3D_5yxej")

[node name="AimHelper" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)

[node name="ShootCast" type="RayCast3D" parent="AimHelper"]
unique_name_in_owner = true
target_position = Vector3(0, 0, -99)
collision_mask = 13
collide_with_areas = true
debug_shape_thickness = 1

[node name="Weapons" type="Node3D" parent="."]
transform = Transform3D(-0.218816, -0.167275, -0.961321, -0.964418, 0.18689, 0.187001, 0.148381, 0.968035, -0.202218, 0.174453, 1.37481, -0.270872)

[node name="Pistol" parent="Weapons" instance=ExtResource("2_0n5ny")]
transform = Transform3D(-0.249066, -0.429781, 0.867903, -0.310145, 0.884345, 0.348921, -0.917485, -0.182271, -0.353554, -0.0656749, -0.0175465, 0.0636245)
visible = false

[node name="Rifle" parent="Weapons" instance=ExtResource("3_radhw")]
transform = Transform3D(-0.247434, -0.469154, 0.847746, -0.310294, 0.867242, 0.389376, -0.917876, -0.166706, -0.360159, -0.0597211, 0.00324261, 0.0451551)
visible = false

[node name="PuppetBase" parent="." instance=ExtResource("2_hk3ry")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0.0529786)

[node name="AnimationTree" parent="PuppetBase" index="1"]
active = true
parameters/Idle/UpperIdle/blend_position = Vector2(0, 1)
parameters/Run/UpperRun/blend_position = Vector2(0, 1)

[node name="Skeleton" parent="PuppetBase" index="2"]
bones/1/position = Vector3(1.61994e-09, 0.893025, -0.0641973)
bones/2/rotation = Quaternion(0.0095378, 6.42299e-05, 0.000734366, 0.999954)
bones/4/rotation = Quaternion(0.00838347, 5.79295e-05, 0.000644972, 0.999965)
bones/5/rotation = Quaternion(0.0111265, 7.62348e-05, 0.000856043, 0.999938)
bones/7/rotation = Quaternion(0.0107456, 0.882623, 0.271108, 0.383878)
bones/8/rotation = Quaternion(-0.0172653, -0.722938, -0.0167943, 0.690493)
bones/9/rotation = Quaternion(-0.395872, 0.727819, 0.141506, 0.541795)
bones/10/rotation = Quaternion(2.38419e-07, -2.98023e-08, -1.19209e-07, 1)
bones/11/rotation = Quaternion(0.0319946, -0.0157833, -0.0731316, 0.996684)
bones/12/rotation = Quaternion(-5.96047e-08, -2.38419e-07, 2.38419e-07, 1)
bones/14/rotation = Quaternion(0.00283691, 0.00505809, -0.00263706, 0.99998)
bones/15/rotation = Quaternion(-5.96046e-08, 5.96046e-08, 1.78814e-07, 1)
bones/16/rotation = Quaternion(-0.214187, 0.673887, 0.214187, 0.673887)
bones/17/rotation = Quaternion(0.335147, 0.0647013, 0.0431432, 0.938951)
bones/18/rotation = Quaternion(-0.0177395, 0.184228, 0.00458947, 0.982713)
bones/20/rotation = Quaternion(-0.135511, 0.949429, 0.254567, 0.124165)
bones/21/rotation = Quaternion(0.245692, 0.392243, -0.238833, 0.853663)
bones/22/rotation = Quaternion(-0.252922, -0.834742, -0.127895, 0.4721)
bones/23/rotation = Quaternion(5.96046e-08, -5.96046e-08, 1.78814e-07, 1)
bones/24/rotation = Quaternion(0.0108285, 0.0229536, 0.0670673, 0.997426)
bones/25/rotation = Quaternion(-0.00116402, -0.0173747, 0.00448093, 0.999838)
bones/27/rotation = Quaternion(-0.00606875, -0.0135869, -0.0403567, 0.999075)
bones/28/rotation = Quaternion(0.00468602, -0.0333473, 0.00756068, 0.999404)
bones/29/rotation = Quaternion(-0.214187, -0.673887, -0.214187, 0.673887)
bones/30/rotation = Quaternion(-0.346258, 0.492212, -0.554242, 0.575021)
bones/31/rotation = Quaternion(-0.0929818, 0.136922, -0.113451, 0.979661)
bones/33/rotation = Quaternion(-0.139652, 0.0810091, 0.986738, -0.016809)
bones/34/rotation = Quaternion(-0.0128533, 0.99925, 0.0364464, 0.00226611)
bones/35/rotation = Quaternion(0.0796747, 0.779155, -0.611224, 0.113907)
bones/38/rotation = Quaternion(0.133351, -0.15291, 0.979014, -0.0191987)
bones/39/rotation = Quaternion(0.0398216, 0.992781, 0.112918, -0.00702074)
bones/40/rotation = Quaternion(-0.0873239, 0.675167, -0.726196, -0.0957267)
bones/41/rotation = Quaternion(-4.21469e-08, 1, 5.96047e-08, -1.26441e-07)

[node name="Body" parent="PuppetBase/Skeleton" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_ulpgl")

[node name="Head" parent="PuppetBase/Skeleton" index="1"]
transform = Transform3D(0.99999, -0.00445682, 0.000526427, 0.00447987, 0.998303, -0.0580628, -0.000266758, 0.0580645, 0.998313, -0.000725749, 1.57258, -0.0422508)

[node name="Neck" parent="PuppetBase/Skeleton" index="2"]
transform = Transform3D(0.999999, -0.00146744, 0.000142463, 0.00146989, 0.999817, -0.0190746, -0.000114446, 0.0190748, 0.999818, 0.00176751, 1.45404, -0.0251726)

[node name="Chest" parent="PuppetBase/Skeleton" index="3"]
transform = Transform3D(0.999999, -0.00146744, 0.000142463, 0.00146989, 0.999817, -0.0190746, -0.000114446, 0.0190748, 0.999818, 7.13332e-10, 1.13119, -0.0868668)

[node name="Stomach" parent="PuppetBase/Skeleton" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.61994e-09, 0.893025, -0.0641973)

[node name="R_UpperArm" parent="PuppetBase/Skeleton" index="5"]
transform = Transform3D(0.19468, -0.834278, -0.51583, -0.32221, 0.442314, -0.836982, 0.926434, 0.329149, -0.182703, 0.194582, 1.39325, -0.0347133)

[node name="R_Forearm" parent="PuppetBase/Skeleton" index="6"]
transform = Transform3D(0.697936, -0.641205, 0.318968, 0.377329, -0.049312, -0.924765, 0.608693, 0.765783, 0.207529, 0.22887, 1.24339, -0.175818)

[node name="R_Hand" parent="PuppetBase/Skeleton" index="7"]
transform = Transform3D(-0.218816, -0.167275, -0.961321, -0.964418, 0.18689, 0.187001, 0.148381, 0.968035, -0.202218, 0.174453, 1.37481, -0.32385)

[node name="GunTransform" parent="PuppetBase/Skeleton/R_Hand" index="1"]
remote_path = NodePath("../../../../Weapons")

[node name="L_UpperArm" parent="PuppetBase/Skeleton" index="8"]
transform = Transform3D(0.227998, 0.852028, 0.471238, -0.657907, 0.491594, -0.57052, -0.717757, -0.179953, 0.672638, -0.19534, 1.39268, -0.0346688)

[node name="L_Forearm" parent="PuppetBase/Skeleton" index="9"]
transform = Transform3D(0.461798, 0.862226, -0.208108, -0.538888, 0.459091, 0.706282, 0.704516, -0.214013, 0.676651, -0.235566, 1.19718, 0.0261979)

[node name="L_Hand" parent="PuppetBase/Skeleton" index="10"]
transform = Transform3D(-0.223148, 0.266935, 0.937524, -0.776686, 0.532487, -0.336477, -0.589037, -0.803245, 0.0885011, -0.237264, 0.996082, -0.0150861)

[node name="R_Thigh" parent="PuppetBase/Skeleton" index="11"]
transform = Transform3D(-0.963698, -0.00318988, 0.266976, -0.0783731, -0.9525, -0.294282, 0.255234, -0.304523, 0.917672, 0.0851499, 0.875535, -0.0593682)

[node name="R_Shin" parent="PuppetBase/Skeleton" index="12"]
transform = Transform3D(0.966422, -0.021116, -0.256092, -0.00243427, -0.997326, 0.0730479, -0.256949, -0.0699717, -0.963889, 0.110612, 0.48708, -0.21745)

[node name="R_Foot" parent="PuppetBase/Skeleton" index="13"]
transform = Transform3D(-1, -2.98023e-08, -2.10479e-07, -2.40281e-07, 5.58794e-07, 1, 1.49012e-08, 1, -3.50177e-07, 0.119459, 0.11384, -0.180125)

[node name="L_Thigh" parent="PuppetBase/Skeleton" index="14"]
transform = Transform3D(-0.960429, 0.0105459, -0.278324, -0.0557983, -0.98631, 0.155175, -0.272877, 0.164564, 0.94787, -0.0851499, 0.875535, -0.0593682)

[node name="L_Shin" parent="PuppetBase/Skeleton" index="15"]
transform = Transform3D(0.961354, 0.0150876, 0.2749, 0.0801039, -0.970628, -0.22686, 0.263403, 0.240113, -0.934326, -0.107152, 0.457559, -0.0226737)

[node name="L_Foot" parent="PuppetBase/Skeleton" index="16"]
transform = Transform3D(-1, -1.78814e-07, -3.46452e-07, -3.09199e-07, 1.63913e-07, 1, -8.9407e-08, 1, 1.49012e-08, -0.11946, 0.113837, 0.127274)

[node name="DmgLbl" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.88315, 0)

[node name="Voice" type="Node3D" parent="."]
script = ExtResource("5_1op2j")

[connection signal="take_damage" from="PuppetBase/Skeleton/Head/HeadArea" to="." method="_take_damage"]
[connection signal="take_damage" from="PuppetBase/Skeleton/Neck/NeckArea" to="." method="_take_damage"]
[connection signal="take_damage" from="PuppetBase/Skeleton/Chest/ChestArea" to="." method="_take_damage"]
[connection signal="take_damage" from="PuppetBase/Skeleton/Stomach/StomachArea" to="." method="_take_damage"]
[connection signal="take_damage" from="PuppetBase/Skeleton/R_UpperArm/R_UpperArmArea" to="." method="_take_damage"]
[connection signal="take_damage" from="PuppetBase/Skeleton/R_Forearm/R_ForearmArea" to="." method="_take_damage"]
[connection signal="take_damage" from="PuppetBase/Skeleton/R_Hand/R_HandArea" to="." method="_take_damage"]
[connection signal="take_damage" from="PuppetBase/Skeleton/L_UpperArm/L_UpperArmArea" to="." method="_take_damage"]
[connection signal="take_damage" from="PuppetBase/Skeleton/L_Forearm/L_ForearmArea" to="." method="_take_damage"]
[connection signal="take_damage" from="PuppetBase/Skeleton/L_Hand/L_HandArea" to="." method="_take_damage"]
[connection signal="take_damage" from="PuppetBase/Skeleton/R_Thigh/R_ThighArea" to="." method="_take_damage"]
[connection signal="take_damage" from="PuppetBase/Skeleton/R_Shin/R_ShinArea" to="." method="_take_damage"]
[connection signal="take_damage" from="PuppetBase/Skeleton/R_Foot/R_FootArea" to="." method="_take_damage"]
[connection signal="take_damage" from="PuppetBase/Skeleton/L_Thigh/L_ThighArea" to="." method="_take_damage"]
[connection signal="take_damage" from="PuppetBase/Skeleton/L_Shin/L_ShinArea" to="." method="_take_damage"]
[connection signal="take_damage" from="PuppetBase/Skeleton/L_Foot/L_FootArea" to="." method="_take_damage"]

[editable path="PuppetBase"]
