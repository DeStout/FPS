[gd_scene load_steps=16 format=3 uid="uid://1s5qidco641t"]

[ext_resource type="Script" path="res://Characters/CharacterBase.gd" id="1_bax7o"]
[ext_resource type="PackedScene" uid="uid://ckqtvo1inhvtn" path="res://Props/Weapons/Slapper/Slapper.tscn" id="2_26305"]
[ext_resource type="PackedScene" uid="uid://bwie7ixf4v1vw" path="res://Props/Weapons/Pistol/Pistol.tscn" id="3_c6pft"]
[ext_resource type="PackedScene" uid="uid://bhxw75oi8yofw" path="res://Props/Weapons/Rifle/Rifle.tscn" id="4_7rqvl"]
[ext_resource type="Script" path="res://Characters/Voice.gd" id="4_8ihun"]
[ext_resource type="PackedScene" uid="uid://dh23vd3s1cpss" path="res://Props/Weapons/SMG/SMG.tscn" id="4_bxvtu"]
[ext_resource type="PackedScene" uid="uid://barsvh0ntyosw" path="res://Props/Weapons/Shotgun/Shotgun.tscn" id="5_gqd55"]
[ext_resource type="AudioStream" uid="uid://dvwslqt03fwb6" path="res://Props/Weapons/Slapper/Slap.ogg" id="5_tm5o4"]
[ext_resource type="PackedScene" uid="uid://bj70y5rv73685" path="res://Characters/PuppetBase.tscn" id="6_7o0ro"]
[ext_resource type="AudioStream" uid="uid://b56r0e1ges6xc" path="res://Characters/Audio/footstep1.ogg" id="9_4go11"]
[ext_resource type="Script" path="res://RandomAudio.gd" id="9_druge"]
[ext_resource type="AudioStream" uid="uid://doju4xf4dtgt" path="res://Characters/Audio/footstep2.ogg" id="10_i4x8w"]
[ext_resource type="AudioStream" uid="uid://brbwtdst5aopq" path="res://Characters/Audio/footstep3.ogg" id="11_ccipe"]
[ext_resource type="AudioStream" uid="uid://cxbr801up84rw" path="res://Characters/Audio/footstep4.ogg" id="12_hl0ln"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_5yxej"]
radius = 0.35
height = 1.8

[node name="CharacterBase" type="CharacterBody3D" groups=["players"]]
collision_layer = 2
collision_mask = 3
platform_floor_layers = 4278190080
script = ExtResource("1_bax7o")

[node name="Collision" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.875, 0)
shape = SubResource("CapsuleShape3D_5yxej")

[node name="Weapons" type="Node3D" parent="."]
transform = Transform3D(0.857491, -0.0748604, 0.509025, -0.206018, 0.856619, 0.473033, -0.471451, -0.51049, 0.71912, 0.163659, 1.4299, -0.371221)

[node name="Slapper" parent="Weapons" instance=ExtResource("2_26305")]
transform = Transform3D(-0.224442, -0.501342, 0.835634, -0.399893, 0.829368, 0.390176, -0.888659, -0.246592, -0.386628, 0.00662899, -0.0015403, 0.0135412)
visible = false

[node name="Pistol" parent="Weapons" instance=ExtResource("3_c6pft")]
transform = Transform3D(0.907643, -0.419078, 0.0236713, 0.0267876, 0.00155281, -0.99964, 0.41889, 0.90795, 0.0126354, -0.0382926, -0.0126591, 0.00222373)
visible = false

[node name="SMG" parent="Weapons" instance=ExtResource("4_bxvtu")]
transform = Transform3D(0.898794, -0.438371, 1.11759e-08, 9.31323e-09, -4.48199e-08, -1, 0.438371, 0.898794, -3.81842e-08, -0.033591, -0.0112215, -0.00850368)
visible = false

[node name="Rifle" parent="Weapons" instance=ExtResource("4_7rqvl")]
transform = Transform3D(0.873686, -0.485679, 0.0280673, 0.0243102, -0.0140355, -0.999606, 0.485882, 0.874024, -0.000455644, -0.0376089, -0.0336642, 0.0125195)
visible = false

[node name="Shotgun" parent="Weapons" instance=ExtResource("5_gqd55")]
transform = Transform3D(0.877343, -0.479192, 0.0253764, 0.0240809, -0.00885019, -0.999671, 0.479259, 0.877665, 0.00377468, -0.044263, -0.00856596, 0.0186746)
visible = false

[node name="AimHelper" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)

[node name="Camera" type="Camera3D" parent="AimHelper"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.210124)
cull_mask = 1048567

[node name="ShootCast" type="RayCast3D" parent="AimHelper"]
unique_name_in_owner = true
target_position = Vector3(0, 0, -999)
collision_mask = 9
hit_back_faces = false
collide_with_areas = true

[node name="Puppet" parent="." instance=ExtResource("6_7o0ro")]

[node name="Skeleton3D" parent="Puppet" index="2"]
bones/1/position = Vector3(-1.41651e-09, 0.881, -0.0641973)
bones/2/rotation = Quaternion(-0.133238, 0.000776335, 0.0032266, 0.991079)
bones/4/rotation = Quaternion(0.0922734, 0.0133024, 0.0187001, 0.995469)
bones/5/rotation = Quaternion(-0.01032, -2.99538e-05, -0.000116657, 0.999947)
bones/7/rotation = Quaternion(-0.173146, 0.244507, -0.499502, 0.812856)
bones/8/rotation = Quaternion(0.261369, 0.0351883, -0.0508898, 0.963254)
bones/9/rotation = Quaternion(-0.0324002, -0.332889, -0.00434312, 0.942399)
bones/11/rotation = Quaternion(-0.139527, -0.0289935, 0.15215, 0.97803)
bones/12/rotation = Quaternion(-0.0728706, -0.00440988, -0.0389535, 0.996571)
bones/14/rotation = Quaternion(0.0616541, -0.170091, -0.0859645, 0.979734)
bones/15/rotation = Quaternion(0.0688573, 0.146545, 0.0441172, 0.985818)
bones/17/rotation = Quaternion(-0.317587, -0.0325943, 0.251578, 0.913666)
bones/18/rotation = Quaternion(-0.0645516, 0.0977242, -0.0941116, 0.988649)
bones/20/rotation = Quaternion(0.167765, 0.0925338, 0.525961, 0.828648)
bones/21/rotation = Quaternion(0.710976, -0.0251654, 0.138436, 0.688996)
bones/22/rotation = Quaternion(0.189358, 0.221363, -0.0427327, 0.955676)
bones/24/rotation = Quaternion(-0.147722, 0.0489773, -0.151908, 0.976065)
bones/25/rotation = Quaternion(-0.0715789, 0.00544321, 0.0371815, 0.996727)
bones/27/rotation = Quaternion(0.10424, 0.156176, 0.114163, 0.975556)
bones/28/rotation = Quaternion(0.0717228, -0.144635, -0.0472497, 0.98575)
bones/30/rotation = Quaternion(-0.544759, -0.394648, 0.598218, 0.43546)
bones/31/rotation = Quaternion(-0.291467, -0.110498, 0.336933, 0.888433)
bones/33/rotation = Quaternion(-0.577589, 0.198133, -0.194239, 0.767728)
bones/34/rotation = Quaternion(-0.128016, 0.00380874, 0.196132, 0.972178)
bones/35/rotation = Quaternion(0.278973, -0.126918, -0.655964, 0.689766)
bones/36/rotation = Quaternion(0.00495412, -0.00577786, -0.163837, 0.986458)
bones/38/rotation = Quaternion(-0.515311, -0.0415133, 0.352074, 0.78024)
bones/39/rotation = Quaternion(-0.161193, -0.00374349, -0.246961, 0.955517)
bones/40/rotation = Quaternion(0.232763, 0.125674, 0.537293, 0.80084)
bones/41/rotation = Quaternion(0.00495411, 0.00577787, 0.163837, 0.986458)

[node name="Head" parent="Puppet/Skeleton3D" index="1"]
transform = Transform3D(-1, -0.00061164, 0.000131904, -0.000625578, 0.973087, -0.230437, 1.25856e-05, -0.230437, -0.973087, -0.000100286, 1.56101, -0.0504159)

[node name="Neck" parent="Puppet/Skeleton3D" index="2"]
transform = Transform3D(-1, -0.000376103, 8.21874e-05, -0.000384704, 0.968124, -0.250471, 1.46311e-05, -0.250471, -0.968124, -7.61459e-05, 1.49887, -0.0343392)

[node name="Chest" parent="Puppet/Skeleton3D" index="3"]
transform = Transform3D(-0.999978, 0.00660261, -0.000679384, 0.00638823, 0.985159, 0.171525, 0.00180181, 0.171517, -0.98518, -2.32311e-09, 1.11917, -0.0868667)

[node name="Stomach" parent="Puppet/Skeleton3D" index="4"]
transform = Transform3D(-1, -3.78941e-09, -3.89234e-07, 3.31093e-08, 0.995501, -0.0947544, 3.87842e-07, -0.0947544, -0.995501, -1.41651e-09, 0.881, -0.0641973)

[node name="R_UpperArm" parent="Puppet/Skeleton3D" index="5"]
transform = Transform3D(0.98932, 0.142441, -0.0309219, 0.130778, -0.773761, 0.619831, 0.064363, -0.617255, -0.784126, 0.194908, 1.3818, -0.0390062)

[node name="R_Forearm" parent="Puppet/Skeleton3D" index="6"]
transform = Transform3D(0.965064, -0.26123, 0.0202742, 0.14919, 0.611462, 0.777082, -0.215394, -0.746909, 0.629073, 0.224632, 1.22034, -0.16781)

[node name="R_Hand" parent="Puppet/Skeleton3D" index="7"]
transform = Transform3D(0.857491, -0.0748604, 0.509025, -0.206019, 0.856619, 0.473033, -0.471452, -0.51049, 0.71912, 0.171003, 1.34587, -0.321146)

[node name="GunTransform" parent="Puppet/Skeleton3D/R_Hand" index="1"]
transform = Transform3D(1, 0, 2.98023e-08, 0, 1, -2.98023e-08, 5.96046e-08, 0, 1, 0, 0.0980922, -5.96046e-08)
remote_path = NodePath("../../../../Weapons")

[node name="L_UpperArm" parent="Puppet/Skeleton3D" index="8"]
transform = Transform3D(0.979044, -0.180775, 0.0937744, -0.146049, -0.944168, -0.295326, 0.141926, 0.275441, -0.950783, -0.195013, 1.38172, -0.0390002)

[node name="L_Forearm" parent="Puppet/Skeleton3D" index="9"]
transform = Transform3D(0.977095, 0.00573589, 0.212728, -0.0418555, -0.974931, 0.218537, 0.208649, -0.222435, -0.952359, -0.232736, 1.1847, 0.0184767)

[node name="L_Hand" parent="Puppet/Skeleton3D" index="10"]
transform = Transform3D(0.894113, 0.0224235, -0.44728, 0.0915503, -0.986806, 0.133537, -0.438384, -0.160346, -0.884369, -0.231559, 0.984553, -0.0271877)

[node name="R_Thigh" parent="Puppet/Skeleton3D" index="11"]
transform = Transform3D(0.489471, 0.0648125, 0.869607, -0.343519, -0.902265, 0.260601, 0.801506, -0.426283, -0.419369, 0.0851499, 0.863511, -0.0593682)

[node name="R_Shin" parent="Puppet/Skeleton3D" index="12"]
transform = Transform3D(0.474698, 0.0188664, 0.879946, 0.145742, -0.987653, -0.057447, 0.867998, 0.155516, -0.471587, 0.112382, 0.484415, -0.238475)

[node name="R_Foot" parent="Puppet/Skeleton3D" index="13"]
transform = Transform3D(0.245939, 0.0720782, 0.966602, -0.853541, -0.456466, 0.25121, 0.459327, -0.886817, -0.0507409, 0.11946, 0.113841, -0.180125)

[node name="L_Thigh" parent="Puppet/Skeleton3D" index="14"]
transform = Transform3D(0.499526, -0.05688, -0.864429, -0.0468712, -0.998155, 0.0385937, -0.86503, 0.0212382, -0.501271, -0.0851499, 0.863511, -0.0593682)

[node name="L_Shin" parent="Puppet/Skeleton3D" index="15"]
transform = Transform3D(0.489255, -0.0277487, -0.8717, -0.425161, -0.880274, -0.210607, -0.761491, 0.473653, -0.442476, -0.109049, 0.444126, -0.0504448)

[node name="L_Foot" parent="Puppet/Skeleton3D" index="16"]
transform = Transform3D(0.245938, -0.0720763, -0.966602, 0.853542, -0.456465, 0.251209, -0.459326, -0.886817, -0.0507421, -0.11946, 0.113841, 0.127273)

[node name="DmgLbl" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.88315, 0)

[node name="Voice" type="Node3D" parent="."]
script = ExtResource("4_8ihun")

[node name="Slapped" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("5_tm5o4")
bus = &"SFX"

[node name="Footsteps" type="Node3D" parent="."]
script = ExtResource("9_druge")

[node name="Footsteps1" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("9_4go11")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[node name="Footsteps2" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("10_i4x8w")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[node name="Footsteps3" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("11_ccipe")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[node name="Footsteps4" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("12_hl0ln")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[connection signal="take_damage" from="Puppet/Skeleton3D/Head/HeadArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/Neck/NeckArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/Chest/ChestArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/Stomach/StomachArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_UpperArm/R_UpperArmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Forearm/R_ForearmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Hand/R_HandArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_UpperArm/L_UpperArmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Forearm/L_ForearmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Hand/L_HandArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Thigh/R_ThighArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Shin/R_ShinArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Foot/R_FootArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Thigh/L_ThighArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Shin/L_ShinArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Foot/L_FootArea" to="." method="take_damage"]

[editable path="Weapons/Pistol"]
[editable path="Weapons/Pistol/Mesh"]
[editable path="Weapons/SMG"]
[editable path="Weapons/SMG/SMG"]
[editable path="Weapons/Rifle"]
[editable path="Weapons/Shotgun"]
[editable path="Puppet"]
