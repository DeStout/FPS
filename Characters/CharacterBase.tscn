[gd_scene load_steps=16 format=3 uid="uid://1s5qidco641t"]

[ext_resource type="Script" path="res://Characters/CharacterBase.gd" id="1_bax7o"]
[ext_resource type="PackedScene" uid="uid://ckqtvo1inhvtn" path="res://Props/Weapons/Slapper/Slapper.tscn" id="2_26305"]
[ext_resource type="PackedScene" uid="uid://bwie7ixf4v1vw" path="res://Props/Weapons/Pistol/Pistol.tscn" id="3_c6pft"]
[ext_resource type="PackedScene" uid="uid://bhxw75oi8yofw" path="res://Props/Weapons/Rifle/Rifle.tscn" id="4_7rqvl"]
[ext_resource type="Script" path="res://Characters/Multiplayer/Voice.gd" id="4_8ihun"]
[ext_resource type="PackedScene" uid="uid://dh23vd3s1cpss" path="res://Props/Weapons/SMG/SMG.tscn" id="4_bxvtu"]
[ext_resource type="PackedScene" uid="uid://barsvh0ntyosw" path="res://Props/Weapons/Shotgun/Shotgun.tscn" id="5_gqd55"]
[ext_resource type="AudioStream" uid="uid://dvwslqt03fwb6" path="res://Props/Weapons/Slapper/Slap.ogg" id="5_tm5o4"]
[ext_resource type="PackedScene" uid="uid://bj70y5rv73685" path="res://Characters/PuppetBase.tscn" id="6_7o0ro"]
[ext_resource type="PackedScene" uid="uid://dlgv171g6as4t" path="res://Props/Weapons/Sniper/Sniper.tscn" id="7_3u6w3"]
[ext_resource type="AudioStream" uid="uid://b56r0e1ges6xc" path="res://Characters/Audio/footstep1.ogg" id="9_4go11"]
[ext_resource type="Script" path="res://RandomAudio.gd" id="9_druge"]
[ext_resource type="AudioStream" uid="uid://doju4xf4dtgt" path="res://Characters/Audio/footstep2.ogg" id="10_i4x8w"]
[ext_resource type="AudioStream" uid="uid://cxbr801up84rw" path="res://Characters/Audio/footstep4.ogg" id="12_hl0ln"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_5yxej"]
radius = 0.35
height = 1.8

[node name="CharacterBase" type="CharacterBody3D" groups=["players"]]
collision_layer = 2
collision_mask = 3
platform_floor_layers = 4278190080
script = ExtResource("1_bax7o")

[node name="Collision" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9, 0)
visible = false
shape = SubResource("CapsuleShape3D_5yxej")

[node name="StepCast" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.35, -0.35)
visible = false
target_position = Vector3(0, -0.35, 0)

[node name="Weapons" type="Node3D" parent="."]
transform = Transform3D(0.850595, -0.0730492, 0.520723, -0.235025, 0.833059, 0.500776, -0.470374, -0.54834, 0.691427, 0.166481, 1.4497, -0.377054)

[node name="Slapper" parent="Weapons" instance=ExtResource("2_26305")]
transform = Transform3D(-0.224442, -0.501342, 0.835634, -0.399893, 0.829368, 0.390176, -0.888659, -0.246592, -0.386628, 0.00662899, -0.0015403, 0.0135412)
visible = false

[node name="Pistol" parent="Weapons" instance=ExtResource("3_c6pft")]
transform = Transform3D(0.907643, -0.419078, 0.0236713, 0.0267876, 0.00155281, -0.99964, 0.41889, 0.90795, 0.0126354, -0.0382926, -0.0126591, 0.00222373)
visible = false

[node name="SMG" parent="Weapons" instance=ExtResource("4_bxvtu")]
transform = Transform3D(0.898794, -0.438371, 1.11759e-08, 9.31323e-09, -4.48199e-08, -1, 0.438371, 0.898794, -3.81842e-08, -0.033591, -0.0112215, -0.00850368)
visible = false

[node name="Rifle" parent="Weapons" instance=ExtResource("4_7rqvl")]
transform = Transform3D(0.873686, -0.485679, 0.0280673, 0.0243102, -0.0140355, -0.999606, 0.485882, 0.874024, -0.000455644, -0.0376089, -0.0336642, 0.0125195)
visible = false

[node name="Shotgun" parent="Weapons" instance=ExtResource("5_gqd55")]
transform = Transform3D(0.877343, -0.479192, 0.0253764, 0.0240809, -0.00885019, -0.999671, 0.479259, 0.877665, 0.00377468, -0.044263, -0.00856596, 0.0186746)
visible = false

[node name="Sniper" parent="Weapons" instance=ExtResource("7_3u6w3")]
transform = Transform3D(0.873686, -0.48568, 0.0280686, 0.0243113, -0.0140362, -0.999606, 0.485882, 0.874024, -0.000455685, -0.0376089, -0.0336642, 0.0125195)
visible = false

[node name="AimHelper" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)

[node name="Camera" type="Camera3D" parent="AimHelper"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 0.97237, 0.233445, 0, -0.233445, 0.97237, 0, 0.5, 0.75)
visible = false
cull_mask = 1048551

[node name="ShootCast" type="RayCast3D" parent="AimHelper"]
unique_name_in_owner = true
visible = false
target_position = Vector3(0, 0, -999)
collision_mask = 9
hit_back_faces = false
collide_with_areas = true

[node name="Puppet" parent="." instance=ExtResource("6_7o0ro")]

[node name="Skeleton3D" parent="Puppet" index="2"]
bones/1/position = Vector3(-1.11204e-09, 0.890196, -0.0641973)
bones/2/rotation = Quaternion(-0.139457, 0.000857436, 0.00274017, 0.990224)
bones/4/rotation = Quaternion(0.0867734, 0.0131741, 0.018349, 0.995972)
bones/5/rotation = Quaternion(-0.0176502, -0.00011225, -0.000675632, 0.999844)
bones/7/rotation = Quaternion(-0.182691, 0.252844, -0.493082, 0.812135)
bones/8/rotation = Quaternion(0.260218, 0.0352088, -0.0506627, 0.963577)
bones/9/rotation = Quaternion(-0.0184186, -0.333937, -0.0120641, 0.942338)
bones/11/rotation = Quaternion(-0.138283, -0.0286668, 0.155649, 0.977665)
bones/12/rotation = Quaternion(-0.0728706, -0.00440988, -0.0389535, 0.996571)
bones/14/rotation = Quaternion(0.063032, -0.17127, -0.0824706, 0.979741)
bones/15/rotation = Quaternion(0.0688573, 0.146545, 0.0441172, 0.985818)
bones/17/rotation = Quaternion(-0.310072, -0.0316084, 0.266424, 0.912071)
bones/18/rotation = Quaternion(-0.0645516, 0.0977242, -0.0941116, 0.988649)
bones/20/rotation = Quaternion(0.186682, 0.107416, 0.516258, 0.828909)
bones/21/rotation = Quaternion(0.702365, -0.0254975, 0.13676, 0.698091)
bones/22/rotation = Quaternion(0.154391, 0.246957, -0.0564718, 0.95498)
bones/24/rotation = Quaternion(-0.137965, 0.0457916, -0.143348, 0.978938)
bones/25/rotation = Quaternion(-0.0652118, 0.0104206, 0.0284901, 0.99741)
bones/27/rotation = Quaternion(0.0991061, 0.158969, 0.10915, 0.976214)
bones/28/rotation = Quaternion(0.0858765, -0.135505, -0.0626287, 0.985059)
bones/30/rotation = Quaternion(-0.53182, -0.388584, 0.595091, 0.460474)
bones/31/rotation = Quaternion(-0.291467, -0.110498, 0.336933, 0.888433)
bones/33/rotation = Quaternion(-0.58371, 0.212545, -0.176378, 0.763543)
bones/34/rotation = Quaternion(-0.0990248, 0.00385291, 0.151715, 0.983444)
bones/35/rotation = Quaternion(0.271111, -0.130908, -0.636005, 0.710535)
bones/36/rotation = Quaternion(0.00495412, -0.00577786, -0.163837, 0.986458)
bones/38/rotation = Quaternion(-0.52326, -0.0545906, 0.338396, 0.780197)
bones/39/rotation = Quaternion(-0.139306, -0.00378834, -0.213429, 0.966968)
bones/40/rotation = Quaternion(0.225917, 0.128113, 0.521452, 0.812795)
bones/41/rotation = Quaternion(0.00495411, 0.00577787, 0.163837, 0.986458)

[node name="Head" parent="Puppet/Skeleton3D" index="1"]
transform = Transform3D(-0.999994, -0.0035439, 0.000468644, -0.00356771, 0.981183, -0.193048, 0.000224321, -0.193049, -0.981189, -0.000578149, 1.56988, -0.0441817)

[node name="Neck" parent="Puppet/Skeleton3D" index="2"]
transform = Transform3D(-0.999997, -0.00217807, 0.00034512, -0.00219946, 0.973762, -0.22756, 0.000159577, -0.22756, -0.973764, -0.000438348, 1.50737, -0.0295755)

[node name="Chest" parent="Puppet/Skeleton3D" index="3"]
transform = Transform3D(-0.999983, 0.00566603, -0.000934207, 0.00539763, 0.982934, 0.183881, 0.00196014, 0.183873, -0.982948, -2.01863e-09, 1.12836, -0.0868667)

[node name="Stomach" parent="Puppet/Skeleton3D" index="4"]
transform = Transform3D(-1, -3.78941e-09, -3.89234e-07, 3.31093e-08, 0.995501, -0.0947544, 3.87842e-07, -0.0947544, -0.995501, -1.11204e-09, 0.890196, -0.0641973)

[node name="R_UpperArm" parent="Puppet/Skeleton3D" index="5"]
transform = Transform3D(0.986552, 0.159086, -0.0375123, 0.143339, -0.731789, 0.666288, 0.0785462, -0.662704, -0.744751, 0.194659, 1.39056, -0.0357274)

[node name="R_Forearm" parent="Puppet/Skeleton3D" index="6"]
transform = Transform3D(0.964502, -0.264057, -0.00316031, 0.175993, 0.633822, 0.753191, -0.196882, -0.72701, 0.657795, 0.227856, 1.23786, -0.174015)

[node name="R_Hand" parent="Puppet/Skeleton3D" index="7"]
transform = Transform3D(0.850595, -0.0730492, 0.520723, -0.235025, 0.833059, 0.500776, -0.470374, -0.54834, 0.691427, 0.173646, 1.36798, -0.323266)

[node name="GunTransform" parent="Puppet/Skeleton3D/R_Hand" index="1"]
transform = Transform3D(1, 0, 2.98023e-08, 0, 1, -2.98023e-08, 5.96046e-08, 0, 1, 0, 0.0980922, -5.96046e-08)
remote_path = NodePath("../../../../Weapons")

[node name="L_UpperArm" parent="Puppet/Skeleton3D" index="8"]
transform = Transform3D(0.977531, -0.190123, 0.0910366, -0.153722, -0.938464, -0.309282, 0.144236, 0.288338, -0.946603, -0.195263, 1.39011, -0.0356919)

[node name="L_Forearm" parent="Puppet/Skeleton3D" index="9"]
transform = Transform3D(0.97659, -0.00471761, 0.215057, -0.0489805, -0.978374, 0.200962, 0.209458, -0.206791, -0.955701, -0.234936, 1.19428, 0.0244763)

[node name="L_Hand" parent="Puppet/Skeleton3D" index="10"]
transform = Transform3D(0.893993, 0.0237725, -0.447451, 0.098735, -0.984498, 0.144964, -0.437068, -0.173776, -0.882481, -0.235905, 0.993422, -0.0179764)

[node name="R_Thigh" parent="Puppet/Skeleton3D" index="11"]
transform = Transform3D(0.487936, 0.0616598, 0.870699, -0.312248, -0.919166, 0.240074, 0.81512, -0.389015, -0.429241, 0.0851499, 0.872707, -0.0593682)

[node name="R_Shin" parent="Puppet/Skeleton3D" index="12"]
transform = Transform3D(0.476238, 0.0223977, 0.879031, 0.110666, -0.993253, -0.0346477, 0.872325, 0.113779, -0.475503, 0.111057, 0.48651, -0.222817)

[node name="R_Foot" parent="Puppet/Skeleton3D" index="13"]
transform = Transform3D(0.245939, 0.0720782, 0.966602, -0.853541, -0.456465, 0.25121, 0.459327, -0.886817, -0.0507408, 0.119461, 0.113835, -0.180126)

[node name="L_Thigh" parent="Puppet/Skeleton3D" index="14"]
transform = Transform3D(0.497988, -0.0535646, -0.865528, -0.0868105, -0.996156, 0.0117016, -0.862828, 0.0693097, -0.500724, -0.0851499, 0.872707, -0.0593682)

[node name="L_Shin" parent="Puppet/Skeleton3D" index="15"]
transform = Transform3D(0.491671, -0.0314633, -0.870212, -0.379751, -0.907056, -0.181764, -0.783613, 0.419832, -0.457922, -0.107656, 0.454162, -0.0302471)

[node name="L_Foot" parent="Puppet/Skeleton3D" index="16"]
transform = Transform3D(0.245939, -0.0720758, -0.966602, 0.853542, -0.456465, 0.251209, -0.459326, -0.886817, -0.0507427, -0.119461, 0.113828, 0.127277)

[node name="DmgLbl" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.88315, 0)

[node name="Voice" type="Node3D" parent="."]
script = ExtResource("4_8ihun")

[node name="Slapped" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("5_tm5o4")
bus = &"SFX"

[node name="Footsteps" type="Node3D" parent="."]
script = ExtResource("9_druge")

[node name="Footsteps1" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("9_4go11")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[node name="Footsteps2" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("10_i4x8w")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[node name="Footsteps3" type="AudioStreamPlayer3D" parent="Footsteps"]
stream = ExtResource("12_hl0ln")
unit_size = 2.0
max_distance = 3.0
bus = &"SFX"

[connection signal="take_damage" from="Puppet/Skeleton3D/Head/HeadArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/Neck/NeckArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/Chest/ChestArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/Stomach/StomachArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_UpperArm/R_UpperArmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Forearm/R_ForearmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Hand/R_HandArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_UpperArm/L_UpperArmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Forearm/L_ForearmArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Hand/L_HandArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Thigh/R_ThighArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Shin/R_ShinArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/R_Foot/R_FootArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Thigh/L_ThighArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Shin/L_ShinArea" to="." method="take_damage"]
[connection signal="take_damage" from="Puppet/Skeleton3D/L_Foot/L_FootArea" to="." method="take_damage"]

[editable path="Weapons/Pistol"]
[editable path="Weapons/Pistol/Mesh"]
[editable path="Weapons/SMG"]
[editable path="Weapons/SMG/Mesh"]
[editable path="Weapons/Rifle"]
[editable path="Weapons/Shotgun"]
[editable path="Weapons/Sniper"]
[editable path="Puppet"]
