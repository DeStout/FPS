[gd_scene load_steps=4 format=3 uid="uid://la6he6vwubnb"]

[ext_resource type="PackedScene" uid="uid://1s5qidco641t" path="res://Characters/CharacterBase.tscn" id="1_rf7ub"]
[ext_resource type="Script" path="res://Characters/CampaignEnemy.gd" id="2_pqw3d"]
[ext_resource type="PackedScene" uid="uid://cy12nf62sv60i" path="res://Debug/VectorCube.tscn" id="3_3vsup"]

[node name="CampaignEnemy" instance=ExtResource("1_rf7ub")]
script = ExtResource("2_pqw3d")

[node name="NameLabel" type="Label3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.9756, 0)
layers = 16
billboard = 1
text = "Enemy"

[node name="BTree" type="BTPlayer" parent="." index="1"]
_import_path = NodePath("")
unique_name_in_owner = false
process_mode = 0
process_priority = 0
process_physics_priority = 0
process_thread_group = 0
editor_description = ""
script = null

[node name="NavAgent" type="NavigationAgent3D" parent="." index="2"]
debug_enabled = true

[node name="TargetCast" type="RayCast3D" parent="." index="4"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)
visible = false
target_position = Vector3(0, 0, -1)
collision_mask = 3
debug_shape_custom_color = Color(0, 0.54902, 0.282353, 1)

[node name="Weapons" parent="." index="5"]
transform = Transform3D(0.858265, -0.0754098, 0.507637, -0.201787, 0.859892, 0.4689, -0.471873, -0.504875, 0.722799, 0.163244, 1.42742, -0.370282)

[node name="Pistol" parent="Weapons" index="1"]
visible = true

[node name="LookHelper" type="Node3D" parent="." index="6"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)

[node name="VectorCube" parent="AimHelper" index="0" instance=ExtResource("3_3vsup")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
visible = false

[node name="ShootCast" parent="AimHelper" index="2"]
visible = false
collision_mask = 13

[node name="Skeleton3D" parent="Puppet" index="2"]
bones/1/position = Vector3(-1.45461e-09, 0.879849, -0.0641973)
bones/2/rotation = Quaternion(-0.132645, 0.000768992, 0.00327293, 0.991158)
bones/4/rotation = Quaternion(0.0927961, 0.0133191, 0.0187338, 0.99542)
bones/5/rotation = Quaternion(-0.00962339, -1.63538e-05, -6.36512e-05, 0.999954)
bones/7/rotation = Quaternion(-0.171759, 0.24332, -0.500416, 0.812944)
bones/8/rotation = Quaternion(0.261603, 0.0351832, -0.0509363, 0.963188)
bones/9/rotation = Quaternion(-0.0341706, -0.332747, -0.00335823, 0.942391)
bones/11/rotation = Quaternion(-0.139685, -0.0290345, 0.151704, 0.978075)
bones/12/rotation = Quaternion(-0.0728706, -0.00440988, -0.0389535, 0.996571)
bones/14/rotation = Quaternion(0.0614778, -0.169938, -0.086412, 0.979732)
bones/15/rotation = Quaternion(0.0688573, 0.146545, 0.0441172, 0.985818)
bones/17/rotation = Quaternion(-0.318596, -0.0327131, 0.24957, 0.913861)
bones/18/rotation = Quaternion(-0.0645516, 0.0977242, -0.0941116, 0.988649)
bones/20/rotation = Quaternion(0.165246, 0.0904956, 0.527198, 0.828593)
bones/21/rotation = Quaternion(0.711973, -0.0251264, 0.13863, 0.687928)
bones/22/rotation = Quaternion(0.194219, 0.218044, -0.0406673, 0.955553)
bones/24/rotation = Quaternion(-0.149031, 0.04942, -0.153058, 0.975664)
bones/25/rotation = Quaternion(-0.0723684, 0.00481255, 0.0382642, 0.996632)
bones/27/rotation = Quaternion(0.10473, 0.155912, 0.11464, 0.97549)
bones/28/rotation = Quaternion(0.069835, -0.145892, -0.0451867, 0.985798)
bones/30/rotation = Quaternion(-0.546434, -0.395494, 0.598616, 0.432034)
bones/31/rotation = Quaternion(-0.291467, -0.110498, 0.336933, 0.888433)
bones/33/rotation = Quaternion(-0.576847, 0.196441, -0.196308, 0.768194)
bones/34/rotation = Quaternion(-0.131409, 0.00380281, 0.20133, 0.970662)
bones/35/rotation = Quaternion(0.279881, -0.12643, -0.658299, 0.687259)
bones/36/rotation = Quaternion(0.00495412, -0.00577786, -0.163837, 0.986458)
bones/38/rotation = Quaternion(-0.5143, -0.0398747, 0.353771, 0.780225)
bones/39/rotation = Quaternion(-0.1639, -0.00373745, -0.251109, 0.953974)
bones/40/rotation = Quaternion(0.233602, 0.125363, 0.539243, 0.799332)
bones/41/rotation = Quaternion(0.00495411, 0.00577787, 0.163837, 0.986458)

[node name="Head" parent="Puppet/Skeleton3D" index="1"]
transform = Transform3D(-1, -0.000333756, 7.24536e-05, -0.000341453, 0.972242, -0.233976, 7.64767e-06, -0.233976, -0.972242, -5.47365e-05, 1.55988, -0.0510093)

[node name="HeadArea" parent="Puppet/Skeleton3D/Head" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Neck" parent="Puppet/Skeleton3D" index="2"]
transform = Transform3D(-1, -0.000205318, 4.49326e-05, -0.000210019, 0.967559, -0.252644, 8.3968e-06, -0.252644, -0.967559, -4.15579e-05, 1.49778, -0.0347932)

[node name="NeckArea" parent="Puppet/Skeleton3D/Neck" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Chest" parent="Puppet/Skeleton3D" index="3"]
transform = Transform3D(-0.999977, 0.00669209, -0.000656482, 0.00648246, 0.985363, 0.170347, 0.00178685, 0.170339, -0.985384, -2.3612e-09, 1.11802, -0.0868667)

[node name="ChestArea" parent="Puppet/Skeleton3D/Chest" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Stomach" parent="Puppet/Skeleton3D" index="4"]
transform = Transform3D(-1, -3.78941e-09, -3.89234e-07, 3.31093e-08, 0.995501, -0.0947544, 3.87842e-07, -0.0947544, -0.995501, -1.45461e-09, 0.879849, -0.0641973)

[node name="StomachArea" parent="Puppet/Skeleton3D/Stomach" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_UpperArm" parent="Puppet/Skeleton3D" index="5"]
transform = Transform3D(0.989651, 0.140274, -0.0302364, 0.129146, -0.778838, 0.613786, 0.0625487, -0.611338, -0.788894, 0.194932, 1.38069, -0.0393188)

[node name="R_UpperArmArea" parent="Puppet/Skeleton3D/R_UpperArm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Forearm" parent="Puppet/Skeleton3D" index="6"]
transform = Transform3D(0.965085, -0.260907, 0.023217, 0.145714, 0.60841, 0.780131, -0.217667, -0.74951, 0.625185, 0.224203, 1.21817, -0.166888)

[node name="R_ForearmArea" parent="Puppet/Skeleton3D/R_Forearm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Hand" parent="Puppet/Skeleton3D" index="7"]
transform = Transform3D(0.858265, -0.0754098, 0.507637, -0.201787, 0.859892, 0.4689, -0.471873, -0.504875, 0.722799, 0.170641, 1.34307, -0.320758)

[node name="R_HandArea" parent="Puppet/Skeleton3D/R_Hand" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_UpperArm" parent="Puppet/Skeleton3D" index="8"]
transform = Transform3D(0.979258, -0.179391, 0.0941958, -0.144983, -0.94514, -0.29273, 0.141541, 0.273001, -0.951544, -0.194989, 1.38065, -0.0393155)

[node name="L_UpperArmArea" parent="Puppet/Skeleton3D/L_UpperArm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Forearm" parent="Puppet/Skeleton3D" index="9"]
transform = Transform3D(0.977158, 0.00733897, 0.212389, -0.0408888, -0.974238, 0.221786, 0.208545, -0.225404, -0.951684, -0.232423, 1.18342, 0.0176522)

[node name="L_ForearmArea" parent="Puppet/Skeleton3D/L_Forearm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Hand" parent="Puppet/Skeleton3D" index="10"]
transform = Transform3D(0.894123, 0.0225235, -0.447256, 0.0913236, -0.986918, 0.132867, -0.438412, -0.159644, -0.884482, -0.230917, 0.983417, -0.0286216)

[node name="L_HandArea" parent="Puppet/Skeleton3D/L_Hand" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Thigh" parent="Puppet/Skeleton3D" index="11"]
transform = Transform3D(0.489665, 0.0652101, 0.869468, -0.347385, -0.900044, 0.263143, 0.799719, -0.430892, -0.418068, 0.0851499, 0.86236, -0.0593682)

[node name="R_ThighArea" parent="Puppet/Skeleton3D/R_Thigh" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Shin" parent="Puppet/Skeleton3D" index="12"]
transform = Transform3D(0.474506, 0.0184214, 0.88006, 0.150082, -0.986835, -0.0602639, 0.867363, 0.160677, -0.471024, 0.112549, 0.484198, -0.240412)

[node name="R_ShinArea" parent="Puppet/Skeleton3D/R_Shin" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Foot" parent="Puppet/Skeleton3D" index="13"]
transform = Transform3D(0.245939, 0.0720785, 0.966602, -0.853541, -0.456466, 0.25121, 0.459327, -0.886817, -0.0507407, 0.11946, 0.11393, -0.180125)

[node name="R_FootArea" parent="Puppet/Skeleton3D/R_Foot" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Thigh" parent="Puppet/Skeleton3D" index="14"]
transform = Transform3D(0.499703, -0.0572809, -0.864301, -0.0422189, -0.998236, 0.041748, -0.865167, 0.0156282, -0.501239, -0.0851499, 0.86236, -0.0593682)

[node name="L_ThighArea" parent="Puppet/Skeleton3D/L_Thigh" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Shin" parent="Puppet/Skeleton3D" index="15"]
transform = Transform3D(0.488961, -0.0272999, -0.871878, -0.430471, -0.876879, -0.213958, -0.758691, 0.479935, -0.440512, -0.109217, 0.442941, -0.0528019)

[node name="L_ShinArea" parent="Puppet/Skeleton3D/L_Shin" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Foot" parent="Puppet/Skeleton3D" index="16"]
transform = Transform3D(0.245938, -0.0720763, -0.966602, 0.853542, -0.456465, 0.251209, -0.459326, -0.886817, -0.0507421, -0.11946, 0.11393, 0.127273)

[node name="L_FootArea" parent="Puppet/Skeleton3D/L_Foot" index="0"]
collision_layer = 8
collision_mask = 1

[node name="VisTimer" type="Timer" parent="." index="10"]
wait_time = 3.0
one_shot = true

[node name="StuckTimer" type="Timer" parent="." index="11"]
wait_time = 3.0
one_shot = true

[node name="ShootTimer" type="Timer" parent="." index="12"]
one_shot = true

[connection signal="velocity_computed" from="NavAgent" to="." method="avoid_velocity"]
[connection signal="timeout" from="VisTimer" to="." method="_player_lost"]
[connection signal="timeout" from="StuckTimer" to="." method="_stuck"]

[editable path="Weapons/Pistol"]
[editable path="Weapons/Pistol/Mesh"]
[editable path="Weapons/SMG"]
[editable path="Weapons/SMG/Mesh"]
[editable path="Weapons/Rifle"]
[editable path="Weapons/Shotgun"]
[editable path="Weapons/Sniper"]
[editable path="Puppet"]
