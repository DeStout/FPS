[gd_scene load_steps=9 format=3 uid="uid://la6he6vwubnb"]

[ext_resource type="PackedScene" uid="uid://1s5qidco641t" path="res://Archive/PuppetEra/PuppetCharacter.tscn" id="1_rf7ub"]
[ext_resource type="Script" path="res://Archive/PuppetEra/CampaignEnemy.gd" id="2_pqw3d"]
[ext_resource type="PackedScene" uid="uid://cy12nf62sv60i" path="res://Autoloads/Debug/VectorCube.tscn" id="3_3vsup"]
[ext_resource type="Script" path="res://addons/StateMachine/StateMachine/state_machine.gd" id="3_7r2cl"]
[ext_resource type="Script" path="res://Characters/Campaign/GuardState.gd" id="3_h5c2t"]
[ext_resource type="PackedScene" uid="uid://bd2fp3xjnl5vp" path="res://Characters/Campaign/VisionCone.tscn" id="3_u6o4h"]
[ext_resource type="Script" path="res://Characters/Campaign/AlertState.gd" id="5_geefd"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_drlm1"]
albedo_color = Color(1, 0.725141, 0.52472, 1)
subsurf_scatter_strength = 1.0
subsurf_scatter_skin_mode = true

[node name="CampaignEnemy" instance=ExtResource("1_rf7ub")]
script = ExtResource("2_pqw3d")
starting_weapon = 0

[node name="NavAgent" type="NavigationAgent3D" parent="." index="0"]

[node name="StateMachine" type="Node" parent="." index="1" node_paths=PackedStringArray("initial_state")]
script = ExtResource("3_7r2cl")
initial_state = NodePath("GuardState")

[node name="GuardState" type="Node" parent="StateMachine" index="0" node_paths=PackedStringArray("enemy")]
script = ExtResource("3_h5c2t")
enemy = NodePath("../..")

[node name="AlertState" type="Node" parent="StateMachine" index="1" node_paths=PackedStringArray("enemy")]
script = ExtResource("5_geefd")
enemy = NodePath("../..")

[node name="TargetCast" type="RayCast3D" parent="." index="3"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)
visible = false
target_position = Vector3(0, 0, -1)
collision_mask = 3
debug_shape_custom_color = Color(0, 0.54902, 0.282353, 1)

[node name="Weapons" parent="." index="4"]
transform = Transform3D(0.84298, -0.0740967, 0.532818, -0.25921, 0.811952, 0.523015, -0.471376, -0.579002, 0.665253, 0.168608, 1.46476, -0.382227)

[node name="LookHelper" type="Node3D" parent="." index="5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.65, 0)
visible = false

[node name="VisionCone" parent="LookHelper" index="0" node_paths=PackedStringArray("parent") instance=ExtResource("3_u6o4h")]
unique_name_in_owner = true
transform = Transform3D(10, 0, 0, 0, -4.37114e-07, -10, 0, 10, -4.37114e-07, 0, 0, 0)
parent = NodePath("../..")

[node name="VectorCube" parent="AimHelper" index="0" instance=ExtResource("3_3vsup")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
visible = false

[node name="ShootCast" parent="AimHelper" index="2"]
collision_mask = 13

[node name="Skeleton3D" parent="Puppet" index="2"]
bones/1/position = Vector3(-8.81538e-10, 0.897158, -0.0641973)
bones/1/rotation = Quaternion(7.33823e-09, 0.998875, -0.0474306, -1.94488e-07)
bones/2/rotation = Quaternion(-0.143378, 0.000911488, 0.00243386, 0.989665)
bones/4/rotation = Quaternion(0.0826902, 0.0131118, 0.0180963, 0.996325)
bones/5/rotation = Quaternion(-0.0230784, -0.000145307, -0.00109025, 0.999733)
bones/7/rotation = Quaternion(-0.189443, 0.258993, -0.488373, 0.811496)
bones/8/rotation = Quaternion(0.256968, 0.0352113, -0.0500406, 0.964481)
bones/9/rotation = Quaternion(-0.00567929, -0.3348, -0.0190279, 0.94208)
bones/11/rotation = Quaternion(-0.137452, -0.0284495, 0.157985, 0.977414)
bones/12/rotation = Quaternion(-0.0728706, -0.00440989, -0.0389534, 0.996571)
bones/14/rotation = Quaternion(0.0637572, -0.171883, -0.0806336, 0.979739)
bones/15/rotation = Quaternion(0.0688574, 0.146546, 0.0441172, 0.985818)
bones/17/rotation = Quaternion(-0.303791, -0.0306246, 0.278712, 0.910545)
bones/18/rotation = Quaternion(-0.0645516, 0.0977242, -0.0941116, 0.988649)
bones/20/rotation = Quaternion(0.202696, 0.119445, 0.507478, 0.828923)
bones/21/rotation = Quaternion(0.694344, -0.0257995, 0.135198, 0.706358)
bones/22/rotation = Quaternion(0.126953, 0.269473, -0.0658024, 0.952333)
bones/24/rotation = Quaternion(-0.129792, 0.0432726, -0.136189, 0.98119)
bones/25/rotation = Quaternion(-0.0599922, 0.0143623, 0.0214172, 0.997866)
bones/27/rotation = Quaternion(0.0953215, 0.161061, 0.105444, 0.976655)
bones/28/rotation = Quaternion(0.097834, -0.128163, -0.0755096, 0.984023)
bones/30/rotation = Quaternion(-0.520387, -0.383825, 0.592264, 0.480727)
bones/31/rotation = Quaternion(-0.291467, -0.110498, 0.336933, 0.888433)
bones/32/rotation = Quaternion(0.56068, 0.43887, 0.536896, -0.45252)
bones/33/rotation = Quaternion(-0.590302, 0.229099, -0.155351, 0.758237)
bones/34/rotation = Quaternion(-0.0655299, 0.0038909, 0.100397, 0.992779)
bones/35/rotation = Quaternion(0.261813, -0.135164, -0.61289, 0.733179)
bones/36/rotation = Quaternion(0.00495411, -0.00577782, -0.163837, 0.986458)
bones/37/rotation = Quaternion(0.560681, -0.438869, -0.536895, -0.45252)
bones/38/rotation = Quaternion(-0.530687, -0.0671366, 0.325038, 0.779881)
bones/39/rotation = Quaternion(-0.117852, -0.00382555, -0.18056, 0.97647)
bones/40/rotation = Quaternion(0.219107, 0.130374, 0.505787, 0.82412)
bones/41/rotation = Quaternion(0.00495414, 0.00577782, 0.163837, 0.986458)

[node name="Body" parent="Puppet/Skeleton3D" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_drlm1")

[node name="Head" parent="Puppet/Skeleton3D" index="1"]
transform = Transform3D(-0.999984, -0.00560418, 0.000508711, -0.00561064, 0.986023, -0.166517, 0.000431595, -0.166517, -0.986038, -0.000883912, 1.5766, -0.040172)

[node name="HeadArea" parent="Puppet/Skeleton3D/Head" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Neck" parent="Puppet/Skeleton3D" index="2"]
transform = Transform3D(-0.999994, -0.00340154, 0.000425916, -0.00341456, 0.977298, -0.211841, 0.000304341, -0.211841, -0.977304, -0.000665581, 1.51387, -0.0265748)

[node name="NeckArea" parent="Puppet/Skeleton3D/Neck" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Chest" parent="Puppet/Skeleton3D" index="3"]
transform = Transform3D(-0.999986, 0.00507888, -0.00110659, 0.00477264, 0.981449, 0.191662, 0.00205949, 0.191654, -0.98146, -1.78814e-09, 1.13533, -0.0868668)

[node name="ChestArea" parent="Puppet/Skeleton3D/Chest" index="0"]
collision_layer = 8
collision_mask = 1

[node name="Stomach" parent="Puppet/Skeleton3D" index="4"]
transform = Transform3D(-1, -3.78946e-09, -3.89235e-07, 3.31093e-08, 0.995501, -0.0947545, 3.87842e-07, -0.0947545, -0.995501, -8.81538e-10, 0.897158, -0.0641973)

[node name="StomachArea" parent="Puppet/Skeleton3D/Stomach" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_UpperArm" parent="Puppet/Skeleton3D" index="5"]
transform = Transform3D(0.983875, 0.173197, -0.0446353, 0.154339, -0.696035, 0.701223, 0.0903821, -0.696805, -0.711543, 0.194502, 1.39723, -0.0336628)

[node name="R_UpperArmArea" parent="Puppet/Skeleton3D/R_UpperArm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Forearm" parent="Puppet/Skeleton3D" index="6"]
transform = Transform3D(0.963466, -0.266774, -0.0237757, 0.197699, 0.648485, 0.735107, -0.180689, -0.712951, 0.677534, 0.230644, 1.25199, -0.179067)

[node name="R_ForearmArea" parent="Puppet/Skeleton3D/R_Forearm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Hand" parent="Puppet/Skeleton3D" index="7"]
transform = Transform3D(0.84298, -0.0740967, 0.532818, -0.25921, 0.811952, 0.523015, -0.471376, -0.579002, 0.665253, 0.175877, 1.38512, -0.325431)

[node name="R_HandArea" parent="Puppet/Skeleton3D/R_Hand" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_UpperArm" parent="Puppet/Skeleton3D" index="8"]
transform = Transform3D(0.976327, -0.197023, 0.0892578, -0.159147, -0.933806, -0.320436, 0.146483, 0.298646, -0.943056, -0.195419, 1.39654, -0.0336089)

[node name="L_UpperArmArea" parent="Puppet/Skeleton3D/L_UpperArm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Forearm" parent="Puppet/Skeleton3D" index="9"]
transform = Transform3D(0.976111, -0.0141784, 0.216808, -0.0547118, -0.981753, 0.18212, 0.21027, -0.189632, -0.959076, -0.236532, 1.20168, 0.0287101)

[node name="L_ForearmArea" parent="Puppet/Skeleton3D/L_Forearm" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Hand" parent="Puppet/Skeleton3D" index="10"]
transform = Transform3D(0.893845, 0.0249824, -0.44768, 0.103981, -0.982777, 0.152768, -0.436153, -0.183101, -0.881048, -0.239443, 1.00013, -0.0102199)

[node name="L_HandArea" parent="Puppet/Skeleton3D/L_Hand" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Thigh" parent="Puppet/Skeleton3D" index="11"]
transform = Transform3D(0.48648, 0.0586571, 0.871721, -0.281574, -0.933982, 0.219984, 0.827075, -0.352472, -0.437847, 0.0851499, 0.879668, -0.0593682)

[node name="R_ThighArea" parent="Puppet/Skeleton3D/R_Thigh" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Shin" parent="Puppet/Skeleton3D" index="12"]
transform = Transform3D(0.477726, 0.0257562, 0.878131, 0.076301, -0.997009, -0.0122666, 0.875189, 0.0728623, -0.478263, 0.109795, 0.487246, -0.207463)

[node name="R_ShinArea" parent="Puppet/Skeleton3D/R_Shin" index="0"]
collision_layer = 8
collision_mask = 1

[node name="R_Foot" parent="Puppet/Skeleton3D" index="13"]
transform = Transform3D(0.245937, 0.0720783, 0.966602, -0.853541, -0.456466, 0.251208, 0.459328, -0.886816, -0.0507402, 0.119459, 0.113161, -0.180124)

[node name="R_FootArea" parent="Puppet/Skeleton3D/R_Foot" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Thigh" parent="Puppet/Skeleton3D" index="14"]
transform = Transform3D(0.496141, -0.0499228, -0.866805, -0.133285, -0.990891, -0.0192204, -0.857951, 0.125069, -0.498276, -0.0851499, 0.879668, -0.0593682)

[node name="L_ThighArea" parent="Puppet/Skeleton3D/L_Thigh" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Shin" parent="Puppet/Skeleton3D" index="15"]
transform = Transform3D(0.4943, -0.0355379, -0.868565, -0.327217, -0.933282, -0.148033, -0.805355, 0.357382, -0.47295, -0.106125, 0.463335, -0.00681939)

[node name="L_ShinArea" parent="Puppet/Skeleton3D/L_Shin" index="0"]
collision_layer = 8
collision_mask = 1

[node name="L_Foot" parent="Puppet/Skeleton3D" index="16"]
transform = Transform3D(0.245938, -0.0720736, -0.966602, 0.853542, -0.456465, 0.251207, -0.459326, -0.886817, -0.0507441, -0.11946, 0.113162, 0.127273)

[node name="L_FootArea" parent="Puppet/Skeleton3D/L_Foot" index="0"]
collision_layer = 8
collision_mask = 1

[node name="TargetTimer" type="Timer" parent="." index="9"]
one_shot = true

[node name="ShootTimer" type="Timer" parent="." index="10"]
one_shot = true

[connection signal="timeout" from="TargetTimer" to="." method="target_lost"]

[editable path="Weapons/Pistol"]
[editable path="Weapons/Pistol/Mesh"]
[editable path="Weapons/SMG"]
[editable path="Weapons/SMG/Mesh"]
[editable path="Weapons/Rifle"]
[editable path="Weapons/Shotgun"]
[editable path="Weapons/Sniper"]
[editable path="Puppet"]
